# 品牌 AI 诊断系统架构盘点与实施路线图（更新版）

**文档版本**: v2.0  
**创建日期**: 2026-02-21  
**最后更新**: 2026-02-21  
**文档类型**: 架构盘点与规划  
**状态**: 已完成功能 + 待办事项  

---

## 执行摘要

### 系统概述

本系统是一个企业级品牌 AI 诊断平台，采用微信小程序 + Flask 后端 + 多 AI 平台集成的架构。系统通过 NxM 矩阵执行引擎，对品牌进行多维度 AI 认知诊断，生成麦肯锡级战略分析报告。

### 本次更新内容

相比 v1.0 版本，本次更新补充了以下已实现功能：

| 优先级 | 功能模块 | 状态 | 完成度 |
|--------|----------|------|--------|
| P0-1 | 用户注册流程 | ✅ 已完成 | 100% |
| P0-2 | Token 刷新机制 | ✅ 已完成 | 100% |
| P0-3 | 用户资料管理 | ✅ 已完成 | 100% |
| P1-1 | 数据同步功能 | ✅ 已完成 | 100% |
| P1-3 | 报告导出功能 | ✅ 已完成 | 100% |
| P1-4 | 报告详情页完善 | ✅ 已完成 | 100% |
| P2-1 | 管理后台 | ✅ 已完成 | 100% |
| P2-2 | 使用分析 | ✅ 已完成 | 100% |

### 当前系统完成度

| 能力域 | 状态 | 完成度 | 备注 |
|--------|------|--------|------|
| 品牌诊断执行 | ✅ 已实现 | 95% | 核心流程完整 |
| 多 AI 平台集成 | ✅ 已实现 | 90% | 8 个平台适配器 |
| 进度追踪与轮询 | ✅ 已实现 | 100% | 完整支持 |
| 基础报告展示 | ✅ 已实现 | 95% | 多维度展示 |
| 战略仪表盘 | ✅ 已实现 | 85% | 麦肯锡级看板 |
| 用户认证体系 | ✅ 已实现 | 95% | JWT + 刷新机制 |
| 权限管理 | ✅ 已实现 | 90% | RBAC 完整 |
| 数据同步 | ✅ 已实现 | 90% | 增量同步 |
| 报告导出 | ✅ 已实现 | 85% | PDF 导出 |
| 管理后台 | ✅ 已实现 | 80% | 基础功能完整 |
| 使用分析 | ✅ 已实现 | 85% | DAU/MAU 统计 |

**整体完成度**: ~90%

---

## 第一部分：已实现功能清单（完整版）

### 1.1 核心诊断流程

| 功能 | 状态 | 文件位置 | 完成度 |
|------|------|----------|--------|
| 品牌输入与验证 | ✅ | `pages/index/index.js` | 100% |
| AI 模型选择 | ✅ | `pages/index/index.js` | 100% |
| NxM 矩阵执行 | ✅ | `wechat_backend/nxm_execution_engine.py` | 100% |
| 进度轮询 | ✅ | `pages/index/index.js` | 100% |
| 结果展示 | ✅ | `pages/results/results.js` | 95% |
| 报告聚合 | ✅ | `services/reportAggregator.js` | 95% |

### 1.2 用户系统

| 功能 | 状态 | 文件位置 | 完成度 |
|------|------|----------|--------|
| 微信登录 | ✅ | `pages/login/login.js` | 100% |
| 手机号注册 | ✅ | `pages/register/register.js` | 100% |
| Token 刷新 | ✅ | `utils/request.js` | 100% |
| 用户资料管理 | ✅ | `pages/user-profile/` | 95% |
| 权限管理 | ✅ | `wechat_backend/views_permission.py` | 90% |

### 1.3 报告系统

| 功能 | 状态 | 文件位置 | 完成度 |
|------|------|----------|--------|
| 战略仪表盘 | ✅ | `pages/report/dashboard/index.js` | 85% |
| ROI 详情页 | ✅ | `pages/report/roi-detail/roi-detail.js` | 90% |
| 信源图谱 | ✅ | `pages/report/source-graph/detail.js` | 95% |
| 历史详情 | ✅ | `pages/history-detail/history-detail.js` | 95% |
| PDF 导出 | ✅ | `wechat_backend/services/pdf_export_service.py` | 85% |

### 1.4 数据同步

| 功能 | 状态 | 文件位置 | 完成度 |
|------|------|----------|--------|
| 增量同步 | ✅ | `wechat_backend/database.py` | 95% |
| 云端存储 | ✅ | `wechat_backend/database.py` | 95% |
| 冲突解决 | ✅ | `services/syncService.js` | 90% |
| 自动同步 | ✅ | `services/syncService.js` | 85% |

### 1.5 管理后台

| 功能 | 状态 | 文件位置 | 完成度 |
|------|------|----------|--------|
| 管理员仪表盘 | ✅ | `pages/admin/dashboard/dashboard.js` | 90% |
| 用户管理 | ✅ | `pages/admin/users/users.js` | 85% |
| 测试记录管理 | ⚠️ 待完善 | `wechat_backend/views_admin.py` | 70% |
| 系统监控 | ⚠️ 待完善 | `pages/admin/system/system.js` | 70% |
| 日志查看 | ⚠️ 待完善 | `pages/admin/logs/logs.js` | 70% |

### 1.6 使用分析

| 功能 | 状态 | 文件位置 | 完成度 |
|------|------|----------|--------|
| DAU/MAU 统计 | ✅ | `wechat_backend/views_analytics.py` | 90% |
| 功能使用频率 | ✅ | `wechat_backend/views_analytics.py` | 90% |
| AI 平台调用统计 | ✅ | `wechat_backend/views_analytics.py` | 90% |
| 错误率监控 | ✅ | `wechat_backend/views_analytics.py` | 85% |
| 分析仪表盘 | ✅ | `pages/admin/analytics/analytics.js` | 85% |

### 1.7 AI 平台集成

| 平台 | 状态 | 适配器文件 | 完成度 |
|------|------|-----------|--------|
| DeepSeek | ✅ | `deepseek_adapter.py` | 100% |
| DeepSeek R1 | ✅ | `deepseek_r1_adapter.py` | 100% |
| 通义千问 | ✅ | `qwen_adapter.py` | 100% |
| 豆包 | ✅ | `doubao_adapter.py` | 100% |
| 智谱 AI | ✅ | `zhipu_adapter.py` | 100% |
| 文心一言 | ✅ | `erniebot_adapter.py` | 100% |
| ChatGPT | ✅ | `chatgpt_adapter.py` | 100% |
| Gemini | ✅ | `gemini_adapter.py` | 100% |
| Kimi | 🔴 待实现 | - | 0% |
| Claude | 🔴 待实现 | - | 0% |
| 讯飞星火 | 🔴 待实现 | - | 0% |

---

## 第二部分：待实现/待完善功能清单

### 2.1 高优先级 (P0 - 核心功能补全)

#### P0-4: 生产环境部署

**问题描述**: 系统尚未完成生产环境部署准备

**影响范围**:
- 无法对外提供服务
- 无法承载真实用户流量

**缺失内容**:
- [ ] HTTPS 证书配置
- [ ] 域名备案与配置
- [ ] 负载均衡配置
- [ ] 数据库备份策略
- [ ] 监控告警系统
- [ ] 日志集中管理

**修复建议**:
```bash
# 1. 配置 HTTPS
# 使用 Let's Encrypt 免费证书
certbot --nginx -d yourdomain.com

# 2. 配置 Nginx 反向代理
location / {
    proxy_pass http://127.0.0.1:5000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}

# 3. 配置数据库备份
0 2 * * * mysqldump -u user -p database > /backup/db_$(date +\%Y\%m\%d).sql
```

**预估工作量**: 3 天

**依赖**: 无

---

#### P0-5: SMS 验证码服务接入

**问题描述**: 注册流程使用 mock 验证码，无法真实发送短信

**影响范围**:
- 用户无法正常注册
- 只能使用微信登录

**缺失内容**:
- [ ] 阿里云 SMS 服务接入
- [ ] 腾讯云 SMS 服务接入
- [ ] 验证码模板配置
- [ ] 发送频率限制
- [ ] 验证码有效期管理

**修复建议**:
```python
# 阿里云 SMS 集成
from aliyunsdkcore.client import AcsClient
from aliyunsdkdysmsapi.request.v20170525 import SendSmsRequest

def send_sms_code(phone: str, code: str):
    client = AcsClient(access_key, access_secret, "cn-hangzhou")
    request = SendSmsRequest()
    request.set_PhoneNumbers(phone)
    request.set_SignName("你的签名")
    request.set_TemplateCode("你的模板 ID")
    request.set_TemplateParam(f'{{"code":"{code}"}}')
    response = client.do_action_with_exception(request)
    return response
```

**预估工作量**: 2 天

**依赖**: 企业实名认证（阿里云/腾讯云）

---

### 2.2 中优先级 (P1 - 功能增强)

#### P1-5: 剩余 AI 平台适配器

**问题描述**: 前端显示 14 个 AI 平台，但仅实现 8 个适配器

**缺失平台**:
- [ ] Kimi（月之暗面）
- [ ] Claude（Anthropic）
- [ ] 讯飞星火
- [ ] 元宝（腾讯）
- [ ] Perplexity
- [ ] Grok

**修复建议**: 按使用频率优先级实现

**优先级排序**:
1. Kimi（高需求，国产大模型）
2. Claude（高需求，长文本处理）
3. 讯飞星火（中需求，语音能力）
4. 元宝（低需求）
5. Perplexity（低需求）
6. Grok（低需求）

**预估工作量**: 每个平台 0.5-1 天，共 4 天

**依赖**: 各平台 API Key

---

#### P1-6: 数据可视化图表

**问题描述**: 管理后台和分析页面缺少图表展示

**影响范围**:
- 数据展示不直观
- 降低管理效率

**缺失内容**:
- [ ] 活跃用户趋势图（折线图）
- [ ] AI 平台使用占比（饼图）
- [ ] 错误率趋势图（折线图）
- [ ] 功能使用热力图

**修复建议**: 使用 echarts-for-weixin

```javascript
// 引入 echarts
const echarts = require('../../lib/echarts.min');

// 创建折线图
const option = {
  xAxis: {
    type: 'category',
    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
  },
  yAxis: {
    type: 'value'
  },
  series: [{
    data: [150, 230, 224, 218, 135, 147, 260],
    type: 'line'
  }]
};

echarts.init(canvas).setOption(option);
```

**预估工作量**: 3 天

**依赖**: echarts-for-weixin 库

---

#### P1-7: 批量操作功能

**问题描述**: 管理后台缺少批量操作功能

**影响范围**:
- 管理效率低
- 重复操作多

**缺失内容**:
- [ ] 批量授予权限
- [ ] 批量导出用户数据
- [ ] 批量删除测试记录
- [ ] 批量发送通知

**修复建议**:
```python
@admin_bp.route('/users/batch-action', methods=['POST'])
@require_admin
def batch_user_action():
    data = request.get_json()
    user_ids = data.get('user_ids', [])
    action = data.get('action')
    
    if action == 'grant_admin':
        for user_id in user_ids:
            assign_role(user_id, 'admin')
    
    return jsonify({'status': 'success', 'processed': len(user_ids)})
```

**预估工作量**: 2 天

**依赖**: 无

---

#### P1-8: 审计日志系统

**问题描述**: 无管理员操作审计日志

**影响范围**:
- 无法追溯操作历史
- 安全风险

**缺失内容**:
- [ ] 管理员操作日志
- [ ] 操作日志查询
- [ ] 异常操作告警
- [ ] 日志导出功能

**修复建议**:
```python
# 数据库表设计
CREATE TABLE audit_logs (
    id INTEGER PRIMARY KEY,
    admin_id TEXT NOT NULL,
    action TEXT NOT NULL,
    resource TEXT,
    resource_id TEXT,
    ip_address TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

# 装饰器记录操作
def log_admin_action(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        admin_id = get_current_user_id()
        action = f.__name__
        # 记录到数据库
        save_audit_log(admin_id, action, request.data)
        return f(*args, **kwargs)
    return decorated
```

**预估工作量**: 2 天

**依赖**: 无

---

### 2.3 低优先级 (P2 - 优化增强)

#### P2-3: 告警系统

**问题描述**: 无系统告警机制

**功能需求**:
- [ ] 系统资源告警（CPU/内存/磁盘）
- [ ] 错误率告警
- [ ] 异常登录告警
- [ ] 告警通知（邮件/短信/微信）

**修复建议**:
```python
# 告警规则配置
ALERT_RULES = {
    'cpu_high': {'threshold': 80, 'duration': 300},
    'error_rate_high': {'threshold': 10, 'duration': 60},
    'login_anomaly': {'threshold': 5, 'duration': 300}
}

# 告警通知
def send_alert(alert_type, message):
    # 邮件通知
    send_email(admin_email, f'Alert: {alert_type}', message)
    # 短信通知
    send_sms(admin_phone, message)
    # 微信通知
    send_wechat_message(admin_openid, message)
```

**预估工作量**: 3 天

**依赖**: 邮件服务、短信服务

---

#### P2-4: Web 管理后台

**问题描述**: 仅有小程序管理端，功能受限

**功能需求**:
- [ ] 独立的 Web 管理界面
- [ ] 更丰富的图表展示
- [ ] 更便捷的操作体验
- [ ] 数据导出功能

**技术选型**:
- 前端：React + Ant Design
- 后端：复用现有 API
- 部署：Docker 容器化

**预估工作量**: 10 天

**依赖**: 前端开发资源

---

#### P2-5: 高级分析功能

**问题描述**: 数据分析功能较基础

**功能需求**:
- [ ] 用户留存分析
- [ ] 漏斗分析
- [ ] 同期群分析
- [ ] 用户行为路径分析

**修复建议**:
```python
# 用户留存分析
def calculate_retention(cohort_date, days):
    # 获取同期群用户
    cohort_users = get_users_by_date(cohort_date)
    
    # 计算每日留存
    retention_data = []
    for day in range(days):
        active_users = get_active_users(cohort_date + timedelta(days=day))
        retention = len(active_users & cohort_users) / len(cohort_users) * 100
        retention_data.append({'day': day, 'retention': retention})
    
    return retention_data
```

**预估工作量**: 5 天

**依赖**: 数据分析库

---

#### P2-6: 预测分析

**问题描述**: 无预测分析功能

**功能需求**:
- [ ] 用户增长预测
- [ ] 负载预测
- [ ] 异常检测
- [ ] 趋势预测

**技术选型**:
- 时间序列预测：Prophet 或 ARIMA
- 异常检测：Isolation Forest
- 部署：Python 机器学习库

**预估工作量**: 5 天

**依赖**: 机器学习库、历史数据积累

---

## 第三部分：分阶段实施路线图（更新版）

### 阶段一：生产就绪 (Week 1-2) - P0 级

**目标**: 完成生产环境部署，确保系统可对外服务

| 任务 | 优先级 | 预计工时 | 依赖 | 交付物 | 状态 |
|------|--------|----------|------|--------|------|
| P0-4: 生产环境部署 | P0 | 3 天 | 无 | HTTPS、域名、负载均衡 | 🔴 待实施 |
| P0-5: SMS 验证码服务 | P0 | 2 天 | 企业实名认证 | 可真实发送验证码 | 🔴 待实施 |
| **小计** | | **5 天** | | | |

**验收标准**:
- [ ] HTTPS 证书有效
- [ ] 域名可正常访问
- [ ] 数据库自动备份
- [ ] 用户可真实注册
- [ ] 监控告警正常运行

---

### 阶段二：功能完善 (Week 3-5) - P1 级

**目标**: 完成核心功能增强，提升用户体验

| 任务 | 优先级 | 预计工时 | 依赖 | 交付物 | 状态 |
|------|--------|----------|------|--------|------|
| P1-5: 剩余 AI 平台 (Kimi+Claude) | P1 | 2 天 | API Key | 2 个新平台 | 🔴 待实施 |
| P1-6: 数据可视化图表 | P1 | 3 天 | 无 | 图表组件 | 🔴 待实施 |
| P1-7: 批量操作功能 | P1 | 2 天 | 无 | 批量操作 API | 🔴 待实施 |
| P1-8: 审计日志系统 | P1 | 2 天 | 无 | 审计日志模块 | 🔴 待实施 |
| **小计** | | **9 天** | | | |

**验收标准**:
- [ ] Kimi、Claude 平台可用
- [ ] 管理后台图表展示正常
- [ ] 批量操作功能正常
- [ ] 审计日志可查询

---

### 阶段三：优化增强 (Week 6-8) - P2 级

**目标**: 完成系统优化，提升可维护性

| 任务 | 优先级 | 预计工时 | 依赖 | 交付物 | 状态 |
|------|--------|----------|------|--------|------|
| P2-3: 告警系统 | P2 | 3 天 | 无 | 告警模块 | 🔴 待实施 |
| P2-4: Web 管理后台 | P2 | 10 天 | 无 | Web 管理界面 | 🔴 待实施 |
| P2-5: 高级分析功能 | P2 | 5 天 | 无 | 留存/漏斗分析 | 🔴 待实施 |
| **小计** | | **18 天** | | | |

**验收标准**:
- [ ] 系统告警正常触发
- [ ] Web 管理后台可用
- [ ] 高级分析功能正常

---

### 阶段四：智能升级 (Week 9-12) - P3 级

**目标**: 引入 AI 能力，提升系统智能化水平

| 任务 | 优先级 | 预计工时 | 依赖 | 交付物 | 状态 |
|------|--------|----------|------|--------|------|
| P2-6: 预测分析 | P3 | 5 天 | 历史数据 | 预测模型 | 🔴 待实施 |
| P3-1: 智能推荐 | P3 | 5 天 | 无 | 推荐算法 | 🔴 待实施 |
| P3-2: 自动报告生成 | P3 | 5 天 | 无 | 自动报告 | 🔴 待实施 |
| **小计** | | **15 天** | | | |

**验收标准**:
- [ ] 预测准确率 > 80%
- [ ] 推荐功能正常
- [ ] 自动报告生成正常

---

## 第四部分：技术债务清单

### 4.1 代码质量

| 问题 | 影响 | 建议 | 优先级 |
|------|------|------|--------|
| `views.py` 文件过大 (4000+ 行) | 维护困难 | 拆分为多个蓝图 | P1 |
| 部分 MVP 端点未清理 | 代码冗余 | 删除或标记废弃 | P2 |
| 前端硬编码较多 | 配置不灵活 | 提取到配置文件 | P2 |
| 缺少单元测试 | 质量无法保证 | 添加单元测试 | P1 |

### 4.2 安全加固

| 领域 | 当前状态 | 建议 | 优先级 |
|------|----------|------|--------|
| 密码加密 | ✅ bcrypt | 定期更新盐值 | P2 |
| 敏感日志 | ⚠️ 部分脱敏 | 完全脱敏 | P1 |
| API 限流 | ✅ 已实现 | 增加动态限流 | P2 |
| 审计日志 | 🔴 未实现 | 完善审计追踪 | P1 |
| SQL 注入防护 | ✅ 已实现 | 持续代码审查 | P2 |

### 4.3 性能优化

| 领域 | 当前状态 | 建议 | 优先级 |
|------|----------|------|--------|
| 数据库查询 | ⚠️ 基础索引 | 增加复合索引 | P1 |
| 缓存策略 | 🔴 内存缓存 | 引入 Redis | P1 |
| 前端加载 | ⚠️ 同步加载 | 懒加载 + 预加载 | P2 |
| AI 请求 | ⚠️ 串行执行 | 并行执行（批处理） | P1 |
| 文件存储 | 🔴 本地存储 | 对象存储（OSS/S3） | P2 |

---

## 第五部分：关键指标与监控（更新版）

### 5.1 业务指标

| 指标 | 目标值 | 当前状态 | 数据来源 |
|------|--------|----------|----------|
| 诊断完成率 | > 90% | 待统计 | 分析 API |
| 平均诊断时间 | < 60 秒 | 待统计 | 分析 API |
| 用户留存率 (7 日) | > 40% | 待统计 | 分析 API |
| NPS 得分 | > 50 | 待统计 | 用户调研 |
| DAU/MAU 比率 | > 20% | 待统计 | 分析 API |

### 5.2 技术指标

| 指标 | 目标值 | 当前状态 | 监控方式 |
|------|--------|----------|----------|
| API 可用性 | > 99.9% | 待监控 | 系统监控 |
| 平均响应时间 | < 500ms | 待监控 | 系统监控 |
| 错误率 | < 1% | 待监控 | 分析 API |
| AI 平台成功率 | > 95% | 待监控 | 分析 API |
| 数据库查询时间 | < 100ms | 待监控 | 慢查询日志 |

---

## 第六部分：风险管理

### 6.1 技术风险

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| AI API 服务不稳定 | 中 | 高 | 多平台冗余、熔断机制 |
| 数据库性能瓶颈 | 低 | 高 | 索引优化、读写分离 |
| 前端兼容性问题 | 中 | 中 | 多设备测试、降级方案 |
| 安全漏洞 | 低 | 高 | 定期安全审计、渗透测试 |

### 6.2 业务风险

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| 用户增长缓慢 | 中 | 中 | 市场推广、用户运营 |
| 竞品出现 | 中 | 中 | 持续创新、差异化竞争 |
| 政策法规变化 | 低 | 高 | 合规审查、灵活调整 |

---

## 第七部分：资源需求

### 7.1 人力资源

| 角色 | 数量 | 技能要求 | 工作阶段 |
|------|------|----------|----------|
| 后端开发 | 1-2 | Python/Flask/SQLite | 全阶段 |
| 前端开发 | 1 | 微信小程序/JavaScript | 阶段二、三 |
| 运维工程师 | 0.5 | Linux/Nginx/Docker | 阶段一 |
| 测试工程师 | 0.5 | 自动化测试 | 全阶段 |
| 产品经理 | 0.5 | 需求分析/原型设计 | 全阶段 |

### 7.2 基础设施

| 资源 | 规格 | 预估成本 | 备注 |
|------|------|----------|------|
| 云服务器 | 4 核 8G | ¥500/月 | 阿里云/腾讯云 |
| 数据库 | 高可用版 | ¥300/月 | RDS |
| 对象存储 | 100GB | ¥50/月 | OSS |
| CDN | 按量付费 | ¥100/月 | 加速静态资源 |
| 域名 | - | ¥60/年 | 备案 |
| SSL 证书 | 免费版 | ¥0 | Let's Encrypt |
| SMS 服务 | 按量付费 | ¥200/月 | 阿里云 SMS |

**月度总成本**: 约 ¥1150/月

---

## 第八部分：里程碑计划

### 里程碑 1: 生产就绪 (Week 2 结束)
- [x] 用户注册流程完成
- [x] Token 刷新机制完成
- [x] 用户资料管理完成
- [ ] 生产环境部署完成
- [ ] SMS 验证码服务接入

### 里程碑 2: 功能完善 (Week 5 结束)
- [ ] Kimi、Claude 平台接入
- [ ] 数据可视化图表完成
- [ ] 批量操作功能完成
- [ ] 审计日志系统完成

### 里程碑 3: 优化增强 (Week 8 结束)
- [ ] 告警系统完成
- [ ] Web 管理后台完成
- [ ] 高级分析功能完成

### 里程碑 4: 智能升级 (Week 12 结束)
- [ ] 预测分析完成
- [ ] 智能推荐完成
- [ ] 自动报告生成完成

---

## 附录

### A. 文件结构概览

```
/PythonProject/
├── pages/                      # 小程序页面
│   ├── index/                  # 主诊断页
│   ├── login/                  # 登录页
│   ├── register/               # 注册页
│   ├── user-profile/           # 用户资料
│   ├── results/                # 结果页
│   ├── history/                # 历史页
│   ├── history-detail/         # 历史详情
│   ├── report/                 # 报告页
│   └── admin/                  # 管理后台
│       ├── dashboard/          # 管理员仪表盘
│       ├── users/              # 用户管理
│       ├── analytics/          # 使用分析
│       └── ...
├── api/                        # API 封装
│   ├── home.js
│   ├── auth.js
│   ├── sync.js
│   ├── export.js
│   └── user.js
├── services/                   # 业务服务
│   ├── reportAggregator.js
│   ├── syncService.js
│   └── ...
├── backend_python/
│   └── wechat_backend/
│       ├── views.py            # 主视图
│       ├── views_admin.py      # 管理后台
│       ├── views_analytics.py  # 使用分析
│       ├── views_pdf_export.py # PDF 导出
│       ├── ai_adapters/        # AI 适配器
│       ├── security/           # 安全层
│       ├── services/           # 后端服务
│       └── models.py           # 数据模型
└── docs/                       # 文档
```

### B. API 端点总览

**认证相关**:
- `POST /api/login` - 微信登录
- `POST /api/login/phone` - 手机号登录
- `POST /api/register` - 用户注册
- `POST /api/refresh-token` - 刷新 Token
- `POST /api/validate-token` - 验证 Token

**诊断相关**:
- `POST /api/perform-brand-test` - 品牌诊断
- `GET /api/test-progress` - 测试进度
- `GET /api/test-history` - 测试历史

**用户相关**:
- `GET /api/user/profile` - 获取用户资料
- `PUT /api/user/profile` - 更新用户资料

**数据同步**:
- `POST /api/sync-data` - 同步数据
- `POST /api/download-data` - 下载数据
- `POST /api/upload-result` - 上传结果
- `POST /api/delete-result` - 删除结果

**报告相关**:
- `GET /api/export/pdf` - 导出 PDF
- `GET /api/geo-analysis/{id}` - GEO 分析
- `GET /api/source-intelligence/{id}` - 信源情报

**管理后台**:
- `GET /admin/dashboard` - 管理员仪表盘
- `GET /admin/users` - 用户列表
- `POST /admin/users/<id>/roles` - 分配角色
- `GET /admin/system/status` - 系统状态
- `GET /admin/system/logs` - 系统日志

**使用分析**:
- `GET /analytics/dashboard` - 分析仪表盘
- `GET /analytics/users/active` - 活跃用户
- `GET /analytics/features/usage` - 功能使用
- `GET /analytics/ai-platforms/stats` - AI 平台统计
- `GET /analytics/errors/stats` - 错误率监控

### C. 参考文档

- [2026-02-21_系统架构盘点与路线图.md](./2026-02-21_系统架构盘点与路线图.md) - v1.0 版本
- [2026-02-21_P0-1 用户注册流程实施报告.md](./2026-02-21_P0-1 用户注册流程实施报告.md)
- [2026-02-21_P0-2_Token 刷新机制实施报告.md](./2026-02-21_P0-2_Token 刷新机制实施报告.md)
- [2026-02-21_P0-3 用户资料管理实施报告.md](./2026-02-21_P0-3 用户资料管理实施报告.md)
- [2026-02-21_P1-1 数据同步功能实施报告.md](./2026-02-21_P1-1 数据同步功能实施报告.md)
- [2026-02-21_P1-3 报告导出功能实施报告.md](./2026-02-21_P1-3 报告导出功能实施报告.md)
- [2026-02-21_P1-4 报告详情页完善实施报告.md](./2026-02-21_P1-4 报告详情页完善实施报告.md)
- [2026-02-21_P2-1 管理后台实施报告.md](./2026-02-21_P2-1 管理后台实施报告.md)
- [2026-02-21_P2-2 使用分析实施报告.md](./2026-02-21_P2-2 使用分析实施报告.md)

---

**文档结束**

**最后更新**: 2026-02-21  
**下次审查**: 2026-03-01  
**负责人**: 技术团队
