# 战略战局中心 (detail 页) 必要性分析报告

**报告编号**: DETAIL-PAGE-ANALYSIS-2026-0222-001  
**分析日期**: 2026-02-22  
**分析工程师**: AI Assistant (产品专家 + 系统架构师)  
**分析级别**: 🔴 P0 - 产品架构分析

---

## 📋 问题描述

用户反馈：在最终报告和进度条页面之间，存在一个显示"战略战局中心"的页面，截图中显示"Unknown Question"。

**问题**：这个页面是否有必要存在？

---

## 🔍 页面功能分析

### 当前功能

| 功能模块 | 描述 | 用户价值 |
|----------|------|----------|
| **进度显示** | 显示诊断进度条和百分比 | ✅ 高 - 用户知道诊断进展 |
| **时间预估** | 显示预计耗时 | ✅ 中 - 管理用户预期 |
| **取消诊断** | 允许用户取消当前诊断 | ✅ 中 - 提供控制权 |
| **订阅通知** | 订阅完成通知 | ✅ 中 - 可后台等待 |
| **实时统计** | 显示 SOV、情感、品牌排名 | ✅ 高 - 增加透明度 |
| **Insight Pulse** | 商业洞察提示 | ✅ 低 - 等待时消遣 |

### 页面跳转链路

```
首页 (index)
  ↓
启动诊断
  ↓
【战略战局中心】(detail) ← 当前分析的页面
  ↓ (诊断完成)
报告页 (dashboard/results)
```

---

## ✅ 保留理由

### 1. 产品价值

| 价值维度 | 说明 |
|----------|------|
| **进度透明** | 用户知道诊断正在进行，不是卡死 |
| **预期管理** | 显示预计时间，减少焦虑 |
| **用户控制** | 提供取消功能，增加掌控感 |
| **实时反馈** | 显示 SOV、情感等实时数据 |

### 2. 技术必要性

| 技术原因 | 说明 |
|----------|------|
| **轮询进度** | 需要页面保持活跃以轮询后端进度 |
| **SSE 连接** | 保持 SSE 连接接收实时更新 |
| **状态管理** | 管理诊断任务的状态 |

### 3. 用户体验

| 体验维度 | 保留前 | 保留后 |
|----------|--------|--------|
| 进度感知 | ❌ 无 | ✅ 清晰 |
| 等待焦虑 | ❌ 高 | ✅ 降低 |
| 控制感 | ❌ 无 | ✅ 可取消 |
| 透明度 | ❌ 低 | ✅ 高 |

---

## ❌ 删除理由（分析后不成立）

### 1. "页面冗余"论

**观点**: 与等待页 (waiting.js) 功能重叠

**反驳**:
- waiting.js 已删除（之前已修复）
- detail 页是唯一的进度显示页面
- 无其他页面替代此功能

### 2. "增加跳转"论

**观点**: 增加了一次页面跳转

**反驳**:
- 跳转是必要的（从首页到报告页）
- 需要中间页显示进度
- 直接跳转会丢失进度反馈

### 3. "显示错误"论

**观点**: 显示"Unknown Question"，功能不完整

**反驳**:
- 这是 bug，不是设计问题
- 已修复（使用 `this.customQuestion` 兜底）
- 不应因 bug 删除整个页面

---

## 🔧 发现的问题与修复

### 问题 1: "Unknown Question"显示

**根因**: 数据标准化时，当 `result.question` 不存在时使用硬编码默认值

**修复**:
```javascript
// 修复前
question: subResult.question || result.question || 'Unknown Question'

// 修复后
question: subResult.question || result.question || this.customQuestion || '品牌诊断问题'
```

**文件**: `pages/detail/index.js` (第 1037、1047 行)

### 问题 2: 问题文本未从首页传递

**根因**: 首页传递了问题，但 detail 页未正确使用

**修复**: 在 `onLoad` 中正确解析和使用 `options.question`

---

## 📊 修复前后对比

| 指标 | 修复前 | 修复后 |
|------|--------|--------|
| 问题显示 | Unknown Question | 真实问题文本 |
| 用户困惑 | 高 | 低 |
| 页面价值 | 受质疑 | 清晰 |

---

## 🎯 最终建议

### 建议：**保留并优化**

**理由**:
1. **功能必要**: 显示诊断进度，无其他页面替代
2. **用户价值**: 提供进度透明、预期管理、用户控制
3. **技术必要**: 轮询进度、保持 SSE 连接
4. **问题已修复**: "Unknown Question"已修复

### 优化建议

1. **增强进度显示**:
   - 显示当前处理的 AI 平台
   - 显示已完成的问题数

2. **优化等待体验**:
   - 增加更多 Insight Pulse 内容
   - 提供"后台运行"选项

3. **性能优化**:
   - 减少轮询频率
   - 优化 SSE 重连逻辑

---

## ✅ 修复验证清单

修复后需验证：
- [ ] 问题文本正确显示（非"Unknown Question"）
- [ ] 进度条正常更新
- [ ] 实时统计数据显示
- [ ] 取消功能正常
- [ ] 订阅功能正常
- [ ] 诊断完成后自动跳转报告页

---

**报告生成时间**: 2026-02-22 09:00:00  
**分析结论**: ✅ 保留并优化  
**修复状态**: ✅ 已完成

---

*战略战局中心页面必要性分析报告，结论为保留并修复显示问题*
