# å“ç‰Œ GEO æˆ˜ç•¥ç ”åˆ¤ç³»ç»Ÿ v2.0ï¼šå•†ä¸šé—­ç¯ä¸ç¤¾äº¤è£‚å˜å®æ–½æ–¹æ¡ˆ

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-21  
**è§„åˆ’å‘¨æœŸ**: 2026-02-21 ~ 2026-03-31  
**æ–‡æ¡£ç±»å‹**: å•†ä¸šé—­ç¯ä¸äº§å“å®æ–½è·¯çº¿å›¾  
**æ ¸å¿ƒç›®æ ‡**: æ‰“é€ ä»è¯Šæ–­â†’ç»“æœâ†’è¡ŒåŠ¨â†’è£‚å˜çš„å®Œæ•´å•†ä¸šé—­ç¯ï¼ŒæœåŠ¡é‚€è¯·åˆ¶ä»˜è´¹ç”¨æˆ·  
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®¡æ‰¹  

---

## æ‰§è¡Œæ‘˜è¦

### ç³»ç»Ÿå½“å‰çŠ¶æ€ï¼ˆæˆªè‡³ 2026-02-21ï¼‰

**å·²å®Œæˆæ ¸å¿ƒåŠŸèƒ½** (çº¦ 90%):

| æ¨¡å— | å®Œæˆåº¦ | çŠ¶æ€ | å¤‡æ³¨ |
|------|--------|------|------|
| å“ç‰Œè¯Šæ–­æ‰§è¡Œ | 95% | âœ… | NxM çŸ©é˜µå¼•æ“å®Œæ•´ |
| å¤š AI å¹³å°é›†æˆ | 90% | âœ… | 8 ä¸ªå¹³å°é€‚é…å™¨ |
| è¿›åº¦è¿½è¸ªä¸è½®è¯¢ | 100% | âœ… | å®Œæ•´æ”¯æŒ |
| åŸºç¡€æŠ¥å‘Šå±•ç¤º | 95% | âœ… | å¤šç»´åº¦å±•ç¤º |
| æˆ˜ç•¥ä»ªè¡¨ç›˜ | 85% | âœ… | éº¦è‚¯é”¡çº§çœ‹æ¿ |
| ç”¨æˆ·è®¤è¯ä½“ç³» | 95% | âœ… | JWT + åˆ·æ–°æœºåˆ¶ |
| æƒé™ç®¡ç† | 90% | âœ… | RBAC å®Œæ•´ |
| æ•°æ®åŒæ­¥ | 90% | âœ… | å¢é‡åŒæ­¥ |
| æŠ¥å‘Šå¯¼å‡º | 85% | âœ… | PDF å¯¼å‡º |
| ç®¡ç†åå° | 90% | âœ… | åŸºç¡€åŠŸèƒ½å®Œæ•´ |
| ä½¿ç”¨åˆ†æ | 85% | âœ… | DAU/MAU ç»Ÿè®¡ |
| æ‰¹é‡æ“ä½œ | 90% | âœ… | æ‰¹é‡æƒé™/å¯¼å‡º/é€šçŸ¥ |
| å®¡è®¡æ—¥å¿— | 90% | âœ… | å®Œæ•´å®¡è®¡è¿½è¸ª |
| æ•°æ®å¯è§†åŒ– | 85% | âœ… | å›¾è¡¨ç»„ä»¶å®Œæ•´ |

**v2.0 æ–°å¢åŠŸèƒ½** (å¾…å®æ–½):
- å¾®ä¿¡ UnionID å”¯ä¸€è´¦æˆ·ä½“ç³»
- ç¤¾äº¤è£‚å˜é‚€è¯·æœºåˆ¶
- ä¸‰çº§ä¼šå‘˜å®šä»·ä½“ç³»
- æ”¯ä»˜æˆæƒæ¨¡å—
- è¡ŒåŠ¨å»ºè®®æ™ºèƒ½ç”Ÿæˆ

### æ ¸å¿ƒå˜æ›´æ‘˜è¦

| å˜æ›´é¡¹ | å˜æ›´ç±»å‹ | å½±å“èŒƒå›´ | ä¼˜å…ˆçº§ |
|--------|----------|----------|--------|
| ç§»é™¤ SMS éªŒè¯ç  | æ¶æ„è°ƒæ•´ | ç™»å½•æ³¨å†Œæµç¨‹ | P0 |
| æ–°å¢ UnionID ç™»å½• | åŠŸèƒ½æ–°å¢ | ç”¨æˆ·è®¤è¯ä½“ç³» | P0 |
| æ–°å¢é‚€è¯·è£‚å˜ç³»ç»Ÿ | åŠŸèƒ½æ–°å¢ | ç”¨æˆ·å¢é•¿ | P1 |
| æ–°å¢ä¸‰çº§ä¼šå‘˜ä½“ç³» | åŠŸèƒ½æ–°å¢ | å•†ä¸šåŒ– | P1 |
| æ–°å¢æ”¯ä»˜æˆæƒæ¨¡å— | åŠŸèƒ½æ–°å¢ | ä¼šå‘˜æƒç›Š | P1 |
| æ–°å¢è¡ŒåŠ¨å»ºè®®ç”Ÿæˆ | åŠŸèƒ½æ–°å¢ | ä»·å€¼é—­ç¯ | P1 |
| æƒ…æŠ¥æµæ°´çº¿äº¤äº’ | ä½“éªŒä¼˜åŒ– | ç­‰å¾…é¡µé¢ | P1 |

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼š10 ä¸‡æ½œåœ¨å®¢æˆ·ç¾¤æ¨æ¼”ä¸è¯„ä¼°åˆ†æ

### 1.1 å››ç±»å…¸å‹è§’è‰²ç”»åƒ

| è§’è‰² | å æ¯” | æ ¸å¿ƒéœ€æ±‚ | ä»˜è´¹æ„æ„¿ | å…³é”®å†³ç­–ç‚¹ | è·å®¢æ¸ é“ |
|------|------|----------|----------|------------|----------|
| **å“ç‰Œä¸»/CMO** | 25% | å“ç‰Œå£°é‡ç›‘æ§ã€ç«å“å¯¹æ¯” | é«˜ (Â¥5800/å¹´) | æŠ¥å‘Šä¸“ä¸šåº¦ã€è¡ŒåŠ¨å»ºè®®å¯æ‰§è¡Œæ€§ | çº¿ä¸‹æ²™é¾™ã€è¡Œä¸šå³°ä¼š |
| **è¥é”€ä»£ç†å•†** | 35% | å®¢æˆ·ææ¡ˆç´ æã€æ•ˆæœè¯æ˜ | ä¸­é«˜ (Â¥599/æœˆ) | æŠ¥å‘Šå¯å¯¼å‡ºã€å¤šè´¦å·ç®¡ç† | è¡Œä¸šç¤¾ç¾¤ã€å£ç¢‘æ¨è |
| **åˆ›ä¸šè€…/ä¸­å°ä¼ä¸šä¸»** | 30% | ä½æˆæœ¬å“ç‰Œè¯Šæ–­ã€å¿«é€Ÿä¼˜åŒ– | ä¸­ (Â¥599/æœˆ) | ä»·æ ¼æ•æ„Ÿã€å…è´¹é¢åº¦ | ç¤¾äº¤åª’ä½“ã€æœç´¢å¹¿å‘Š |
| **å¸‚åœºç ”ç©¶å‘˜/å­¦ç”Ÿ** | 10% | å­¦ä¹ å·¥å…·ã€æ•°æ®å‚è€ƒ | ä½ (å…è´¹) | å…è´¹ä½¿ç”¨ã€åŠŸèƒ½å®Œæ•´ | æ ¡å›­æ¨å¹¿ã€å†…å®¹è¥é”€ |

### 1.2 10 ä¸‡çº§å¸‚åœºåé¦ˆæ¨æ¼”

| é˜¶æ®µ | ç”¨æˆ·è§„æ¨¡ | æ ¸å¿ƒå…³æ³¨ç‚¹ | é£é™©ç‚¹ | åº”å¯¹ç­–ç•¥ | å…³é”®æŒ‡æ ‡ |
|------|----------|------------|--------|----------|----------|
| **ç§å­æœŸ** (0-100) | çº¿ä¸‹ä»˜è´¹è€å®¢æˆ· | æŠ¥å‘Šè´¨é‡ã€æœåŠ¡å“åº” | æœŸæœ›è¿‡é«˜ | äººå·¥ä»‹å…¥ã€å¿«é€Ÿè¿­ä»£ | è¯Šæ–­å®Œæˆç‡ > 95% |
| **æˆé•¿æœŸ** (100-1000) | é‚€è¯·åˆ¶ç”¨æˆ· | ç¨³å®šæ€§ã€ä¸“ä¸šæ€§ | ç³»ç»Ÿå´©æºƒ | P0 Bug æ¸…é›¶ã€SLA ä¿éšœ | ä»˜è´¹è½¬åŒ–ç‡ > 15% |
| **æ‰©å¼ æœŸ** (1000-10000) | ç¤¾äº¤è£‚å˜ç”¨æˆ· | æ˜“ç”¨æ€§ã€åˆ†äº«æ¿€åŠ± | æ»¥ç”¨å…è´¹é¢åº¦ | é‚€è¯·ç é™åˆ¶ã€é£æ§ | é‚€è¯·è£‚å˜ç³»æ•° > 1.5 |
| **è§„æ¨¡æœŸ** (10000-100000) | å…¬å¼€å¸‚åœºç”¨æˆ· | ä»·æ ¼ã€åŠŸèƒ½å¯¹æ¯” | ç«å“æ¨¡ä»¿ | å·®å¼‚åŒ–ã€å“ç‰Œå£å’ | æœˆç•™å­˜ç‡ > 40% |

### 1.3 å…³é”®æˆåŠŸæŒ‡æ ‡ (KPI)

| æŒ‡æ ‡ | ç§å­æœŸç›®æ ‡ | æˆé•¿æœŸç›®æ ‡ | æ‰©å¼ æœŸç›®æ ‡ | è§„æ¨¡æœŸç›®æ ‡ |
|------|------------|------------|------------|------------|
| è¯Šæ–­å®Œæˆç‡ | > 95% | > 98% | > 99% | > 99% |
| ä»˜è´¹è½¬åŒ–ç‡ | > 30% (çº¿ä¸‹) | > 15% (é‚€è¯·) | > 8% (è£‚å˜) | > 5% (å…¬å¼€) |
| é‚€è¯·è£‚å˜ç³»æ•° | - | > 1.5 | > 2.0 | > 2.5 |
| æœˆç•™å­˜ç‡ | > 60% | > 50% | > 45% | > 40% |
| NPS å¾—åˆ† | > 60 | > 55 | > 50 | > 45 |
| å®¢å•ä»· (ARPU) | Â¥2000 | Â¥800 | Â¥600 | Â¥500 |
| LTV/CAC | > 5 | > 4 | > 3 | > 3 |

### 1.4 æ”¶å…¥é¢„æµ‹æ¨¡å‹

| é˜¶æ®µ | ä»˜è´¹ç”¨æˆ·æ•° | å¹³å‡å®¢å•ä»· | æœˆæ”¶å…¥ | å¹´æ”¶å…¥ |
|------|------------|------------|--------|--------|
| ç§å­æœŸ (100 ç”¨æˆ·) | 30 | Â¥2000 | Â¥60,000 | Â¥720,000 |
| æˆé•¿æœŸ (1000 ç”¨æˆ·) | 150 | Â¥800 | Â¥120,000 | Â¥1,440,000 |
| æ‰©å¼ æœŸ (10000 ç”¨æˆ·) | 800 | Â¥600 | Â¥480,000 | Â¥5,760,000 |
| è§„æ¨¡æœŸ (100000 ç”¨æˆ·) | 5000 | Â¥500 | Â¥2,500,000 | Â¥30,000,000 |

**å‡è®¾æ¡ä»¶**:
- ä¸“ä¸šç‰ˆå æ¯” 70%ï¼Œæ——èˆ°ç‰ˆå æ¯” 30%
- ä¸“ä¸šç‰ˆç»­è´¹ç‡ 60%ï¼Œæ——èˆ°ç‰ˆç»­è´¹ç‡ 80%
- è·å®¢æˆæœ¬ (CAC) éšè§„æ¨¡é€’å‡

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šGEO æˆ˜ç•¥ç ”åˆ¤ç³»ç»Ÿ v2.0 å®Œæ•´æ–¹æ¡ˆ

### 2.1 èº«ä»½éªŒè¯ä¸è£‚å˜ä½“ç³»ï¼ˆå» SMS åŒ–ï¼‰

#### 2.1.1 å…¨å¾®ä¿¡ ID éªŒè¯

**ç§»é™¤å†…å®¹**:
- âŒ æ‰‹æœºå·æ³¨å†Œæµç¨‹
- âŒ çŸ­ä¿¡éªŒè¯ç å‘é€/æ ¡éªŒ
- âŒ å¯†ç ç™»å½•/é‡ç½®
- âŒ `/api/send-verification-code` ç«¯ç‚¹
- âŒ `/api/register` ç«¯ç‚¹

**å®ç°æ–¹æ¡ˆ**:

**å‰ç«¯ç™»å½•æµç¨‹**:
```javascript
// pages/login/login.js
Page({
  data: {
    loggingIn: false
  },

  onWechatLogin() {
    this.setData({ loggingIn: true });
    
    wx.login({
      success: (res) => {
        if (res.code) {
          // è°ƒç”¨åç«¯ç™»å½•æ¥å£
          wx.request({
            url: `${getApp().globalData.serverUrl}/api/login`,
            method: 'POST',
            data: { code: res.code },
            success: (res) => {
              if (res.data.status === 'success') {
                // è·å– UnionID ä½œä¸ºå”¯ä¸€æ ‡è¯†
                const unionId = res.data.union_id;
                const token = res.data.token;
                const isNewUser = res.data.is_new_user;
                
                // å­˜å‚¨ç”¨æˆ·èº«ä»½
                wx.setStorageSync('union_id', unionId);
                wx.setStorageSync('token', token);
                wx.setStorageSync('isLoggedIn', true);
                
                // æ–°ç”¨æˆ·ä½“éªŒå¼•å¯¼
                if (isNewUser) {
                  wx.navigateTo({
                    url: '/pages/onboarding/onboarding'
                  });
                } else {
                  wx.reLaunch({
                    url: '/pages/index/index'
                  });
                }
              }
            },
            fail: (err) => {
              this.setData({ loggingIn: false });
              wx.showToast({
                title: 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•',
                icon: 'none'
              });
            }
          });
        }
      },
      fail: () => {
        this.setData({ loggingIn: false });
        wx.showToast({
          title: 'å¾®ä¿¡ç™»å½•å¤±è´¥',
          icon: 'none'
        });
      }
    });
  }
});
```

**åç«¯ç™»å½•æ¥å£**:
```python
@wechat_bp.route('/api/login', methods=['POST'])
def wechat_login():
    """å¾®ä¿¡ç™»å½• - è¿”å› UnionID + JWT Token"""
    api_logger.info("WeChat login endpoint accessed")
    
    data = request.get_json()
    code = data.get('code')
    
    if not code:
        return jsonify({'error': 'Code is required'}), 400
    
    try:
        # è°ƒç”¨å¾®ä¿¡æ¥å£è·å– UnionID
        session_data = get_wechat_session(code)
        union_id = session_data.get('unionid')
        openid = session_data.get('openid')
        
        if not union_id:
            api_logger.warning(f"UnionID not found for code: {code}")
            # é™çº§ä½¿ç”¨ openid
            union_id = openid
        
        # æŸ¥è¯¢æˆ–åˆ›å»ºç”¨æˆ·
        user = get_or_create_user(union_id, openid)
        is_new_user = user.is_new
        
        # ç”Ÿæˆ JWT Token
        token = jwt_manager.generate_token(
            user_id=union_id,
            expires_delta=timedelta(hours=24),
            token_type='access',
            additional_claims={
                'membership_plan': user.membership_plan,
                'diagnostic_limit': user.diagnostic_limit
            }
        )
        
        # ç”Ÿæˆåˆ·æ–° Token
        refresh_token = jwt_manager.generate_token(
            user_id=union_id,
            expires_delta=timedelta(days=7),
            token_type='refresh'
        )
        
        # ä¿å­˜åˆ·æ–° Token
        save_refresh_token(union_id, refresh_token)
        
        api_logger.info(f"WeChat login successful: {union_id}, new_user: {is_new_user}")
        
        return jsonify({
            'status': 'success',
            'union_id': union_id,
            'openid': openid,
            'token': token,
            'refresh_token': refresh_token,
            'expires_in': 86400,
            'is_new_user': is_new_user,
            'membership_plan': user.membership_plan
        })
        
    except Exception as e:
        api_logger.error(f"WeChat login error: {e}")
        return jsonify({'error': 'Login failed'}), 500


def get_wechat_session(code):
    """è°ƒç”¨å¾®ä¿¡æ¥å£è·å– session"""
    from config import Config
    
    params = {
        'appid': Config.WECHAT_APP_ID,
        'secret': Config.WECHAT_APP_SECRET,
        'js_code': code,
        'grant_type': 'authorization_code'
    }
    
    response = requests.get(Config.WECHAT_CODE_TO_SESSION_URL, params=params)
    data = response.json()
    
    if 'errcode' in data:
        raise Exception(f"WeChat API error: {data['errmsg']}")
    
    return data


def get_or_create_user(union_id, openid):
    """æŸ¥è¯¢æˆ–åˆ›å»ºç”¨æˆ·"""
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    
    # æŸ¥è¯¢ç°æœ‰ç”¨æˆ·
    cursor.execute('''
        SELECT id, union_id, membership_plan, diagnostic_limit
        FROM users
        WHERE union_id = ? OR openid = ?
    ''', (union_id, openid))
    
    row = cursor.fetchone()
    
    if row:
        # ç°æœ‰ç”¨æˆ·ï¼Œæ›´æ–°ä¿¡æ¯
        cursor.execute('''
            UPDATE users
            SET union_id = ?, openid = ?, updated_at = CURRENT_TIMESTAMP
            WHERE id = ?
        ''', (union_id, openid, row[0]))
        conn.commit()
        
        user = type('User', (), {
            'id': row[0],
            'union_id': row[1],
            'membership_plan': row[2] or 'free',
            'diagnostic_limit': row[3] or 2,
            'is_new': False
        })()
    else:
        # æ–°ç”¨æˆ·ï¼Œåˆ›å»ºè®°å½•
        cursor.execute('''
            INSERT INTO users (union_id, openid, membership_plan, diagnostic_limit, created_at)
            VALUES (?, ?, 'free', 2, CURRENT_TIMESTAMP)
        ''', (union_id, openid))
        conn.commit()
        
        user = type('User', (), {
            'id': cursor.lastrowid,
            'union_id': union_id,
            'membership_plan': 'free',
            'diagnostic_limit': 2,
            'is_new': True
        })()
    
    conn.close()
    return user
```

**ä¼˜åŠ¿**:
- âœ… ç”¨æˆ·æ‘©æ“¦åŠ›æœ€å°åŒ–ï¼ˆä¸€é”®ç™»å½•ï¼‰
- âœ… æ— éœ€ SMS æˆæœ¬ï¼ˆèŠ‚çœ Â¥200/æœˆï¼‰
- âœ… æ— éœ€ä¼ä¸šå®åè®¤è¯
- âœ… UnionID è·¨å°ç¨‹åºå”¯ä¸€æ ‡è¯†
- âœ… ç¬¦åˆå¾®ä¿¡ç”Ÿæ€æœ€ä½³å®è·µ

---

#### 2.1.2 ç¤¾äº¤è£‚å˜å¼•æ“

**é‚€è¯·æœºåˆ¶è®¾è®¡**:

| è¡Œä¸º | å¥–åŠ± | è¯´æ˜ | é£æ§é™åˆ¶ |
|------|------|------|----------|
| é‚€è¯· 1 äººæˆæƒç™»å½• | +2 æ¬¡æ·±åº¦ç ”åˆ¤ | è¢«é‚€è¯·äººå®Œæˆé¦–æ¬¡è¯Šæ–­ | åŒä¸€è®¾å¤‡é™ 1 æ¬¡ |
| é‚€è¯· 1 äººä»˜è´¹ä¸“ä¸šç‰ˆ | +10 æ¬¡æ·±åº¦ç ”åˆ¤ | è¢«é‚€è¯·äººå®Œæˆæ”¯ä»˜ | éœ€ä»˜è´¹åå‘æ”¾ |
| é‚€è¯· 1 äººä»˜è´¹æ——èˆ°ç‰ˆ | +30 æ¬¡æ·±åº¦ç ”åˆ¤ | è¢«é‚€è¯·äººå®Œæˆæ”¯ä»˜ | éœ€ä»˜è´¹åå‘æ”¾ |
| æœˆåº¦é‚€è¯·æ¦œ Top 10 | å…è´¹ä¸“ä¸šç‰ˆ 1 ä¸ªæœˆ | æœˆåº¦é‚€è¯·æ•°å‰ 10 å | æ¬¡æœˆ 1 æ—¥å‘æ”¾ |
| è¿ç»­é‚€è¯· 3 äººä»˜è´¹ | é¢å¤– +20 æ¬¡ | è¿ç»­é‚€è¯·å¥–åŠ± | å åŠ è®¡ç®— |

**é‚€è¯·ç ç”Ÿæˆé€»è¾‘**:
```python
@admin_bp.route('/api/invite/generate', methods=['POST'])
@require_auth
def generate_invite_code():
    """ç”Ÿæˆé‚€è¯·ç """
    union_id = get_current_user_id()
    
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    
    # æ£€æŸ¥æ˜¯å¦å·²æœ‰æœ‰æ•ˆé‚€è¯·ç 
    cursor.execute('''
        SELECT code FROM invite_codes
        WHERE created_by = ? AND is_active = 1
        AND (expires_at IS NULL OR expires_at > ?)
        AND used_count < max_uses
    ''', (union_id, datetime.now().isoformat()))
    
    row = cursor.fetchone()
    
    if row:
        # è¿”å›ç°æœ‰é‚€è¯·ç 
        code = row[0]
    else:
        # ç”Ÿæˆæ–°é‚€è¯·ç 
        import random
        import string
        
        # ç”Ÿæˆ 6 ä½éšæœºç ï¼ˆå­—æ¯ + æ•°å­—ï¼‰
        code = ''.join(random.choices(
            string.ascii_uppercase + string.digits,
            k=6
        ))
        
        # ç¡®ä¿å”¯ä¸€æ€§
        while True:
            cursor.execute('SELECT id FROM invite_codes WHERE code = ?', (code,))
            if not cursor.fetchone():
                break
            code = ''.join(random.choices(
                string.ascii_uppercase + string.digits,
                k=6
            ))
        
        # ä¿å­˜é‚€è¯·ç 
        cursor.execute('''
            INSERT INTO invite_codes (
                code, created_by, max_uses, expires_at
            ) VALUES (?, ?, 100, ?)
        ''', (code, union_id, (datetime.now() + timedelta(days=365)).isoformat()))
        
        conn.commit()
    
    conn.close()
    
    return jsonify({
        'status': 'success',
        'invite_code': code,
        'qr_code_url': f'https://yourdomain.com/invite/{code}'
    })
```

**è£‚å˜æµ·æŠ¥ç”Ÿæˆ**:
```javascript
// pages/results/results.js
const app = getApp();

Page({
  data: {
    showSharePoster: false,
    posterImage: ''
  },

  // ç”Ÿæˆåˆ†äº«æµ·æŠ¥
  async generateSharePoster() {
    const { brandName, healthScore, overallRank } = this.data;
    const unionId = wx.getStorageSync('union_id');
    
    try {
      wx.showLoading({ title: 'ç”Ÿæˆæµ·æŠ¥ä¸­...' });
      
      // è·å–é‚€è¯·ç 
      const inviteRes = await wx.request({
        url: `${app.globalData.serverUrl}/api/invite/generate`,
        method: 'POST',
        header: {
          'Authorization': `Bearer ${wx.getStorageSync('token')}`
        }
      });
      
      const inviteCode = inviteRes.data.invite_code;
      
      // ç”Ÿæˆæµ·æŠ¥æ•°æ®
      const posterData = {
        width: 750,
        height: 1334,
        backgroundColor: '#1a1a2e',
        elements: [
          {
            type: 'text',
            content: 'ğŸ¯ å“ç‰Œ GEO æˆ˜ç•¥ç ”åˆ¤æŠ¥å‘Š',
            fontSize: 48,
            color: '#ffffff',
            x: 60,
            y: 100
          },
          {
            type: 'text',
            content: `å“ç‰Œï¼š${brandName}`,
            fontSize: 36,
            color: '#a0a0a0',
            x: 60,
            y: 180
          },
          {
            type: 'text',
            content: `å¥åº·åº¦å¾—åˆ†ï¼š${healthScore} åˆ†`,
            fontSize: 36,
            color: this.getScoreColor(healthScore),
            x: 60,
            y: 240
          },
          {
            type: 'text',
            content: `ç»¼åˆæ’åï¼šç¬¬ ${overallRank} å`,
            fontSize: 36,
            color: '#a0a0a0',
            x: 60,
            y: 300
          },
          {
            type: 'canvas',
            canvasId: 'radarChart',
            x: 60,
            y: 380,
            width: 630,
            height: 400
          },
          {
            type: 'text',
            content: 'æ‰«ç è·å–ä½ çš„å“ç‰Œè¯Šæ–­æŠ¥å‘Š',
            fontSize: 32,
            color: '#ffffff',
            x: 60,
            y: 850
          },
          {
            type: 'qrcode',
            content: `https://yourdomain.com/invite/${inviteCode}`,
            x: 60,
            y: 900,
            size: 200
          },
          {
            type: 'text',
            content: 'å“ç‰Œ AI è¯Šæ–­ç³»ç»Ÿ Â· ä¸“ä¸šç‰ˆ',
            fontSize: 28,
            color: '#666666',
            x: 60,
            y: 1150
          }
        ]
      };
      
      // ä½¿ç”¨ wx-canvas ç”Ÿæˆæµ·æŠ¥
      const posterImage = await this.createPoster(posterData);
      
      this.setData({
        showSharePoster: true,
        posterImage: posterImage
      });
      
      wx.hideLoading();
      
    } catch (error) {
      wx.hideLoading();
      console.error('ç”Ÿæˆæµ·æŠ¥å¤±è´¥', error);
      wx.showToast({
        title: 'ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•',
        icon: 'none'
      });
    }
  },

  // ä¿å­˜æµ·æŠ¥åˆ°ç›¸å†Œ
  savePosterToAlbum() {
    wx.saveImageToPhotosAlbum({
      filePath: this.data.posterImage,
      success: () => {
        wx.showToast({
          title: 'å·²ä¿å­˜åˆ°ç›¸å†Œ',
          icon: 'success'
        });
      },
      fail: () => {
        wx.showToast({
          title: 'ä¿å­˜å¤±è´¥',
          icon: 'none'
        });
      }
    });
  }
});
```

**æµ·æŠ¥è§†è§‰è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   ğŸ¯ å“ç‰Œ GEO æˆ˜ç•¥ç ”åˆ¤æŠ¥å‘Š                â”‚
â”‚                                         â”‚
â”‚   å“ç‰Œï¼šåä¸º                             â”‚
â”‚                                         â”‚
â”‚   å¥åº·åº¦å¾—åˆ†ï¼š85 åˆ† (ä¼˜ç§€)                â”‚
â”‚                                         â”‚
â”‚   ç»¼åˆæ’åï¼šç¬¬ 3 å                      â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                         â”‚          â”‚
â”‚   â”‚    [é›·è¾¾å›¾/è¶‹åŠ¿å›¾]       â”‚          â”‚
â”‚   â”‚                         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”‚   æ‰«ç è·å–ä½ çš„å“ç‰Œè¯Šæ–­æŠ¥å‘Š               â”‚
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚   [äºŒç»´ç ]   â”‚                      â”‚
â”‚   â”‚  é‚€è¯·ç ï¼šA1B2C3 â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                         â”‚
â”‚   å“ç‰Œ AI è¯Šæ–­ç³»ç»Ÿ Â· ä¸“ä¸šç‰ˆ               â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é‚€è¯·å¥–åŠ±å‘æ”¾é€»è¾‘**:
```python
@wechat_bp.route('/api/invite/redeem', methods=['POST'])
@require_auth
def redeem_invite_code():
    """å…‘æ¢é‚€è¯·ç """
    data = request.get_json()
    invite_code = data.get('invite_code')
    inviter_union_id = get_current_user_id()
    
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    
    # éªŒè¯é‚€è¯·ç 
    cursor.execute('''
        SELECT id, created_by, max_uses, used_count
        FROM invite_codes
        WHERE code = ? AND is_active = 1
        AND (expires_at IS NULL OR expires_at > ?)
        AND used_count < max_uses
    ''', (invite_code, datetime.now().isoformat()))
    
    row = cursor.fetchone()
    
    if not row:
        conn.close()
        return jsonify({'error': 'Invalid or expired invite code'}), 400
    
    invite_id, created_by, max_uses, used_count = row
    
    # æ£€æŸ¥æ˜¯å¦å·²é‚€è¯·è¿‡è¯¥ç”¨æˆ·
    cursor.execute('''
        SELECT id FROM invite_relations
        WHERE inviter_union_id = ? AND invitee_union_id = ?
    ''', (created_by, inviter_union_id))
    
    if cursor.fetchone():
        conn.close()
        return jsonify({'error': 'Already redeemed this invite'}), 400
    
    # æ›´æ–°é‚€è¯·ç ä½¿ç”¨æ¬¡æ•°
    cursor.execute('''
        UPDATE invite_codes
        SET used_count = used_count + 1, used_at = ?
        WHERE id = ?
    ''', (datetime.now().isoformat(), invite_id))
    
    # åˆ›å»ºé‚€è¯·å…³ç³»
    cursor.execute('''
        INSERT INTO invite_relations (
            inviter_union_id, invitee_union_id, invited_at
        ) VALUES (?, ?, ?)
    ''', (created_by, inviter_union_id, datetime.now().isoformat()))
    
    # å‘æ”¾å¥–åŠ±ï¼ˆ+2 æ¬¡è¯Šæ–­ï¼‰
    cursor.execute('''
        UPDATE users
        SET diagnostic_limit = diagnostic_limit + 2
        WHERE union_id = ?
    ''', (created_by,))
    
    conn.commit()
    conn.close()
    
    # é€šçŸ¥é‚€è¯·äºº
    send_invite_reward_notification(created_by, 2)
    
    return jsonify({
        'status': 'success',
        'message': 'Invite code redeemed successfully',
        'reward': '+2 diagnostic credits'
    })
```

---

### 2.2 å›½é™…é¡¶çº§å®šä»·ä¸ä¼šå‘˜ä½“ç³»è®¾è®¡

#### 2.2.1 ä¼šå‘˜ç­‰çº§ä½“ç³»

| ç­‰çº§ | ä»·æ ¼ | è¯Šæ–­æ¬¡æ•° | AI æ¨¡å‹ | æ ¸å¿ƒåŠŸèƒ½ | ç›®æ ‡ç”¨æˆ· | ç»­è´¹ç‡ç›®æ ‡ |
|------|------|----------|--------|----------|----------|------------|
| **æ ‡å‡†ç‰ˆ** (ä½“éªŒ) | 0 å…ƒ | 2 æ¬¡/æœˆ | 2 ä¸ªå›½å†…æ¨¡å‹ | åŸºç¡€æŠ¥å‘Šã€PDF å¯¼å‡º | å­¦ç”Ÿ/ç ”ç©¶å‘˜ | N/A |
| **ä¸“ä¸šç‰ˆ** (è¥é”€äºº) | Â¥599/æœˆ | 30 æ¬¡/æœˆ | 8+ å…¨çŸ©é˜µ | è¡ŒåŠ¨å»ºè®®ã€å†å²å¯¹æ¯”ã€æ•°æ®å¯¼å‡º | è¥é”€ä»£ç†å•† | 60% |
| **æ——èˆ°ç‰ˆ** (ä¼ä¸šçº§) | Â¥5,800/å¹´ | æ— é™æ¬¡ | 8+ é¡¶çº§æ¨¡å‹ | ç®¡ç†åå°ã€ä½¿ç”¨åˆ†æã€API æ¥å…¥ | å“ç‰Œä¸»/CMO | 80% |

**åŠŸèƒ½å¯¹æ¯”è¡¨**:

| åŠŸèƒ½ | æ ‡å‡†ç‰ˆ | ä¸“ä¸šç‰ˆ | æ——èˆ°ç‰ˆ |
|------|--------|--------|--------|
| æœˆåº¦è¯Šæ–­æ¬¡æ•° | 2 æ¬¡ | 30 æ¬¡ | æ— é™æ¬¡ |
| AI æ¨¡å‹æ•°é‡ | 2 ä¸ª (DeepSeek, è±†åŒ…) | 8+ ä¸ª (å…¨çŸ©é˜µ) | 8+ é¡¶çº§ (å« R1, Claude) |
| è¡ŒåŠ¨å»ºè®®å¡ç‰‡ | âŒ | âœ… | âœ… |
| PDF æŠ¥å‘Šå¯¼å‡º | âŒ | âœ… | âœ… |
| å†å²æŠ¥å‘Šå¯¹æ¯” | âŒ | âœ… | âœ… |
| ç®¡ç†åå°è®¿é—® | âŒ | âŒ | âœ… |
| ä½¿ç”¨åˆ†ææŠ¥è¡¨ | âŒ | âŒ | âœ… |
| API æ¥å…¥ | âŒ | âŒ | âœ… |
| ä¸“å±å®¢æœ | âŒ | âŒ | âœ… |
| é‚€è¯·è£‚å˜å¥–åŠ± | 1 å€ | 2 å€ | 3 å€ |
| æ•°æ®ä¿ç•™æœŸ | 30 å¤© | 1 å¹´ | æ°¸ä¹… |
| æŠ¥å‘Šå®šåˆ¶ | âŒ | âŒ | âœ… |
| SLA ä¿éšœ | âŒ | âŒ | 99.9% |

**ä¼šå‘˜æƒç›Šè¯´æ˜**:

**æ ‡å‡†ç‰ˆ (å…è´¹)**:
- é€‚åˆï¼šå­¦ç”Ÿã€ç ”ç©¶å‘˜ã€åˆæ¬¡ä½“éªŒç”¨æˆ·
- æ ¸å¿ƒä»·å€¼ï¼šä½æˆæœ¬ä½“éªŒæ ¸å¿ƒåŠŸèƒ½
- é™åˆ¶ï¼šä»… 2 ä¸ªåŸºç¡€ AI æ¨¡å‹ï¼Œæœˆåº¦ 2 æ¬¡è¯Šæ–­
- å‡çº§è·¯å¾„ï¼šå®Œæˆé¦–æ¬¡è¯Šæ–­åæ¨é€ä¸“ä¸šç‰ˆä¼˜æƒ 

**ä¸“ä¸šç‰ˆ (Â¥599/æœˆ)**:
- é€‚åˆï¼šè¥é”€ä»£ç†å•†ã€è‡ªç”±èŒä¸šè€…ã€ä¸­å°ä¼ä¸šä¸»
- æ ¸å¿ƒä»·å€¼ï¼šå®Œæ•´åŠŸèƒ½ + è¡ŒåŠ¨å»ºè®®
- äº®ç‚¹ï¼š30 æ¬¡/æœˆè¯Šæ–­ï¼Œæ»¡è¶³æ—¥å¸¸éœ€æ±‚
- ç»­è´¹æ¿€åŠ±ï¼šè¿ç»­è®¢é˜… 3 ä¸ªæœˆé€ 1 ä¸ªæœˆ

**æ——èˆ°ç‰ˆ (Â¥5,800/å¹´)**:
- é€‚åˆï¼šå“ç‰Œä¸»ã€CMOã€å¤§å‹ä¼ä¸š
- æ ¸å¿ƒä»·å€¼ï¼šæ— é™æ¬¡ + ç®¡ç†åå° + ä¸“å±æœåŠ¡
- äº®ç‚¹ï¼šé¡¶çº§ AI æ¨¡å‹ã€API æ¥å…¥ã€å®šåˆ¶æŠ¥å‘Š
- ç»­è´¹æ¿€åŠ±ï¼šæå‰ç»­è´¹é€ 2 ä¸ªæœˆ

---

#### 2.2.2 æ”¯ä»˜æ¨¡å—è®¾è®¡

**æ”¯ä»˜æµç¨‹**:

```javascript
// pages/membership/membership.js
const app = getApp();

Page({
  data: {
    plans: [
      {
        id: 'pro_monthly',
        name: 'ä¸“ä¸šç‰ˆ',
        price: 59900, // åˆ†
        priceDisplay: 'Â¥599',
        period: '/æœˆ',
        features: [
          '30 æ¬¡è¯Šæ–­/æœˆ',
          '8+ AI å…¨çŸ©é˜µ',
          'è¡ŒåŠ¨å»ºè®®å¡ç‰‡',
          'PDF æŠ¥å‘Šå¯¼å‡º',
          'å†å²æŠ¥å‘Šå¯¹æ¯”'
        ],
        popular: true
      },
      {
        id: 'enterprise_yearly',
        name: 'æ——èˆ°ç‰ˆ',
        price: 580000, // åˆ†
        priceDisplay: 'Â¥5,800',
        period: '/å¹´',
        features: [
          'æ— é™æ¬¡è¯Šæ–­',
          '8+ é¡¶çº§ AI æ¨¡å‹',
          'ç®¡ç†åå°',
          'ä½¿ç”¨åˆ†ææŠ¥è¡¨',
          'API æ¥å…¥',
          'ä¸“å±å®¢æœ',
          'æŠ¥å‘Šå®šåˆ¶'
        ],
        popular: false
      }
    ],
    selectedPlan: null,
    paying: false
  },

  // é€‰æ‹©å¥—é¤
  selectPlan(e) {
    const planId = e.currentTarget.dataset.plan;
    this.setData({ selectedPlan: planId });
  },

  // å‘èµ·æ”¯ä»˜
  async payForMembership() {
    if (!this.data.selectedPlan) {
      wx.showToast({
        title: 'è¯·é€‰æ‹©å¥—é¤',
        icon: 'none'
      });
      return;
    }

    this.setData({ paying: true });

    try {
      const token = wx.getStorageSync('token');
      const unionId = wx.getStorageSync('union_id');

      // 1. åˆ›å»ºè®¢å•
      const orderRes = await wx.request({
        url: `${app.globalData.serverUrl}/api/membership/create-order`,
        method: 'POST',
        header: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        data: {
          union_id: unionId,
          plan: this.data.selectedPlan
        }
      });

      if (orderRes.data.status !== 'success') {
        throw new Error(orderRes.data.error || 'åˆ›å»ºè®¢å•å¤±è´¥');
      }

      const orderData = orderRes.data;

      // 2. è°ƒç”¨å¾®ä¿¡æ”¯ä»˜
      await this.requestWechatPayment(orderData);

      // 3. æ”¯ä»˜æˆåŠŸï¼Œåˆ·æ–°æƒé™
      await this.refreshUserPermissions();

      wx.showToast({
        title: 'å¼€é€šæˆåŠŸ',
        icon: 'success'
      });

      // è·³è½¬åˆ°ä¼šå‘˜è¯¦æƒ…é¡µ
      setTimeout(() => {
        wx.navigateTo({
          url: '/pages/membership-detail/membership-detail'
        });
      }, 1500);

    } catch (error) {
      console.error('æ”¯ä»˜å¤±è´¥', error);
      wx.showToast({
        title: error.message || 'æ”¯ä»˜å¤±è´¥',
        icon: 'none'
      });
    } finally {
      this.setData({ paying: false });
    }
  },

  // è°ƒç”¨å¾®ä¿¡æ”¯ä»˜
  requestWechatPayment(orderData) {
    return new Promise((resolve, reject) => {
      wx.requestPayment({
        timeStamp: orderData.time_stamp,
        nonceStr: orderData.nonce_str,
        package: orderData.package,
        signType: orderData.sign_type || 'MD5',
        paySign: orderData.pay_sign,
        success: (res) => {
          resolve(res);
        },
        fail: (err) => {
          reject(new Error('æ”¯ä»˜å–æ¶ˆæˆ–å¤±è´¥'));
        }
      });
    });
  },

  // åˆ·æ–°ç”¨æˆ·æƒé™
  async refreshUserPermissions() {
    const token = wx.getStorageSync('token');

    const res = await wx.request({
      url: `${app.globalData.serverUrl}/api/refresh-token`,
      method: 'POST',
      header: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json'
      },
      data: {
        refresh_token: token
      }
    });

    if (res.data.status === 'success') {
      wx.setStorageSync('token', res.data.token);
      wx.setStorageSync('membership', res.data.membership);
    }
  }
});
```

**åç«¯æ”¯ä»˜æˆæƒ**:

```python
@wechat_bp.route('/api/membership/create-order', methods=['POST'])
@require_auth
def create_membership_order():
    """åˆ›å»ºä¼šå‘˜è®¢å•"""
    union_id = get_current_user_id()
    data = request.get_json()
    plan = data.get('plan')
    
    # å¥—é¤ä»·æ ¼é…ç½®ï¼ˆå•ä½ï¼šåˆ†ï¼‰
    plans = {
        'pro_monthly': 59900,      # 599 å…ƒ
        'enterprise_yearly': 580000  # 5800 å…ƒ
    }
    
    if plan not in plans:
        return jsonify({'error': 'Invalid plan'}), 400
    
    try:
        from config import Config
        import uuid
        
        # åˆ›å»ºè®¢å•å·
        order_id = f"MEM{datetime.now().strftime('%Y%m%d%H%M%S')}{uuid.uuid4().hex[:8].upper()}"
        
        # ä¿å­˜è®¢å•åˆ°æ•°æ®åº“
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()
        
        cursor.execute('''
            INSERT INTO membership_orders (
                order_id, union_id, plan, amount, status, created_at
            ) VALUES (?, ?, ?, ?, 'pending', CURRENT_TIMESTAMP)
        ''', (order_id, union_id, plan, plans[plan]))
        
        conn.commit()
        conn.close()
        
        # è°ƒç”¨å¾®ä¿¡æ”¯ä»˜ç»Ÿä¸€ä¸‹å•
        from wechat_backend.services.wechat_pay import WechatPay
        
        wechat_pay = WechatPay(
            app_id=Config.WECHAT_APP_ID,
            mch_id=Config.WECHAT_MCH_ID,
            api_key=Config.WECHAT_PAY_API_KEY
        )
        
        pay_params = wechat_pay.unified_order(
            order_id=order_id,
            amount=plans[plan],
            openid=get_user_openid(union_id),
            body=f"å“ç‰Œ GEO è¯Šæ–­ç³»ç»Ÿ - {plan}",
            notify_url=f"{Config.BASE_URL}/api/membership/callback"
        )
        
        api_logger.info(f"Membership order created: {order_id}, plan: {plan}, amount: {plans[plan]}")
        
        return jsonify({
            'status': 'success',
            'order_id': order_id,
            **pay_params
        })
        
    except Exception as e:
        api_logger.error(f"Error creating membership order: {e}")
        return jsonify({'error': 'Failed to create order'}), 500


@wechat_bp.route('/api/membership/callback', methods=['POST'])
def membership_payment_callback():
    """å¾®ä¿¡æ”¯ä»˜å›è°ƒ - æ¿€æ´»ä¼šå‘˜æƒç›Š"""
    api_logger.info("Membership payment callback received")
    
    try:
        from config import Config
        from wechat_backend.services.wechat_pay import WechatPay
        
        wechat_pay = WechatPay(
            app_id=Config.WECHAT_APP_ID,
            mch_id=Config.WECHAT_MCH_ID,
            api_key=Config.WECHAT_PAY_API_KEY
        )
        
        # éªŒè¯æ”¯ä»˜ç­¾å
        data = wechat_pay.parse_callback_data(request.data)
        
        if not wechat_pay.verify_signature(data):
            api_logger.warning("Invalid payment signature")
            return jsonify({'error': 'Invalid signature'}), 400
        
        # æ›´æ–°è®¢å•çŠ¶æ€
        order_id = data['out_trade_no']
        update_order_status(order_id, 'paid')
        
        # è·å–è®¢å•ä¿¡æ¯
        order = get_order(order_id)
        
        if not order:
            api_logger.error(f"Order not found: {order_id}")
            return jsonify({'error': 'Order not found'}), 404
        
        # æ¿€æ´»ä¼šå‘˜æƒç›Š
        activate_membership(order.union_id, order.plan)
        
        # åˆ·æ–°ç”¨æˆ· Tokenï¼ˆæ·»åŠ ä¼šå‘˜æƒç›Š claimsï¼‰
        refresh_token_with_membership(order.union_id, order.plan)
        
        # å‘é€æ”¯ä»˜æˆåŠŸé€šçŸ¥
        send_payment_success_notification(order.union_id, order.plan)
        
        api_logger.info(f"Membership activated: {order.union_id}, plan: {order.plan}")
        
        return jsonify({'status': 'success'})
        
    except Exception as e:
        api_logger.error(f"Error in payment callback: {e}")
        return jsonify({'error': 'Callback failed'}), 500


def activate_membership(union_id, plan):
    """æ¿€æ´»ä¼šå‘˜æƒç›Š"""
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    
    # è®¡ç®—è¿‡æœŸæ—¶é—´
    if plan == 'pro_monthly':
        expires_at = datetime.now() + timedelta(days=30)
        diagnostic_limit = 30
    elif plan == 'enterprise_yearly':
        expires_at = datetime.now() + timedelta(days=365)
        diagnostic_limit = 999999  # æ— é™æ¬¡
    else:
        expires_at = datetime.now() + timedelta(days=30)
        diagnostic_limit = 2
    
    # æŸ¥è¯¢ç°æœ‰ä¼šå‘˜
    cursor.execute('''
        SELECT id FROM user_memberships
        WHERE union_id = ?
    ''', (union_id,))
    
    row = cursor.fetchone()
    
    if row:
        # æ›´æ–°ç°æœ‰ä¼šå‘˜
        cursor.execute('''
            UPDATE user_memberships
            SET plan = ?, expires_at = ?, diagnostic_limit = ?,
                is_active = 1, started_at = CURRENT_TIMESTAMP
            WHERE union_id = ?
        ''', (plan, expires_at.isoformat(), diagnostic_limit, union_id))
    else:
        # åˆ›å»ºæ–°ä¼šå‘˜è®°å½•
        cursor.execute('''
            INSERT INTO user_memberships (
                union_id, plan, started_at, expires_at, diagnostic_limit, is_active
            ) VALUES (?, ?, CURRENT_TIMESTAMP, ?, ?, 1)
        ''', (union_id, plan, expires_at.isoformat(), diagnostic_limit))
    
    # æ›´æ–°ç”¨æˆ·è¡¨
    cursor.execute('''
        UPDATE users
        SET membership_plan = ?, diagnostic_limit = ?
        WHERE union_id = ?
    ''', (plan, diagnostic_limit, union_id))
    
    conn.commit()
    conn.close()


def refresh_token_with_membership(union_id, plan):
    """åˆ·æ–° Token å¹¶æ·»åŠ ä¼šå‘˜æƒç›Š"""
    from wechat_backend.security.auth import jwt_manager
    
    # ç”Ÿæˆæ–° Tokenï¼ˆåŒ…å«ä¼šå‘˜æƒç›Š claimsï¼‰
    token = jwt_manager.generate_token(
        user_id=union_id,
        expires_delta=timedelta(hours=24),
        token_type='access',
        additional_claims={
            'membership_plan': plan,
            'diagnostic_limit': get_diagnostic_limit(plan)
        }
    )
    
    return token


def get_diagnostic_limit(plan):
    """è·å–å¥—é¤è¯Šæ–­æ¬¡æ•°é™åˆ¶"""
    limits = {
        'free': 2,
        'pro_monthly': 30,
        'enterprise_yearly': 999999
    }
    return limits.get(plan, 2)
```

---

### 2.3 æ ¸å¿ƒåŠŸèƒ½æ”¹è¿›ä¸ Bug ä¿®å¤ä¼˜å…ˆçº§

#### P0ï¼šæ¶ˆé™¤"æ­»é”"ä¸æŠ¥é”™ï¼ˆå³åˆ»æ‰§è¡Œï¼‰

| Bug ID | é—®é¢˜æè¿° | å½±å“èŒƒå›´ | ä¿®å¤æ–¹æ¡ˆ | é¢„è®¡å·¥æ—¶ | çŠ¶æ€ | éªŒæ”¶æ ‡å‡† |
|--------|----------|----------|----------|----------|------|----------|
| BUG-001 | index.js onLoad estimate null å¼•ç”¨ | é¦–é¡µå´©æºƒ | è®¾ç½®é»˜è®¤å€¼ `{duration: '120s', steps: 5}` | 0.5 å¤© | âœ… å·²ä¿®å¤ | é¦–é¡µåŠ è½½æˆåŠŸç‡ > 99% |
| BUG-002 | debug_log_ai_io å‡½æ•°ç­¾åå†²çª | AI é€‚é…å™¨è°ƒç”¨å¤±è´¥ | ä¿®æ­£ä¸ºæ¥æ”¶ 4 ä¸ªå‚æ•° | 0.5 å¤© | ğŸ”´ å¾…éªŒè¯ | æ‰€æœ‰ AI é€‚é…å™¨å¯æ­£å¸¸è°ƒç”¨ |
| BUG-003 | nxm_execution_engine å¯¼å…¥è·¯å¾„é”™è¯¯ | åå°é™é»˜å´©æºƒ | ä¿®æ­£ä¸ºç»å¯¹è·¯å¾„å¼•ç”¨ | 0.5 å¤© | ğŸ”´ å¾…éªŒè¯ | åå°æ— é™é»˜å´©æºƒ |
| BUG-004 | è¿›åº¦æ¡å¡åœ¨ 0% æˆ– 15% | ç”¨æˆ·æ„ŸçŸ¥å¡æ­» | å®ç°åŠ¨æ€é¢„ä¼° + è¿›åº¦ä¼ªè£… | 1 å¤© | ğŸŸ¡ éƒ¨åˆ†ä¿®å¤ | è¿›åº¦æ¡ä» 0 å¼€å§‹æ­£å¸¸æ­¥è¿› |
| BUG-005 | ç¼“å­˜è‰ç¨¿å¹²æ‰°æ–°è¯Šæ–­ | è¾“å…¥è¢«ä¸Šæ¬¡å†…å®¹å¹²æ‰° | å¢åŠ æ¸…ç©ºæ‰€æœ‰è¾“å…¥åŠŸèƒ½ | 0.5 å¤© | âœ… å·²ä¿®å¤ | æ¸…ç©ºè¾“å…¥åæ— è‰ç¨¿æ®‹ç•™ |

**P0 ä¿®å¤è¯¦ç»†æ–¹æ¡ˆ**:

**BUG-001: index.js onLoad é˜²å¾¡æ€§ç¼–ç¨‹** (âœ… å·²å®Œæˆ)
```javascript
// pages/index/index.js
onLoad: function (options) {
  try {
    console.log('å“ç‰Œ AI é›·è¾¾ - é¡µé¢åŠ è½½å®Œæˆ');
    
    // 1. åˆå§‹åŒ–é»˜è®¤å€¼
    this.initializeDefaults();
    
    // 2. æ£€æŸ¥æœåŠ¡å™¨è¿æ¥
    this.checkServerConnection();

    // 3. åŠ è½½ç”¨æˆ· AI å¹³å°åå¥½
    this.loadUserPlatformPreferences();
    this.updateSelectedModelCount();
    this.updateSelectedQuestionCount();

    // 4. é˜²å¾¡æ€§è¯»å– config.estimateï¼ˆå®‰å…¨å¯¼èˆªæ¨¡å¼ï¼‰
    const estimate = this.data.config?.estimate || { duration: '30s', steps: 5 };
    console.log('è¯Šæ–­é¢„ä¼°é…ç½®:', estimate);

    // 5. å°è¯•æ¢å¤ç¼“å­˜ï¼ˆå®Œæ•´æ€§æ ¡éªŒï¼‰
    this.restoreDraft();

    // 6. æ£€æŸ¥æ˜¯å¦éœ€è¦ç«‹å³å¯åŠ¨å¿«é€Ÿæœç´¢
    if (options && options.quickSearch === 'true') {
      setTimeout(() => {
        this.startBrandTest();
      }, 1000);
    }
  } catch (error) {
    // éš”ç¦»æŠ¥é”™ç¯å¢ƒï¼šè®°å½•æ—¥å¿—å¹¶ç»´æŒé»˜è®¤çŠ¶æ€
    console.error('onLoad åˆå§‹åŒ–å¤±è´¥:', error);
    console.error('é”™è¯¯å †æ ˆ:', error.stack);
    
    // ç»´æŒé»˜è®¤çŠ¶æ€ï¼Œç¡®ä¿é¡µé¢å¯ç”¨
    this.setData({
      serverStatus: 'åˆå§‹åŒ–å¤±è´¥',
      config: {
        estimate: { duration: '30s', steps: 5 },
        brandName: '',
        competitorBrands: [],
        customQuestions: [{text: '', show: true}, {text: '', show: true}, {text: '', show: true}]
      }
    });
    
    // ä¸å½±å“ç”¨æˆ·å…¶ä»–æ“ä½œ
    wx.showToast({
      title: 'åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•',
      icon: 'none',
      duration: 2000
    });
  }
},

/**
 * åˆå§‹åŒ–é»˜è®¤å€¼ï¼ˆç‹¬ç«‹æ–¹æ³•ï¼‰
 */
initializeDefaults: function() {
  // ç¡®ä¿ config å’Œ diagnosticConfig å§‹ç»ˆæœ‰é»˜è®¤å€¼
  if (!this.data.config || !this.data.config.estimate) {
    this.setData({
      config: {
        estimate: { duration: '30s', steps: 5 },
        brandName: '',
        competitorBrands: [],
        customQuestions: [{text: '', show: true}, {text: '', show: true}, {text: '', show: true}]
      }
    });
  }
  
  if (!this.data.diagnosticConfig || !this.data.diagnosticConfig.estimate) {
    this.setData({
      diagnosticConfig: {
        estimate: { duration: '30s', steps: 5 }
      }
    });
  }
},
```

**BUG-002: debug_log_ai_io å‡½æ•°ç­¾åä¿®å¤** (ğŸ”´ å¾…éªŒè¯)
```python
# backend_python/wechat_backend/nxm_execution_engine.py

# ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰:
# def debug_log_ai_io(message):
#     """åªèƒ½æ¥æ”¶ 1 ä¸ªå‚æ•°"""
#     pass

# ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰:
def debug_log_ai_io(execution_id, stage, model_name, message):
    """æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼šæ‰§è¡Œ IDã€é˜¶æ®µã€æ¨¡å‹åã€æ¶ˆæ¯"""
    api_logger.info(f"[{execution_id}] [{stage}] [{model_name}] {message}")
```

**BUG-003: nxm_execution_engine å¯¼å…¥è·¯å¾„ä¿®å¤** (ğŸ”´ å¾…éªŒè¯)
```python
# backend_python/wechat_backend/nxm_execution_engine.py

# ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰:
# from ai_adapters.factory import AIAdapterFactory
# from logging_config import api_logger

# ä¿®å¤åï¼ˆæ­£ç¡® - ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰:
from wechat_backend.ai_adapters.factory import AIAdapterFactory
from wechat_backend.logging_config import api_logger
```

**BUG-004: è¿›åº¦æ¡åŠ¨æ€é¢„ä¼°ç®—æ³•** (ğŸŸ¡ éƒ¨åˆ†ä¿®å¤)
```javascript
// pages/index/index.js
calculateEstimatedDuration() {
  const questionCount = this.getValidQuestions().length;
  const modelCount = this.getSelectedModelCount();
  
  // åŸºäº Questions Ã— Models è®¡ç®—é¢„ä¼°æ—¶é—´
  // å‡è®¾æ¯ä¸ª QÃ—M ç»„åˆå¹³å‡è€—æ—¶ 15 ç§’
  const baseDuration = questionCount * modelCount * 15; // ç§’
  
  // æ·»åŠ ç¼“å†²æ—¶é—´ï¼ˆç½‘ç»œå»¶è¿Ÿã€API å“åº”æ³¢åŠ¨ï¼‰
  const bufferTime = 30; // ç§’
  
  const totalSeconds = baseDuration + bufferTime;
  
  // æ ¼å¼åŒ–ä¸º"X åˆ† Y ç§’"
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  
  return {
    duration: `${minutes}åˆ†${seconds}ç§’`,
    totalSeconds: totalSeconds
  };
},

// è¿›åº¦ä¼ªè£…ï¼ˆåŒ€é€Ÿæ­¥è¿›ï¼‰
startProgressSimulation() {
  let currentProgress = 0;
  const targetProgress = 15; // AI å“åº”å‰è¿›åº¦åˆ° 15%
  const duration = 5000; // 5 ç§’å†…å®Œæˆ
  const interval = 100;
  const step = (targetProgress / (duration / interval)) * 0.8; // 80% é€Ÿåº¦ï¼Œç•™ä½™é‡
  
  const timer = setInterval(() => {
    currentProgress += step;
    
    if (currentProgress >= targetProgress) {
      clearInterval(timer);
      this.setData({ testProgress: targetProgress });
    } else {
      this.setData({ testProgress: Math.floor(currentProgress) });
    }
  }, interval);
},
```

**P0 éªŒæ”¶æ ‡å‡†**:
- [ ] é¦–é¡µåŠ è½½æˆåŠŸç‡ > 99%
- [ ] æ‰€æœ‰ AI é€‚é…å™¨å¯æ­£å¸¸è°ƒç”¨
- [ ] åå°æ— é™é»˜å´©æºƒ
- [ ] è¿›åº¦æ¡ä» 0 å¼€å§‹æ­£å¸¸æ­¥è¿›
- [ ] æ¸…ç©ºè¾“å…¥åæ— è‰ç¨¿æ®‹ç•™
- [ ] è¯Šæ–­æµç¨‹å¯å®Œæ•´è·‘å®Œ

---

#### P1ï¼šæå‡ä¸“ä¸šæ„Ÿï¼ˆ3-5 å¤©å†…ï¼‰

| ä»»åŠ¡ ID | ä»»åŠ¡æè¿° | å½±å“èŒƒå›´ | å®ç°æ–¹æ¡ˆ | é¢„è®¡å·¥æ—¶ | çŠ¶æ€ | éªŒæ”¶æ ‡å‡† |
|---------|----------|----------|----------|----------|------|----------|
| TASK-101 | æƒ…æŠ¥æµæ°´çº¿ç»„ä»¶ | ç­‰å¾…é¡µé¢ä½“éªŒ | å®æ—¶æ»šåŠ¨ AI ç ”åˆ¤æ—¥å¿— | 2 å¤© | ğŸ”´ å¾…å®æ–½ | ç­‰å¾…é¡µé¢æœ‰å®æ—¶æ—¥å¿—æ»šåŠ¨ |
| TASK-102 | åŠ¨æ€é¢„ä¼°æ—¶é—´ç®—æ³• | è¿›åº¦æ¡å‡†ç¡®æ€§ | åŸºäº QuestionsÃ—Models è®¡ç®— | 0.5 å¤© | ğŸŸ¡ è¿›è¡Œä¸­ | é¢„ä¼°æ—¶é—´è¯¯å·® < 30% |
| TASK-103 | è¡ŒåŠ¨å»ºè®®å¡ç‰‡ç»„ä»¶ | ç»“æœé¡µä»·å€¼ | åŸºäº healthScore ç”Ÿæˆå»ºè®® | 2 å¤© | ğŸ”´ å¾…å®æ–½ | æ¯ä¸ªç»´åº¦å¾—åˆ†éƒ½æœ‰å¯¹åº”å»ºè®® |
| TASK-104 | æ·±è‰²æ¸å˜ä¸»é¢˜ | æ•´ä½“è§†è§‰ | é«˜æ–¯æ¨¡ç³ŠèƒŒæ™¯ + æµå…‰è¿›åº¦æ¡ | 1 å¤© | ğŸŸ¡ éƒ¨åˆ†å®Œæˆ | è§†è§‰é£æ ¼ç»Ÿä¸€ä¸ºæ·±è‰²ä¸»é¢˜ |
| TASK-105 | PDF ä¸­æ–‡å­—ä½“ä¿®å¤ | æŠ¥å‘Šå¯¼å‡º | æ³¨å†Œç³»ç»Ÿä¸­æ–‡å­—ä½“ | 0.5 å¤© | ğŸŸ¡ éƒ¨åˆ†ä¿®å¤ | PDF å¯¼å‡ºä¸­æ–‡æ­£å¸¸æ˜¾ç¤º |

**TASK-101: æƒ…æŠ¥æµæ°´çº¿ç»„ä»¶** (ğŸ”´ å¾…å®æ–½)

**å‰ç«¯å®ç°**:
```javascript
// pages/index/index.js
data: {
  // ... å…¶ä»–æ•°æ®
  intelligenceLogs: [],
  showIntelligenceView: false
},

// æ·»åŠ ç ”åˆ¤æ—¥å¿—
addIntelligenceLog(stage, model, message, type = 'info') {
  const logs = this.data.intelligenceLogs;
  const timestamp = new Date().toLocaleTimeString('zh-CN', { hour12: false });
  
  logs.push({
    id: Date.now(),
    timestamp,
    stage,
    model,
    message,
    type  // 'info' | 'success' | 'error'
  });
  
  // ä¿æŒæœ€è¿‘ 20 æ¡æ—¥å¿—
  if (logs.length > 20) {
    logs.shift();
  }
  
  this.setData({
    intelligenceLogs: logs,
    showIntelligenceView: true
  });
  
  // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
  setTimeout(() => {
    wx.createSelectorQuery()
      .select('#intelligence-logs')
      .boundingClientRect((rect) => {
        // æ»šåŠ¨é€»è¾‘
      })
      .exec();
  }, 100);
},

// åœ¨è¯Šæ–­è¿‡ç¨‹ä¸­è°ƒç”¨
startBrandTest() {
  // ... ç°æœ‰é€»è¾‘
  
  // æ·»åŠ åˆå§‹æ—¥å¿—
  this.addIntelligenceLog('init', 'system', 'æ­£åœ¨åˆå§‹åŒ–è¯Šæ–­å¼•æ“...', 'info');
  
  // è°ƒç”¨åç«¯
  this.callBackendBrandTest(brand_list, selectedModels, customQuestions);
},

// åç«¯è¿”å›æ—¶æ·»åŠ æ—¥å¿—
onBackendResponse(res) {
  const executionId = res.execution_id;
  this.addIntelligenceLog('start', 'system', `è¯Šæ–­ä»»åŠ¡å·²å¯åŠ¨ï¼Œæ‰§è¡Œ ID: ${executionId}`, 'success');
},

// è¿›åº¦è½®è¯¢æ—¶æ·»åŠ æ—¥å¿—
onProgressUpdate(progress) {
  if (progress.stage === 'ai_fetching' && !this.loggedStages.ai_fetching) {
    this.addIntelligenceLog('ai_fetching', 'system', 'AI æ¨¡å‹æ­£åœ¨å¹¶è¡Œè§£æå“ç‰Œæ•°æ®...', 'info');
    this.loggedStages.ai_fetching = true;
  }
  
  if (progress.stage === 'ranking_analysis' && !this.loggedStages.ranking_analysis) {
    this.addIntelligenceLog('ranking_analysis', 'system', 'æ­£åœ¨è¿›è¡Œæ’åä¸æƒ…æ„Ÿåˆ†æ...', 'info');
    this.loggedStages.ranking_analysis = true;
  }
}
```

**WXML æ¨¡æ¿**:
```xml
<!-- pages/index/index.wxml -->
<view class="intelligence-container" wx:if="{{showIntelligenceView}}">
  <view class="intelligence-header">
    <text class="intelligence-title">ğŸ” ç ”åˆ¤å®å†µ</text>
    <text class="intelligence-subtitle">å¤šæ¨¡å‹å¹¶è¡Œè®¡ç®—ä¸­...</text>
  </view>
  
  <scroll-view 
    class="intelligence-logs" 
    id="intelligence-logs"
    scroll-y
    scroll-into-view="{{scrollToView}}"
    scroll-with-animation
  >
    <view 
      class="log-item log-item-{{log.type}}"
      wx:for="{{intelligenceLogs}}"
      wx:key="id"
      id="log-{{log.id}}"
    >
      <text class="log-timestamp">[{{log.timestamp}}]</text>
      <text class="log-icon">{{log.type === 'success' ? 'âœ…' : log.type === 'error' ? 'âŒ' : 'ğŸ¤–'}}</text>
      <text class="log-message">{{log.message}}</text>
    </view>
  </scroll-view>
  
  <view class="intelligence-footer">
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{testProgress}}%"></view>
    </view>
    <text class="progress-text">{{testProgress}}%</text>
  </view>
</view>
```

**WXSS æ ·å¼**:
```css
/* pages/index/index.wxss */
.intelligence-container {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-radius: 20rpx;
  padding: 30rpx;
  margin: 30rpx;
  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.3);
}

.intelligence-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20rpx;
}

.intelligence-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #ffffff;
}

.intelligence-subtitle {
  font-size: 24rpx;
  color: #a0a0a0;
}

.intelligence-logs {
  height: 400rpx;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 12rpx;
  padding: 20rpx;
  margin-bottom: 20rpx;
}

.log-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 15rpx;
  font-size: 26rpx;
  line-height: 1.6;
}

.log-item-info {
  color: #e0e0e0;
}

.log-item-success {
  color: #4ade80;
}

.log-item-error {
  color: #f87171;
}

.log-timestamp {
  color: #666666;
  margin-right: 10rpx;
  font-family: monospace;
}

.log-icon {
  margin-right: 10rpx;
}

.log-message {
  flex: 1;
}

.intelligence-footer {
  display: flex;
  align-items: center;
  gap: 20rpx;
}

.progress-bar {
  flex: 1;
  height: 12rpx;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 6rpx;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  border-radius: 6rpx;
  transition: width 0.3s ease;
}

.progress-text {
  font-size: 28rpx;
  font-weight: bold;
  color: #ffffff;
  min-width: 80rpx;
  text-align: right;
}
```

**TASK-103: è¡ŒåŠ¨å»ºè®®å¡ç‰‡ç»„ä»¶** (ğŸ”´ å¾…å®æ–½)

**è§„åˆ™å¼•æ“è®¾è®¡**:
```python
# backend_python/wechat_backend/services/action_recommendations.py

class ActionRecommendationEngine:
    """è¡ŒåŠ¨å»ºè®®ç”Ÿæˆå¼•æ“"""
    
    def __init__(self):
        self.rules = self._load_recommendation_rules()
    
    def generate_recommendations(self, health_score, dimension_scores, platform_scores):
        """
        åŸºäºè¯Šæ–­ç»“æœç”Ÿæˆè¡ŒåŠ¨å»ºè®®
        
        Args:
            health_score: æ€»ä½“å¥åº·åº¦å¾—åˆ† (0-100)
            dimension_scores: ç»´åº¦å¾—åˆ† {authority, visibility, purity, consistency}
            platform_scores: å¹³å°å¾—åˆ† {zhihu, xiaohongshu, douyin, ...}
        
        Returns:
            list: è¡ŒåŠ¨å»ºè®®åˆ—è¡¨
        """
        recommendations = []
        
        # 1. åŸºäºæ€»ä½“å¾—åˆ†çš„é€šç”¨å»ºè®®
        if health_score < 60:
            recommendations.append({
                'id': 'general_low_score',
                'priority': 'high',
                'title': 'å“ç‰Œ GEO è¡¨ç°å¾…æå‡',
                'description': 'æ‚¨çš„å“ç‰Œåœ¨ç”Ÿæˆå¼æœç´¢å¼•æ“ä¸­çš„æ•´ä½“è¡¨ç°è¾ƒå¼±ï¼Œå»ºè®®ä¼˜å…ˆæå‡åŸºç¡€æ›å…‰ã€‚',
                'actions': [
                    'å¢åŠ å“ç‰Œç›¸å…³é«˜è´¨é‡å†…å®¹åˆ›ä½œï¼ˆæ¯å‘¨ 3-5 ç¯‡ï¼‰',
                    'ä¼˜åŒ–å“ç‰Œå®˜æ–¹è´¦å·è®¤è¯ä¸èµ„æ–™å®Œå–„',
                    'å»ºç«‹å“ç‰Œå…³é”®è¯ç›‘æ§ä½“ç³»'
                ],
                'expected_impact': 'å¥åº·åº¦ +15-20 åˆ†',
                'estimated_time': '2-4 å‘¨'
            })
        
        # 2. åŸºäºç»´åº¦å¾—åˆ†çš„ä¸“é¡¹å»ºè®®
        if dimension_scores.get('authority', 0) < 70:
            recommendations.append({
                'id': 'authority_boost',
                'priority': 'high',
                'title': 'æå‡å“ç‰Œæƒå¨æ€§',
                'description': 'å“ç‰Œåœ¨ AI å›å¤ä¸­çš„æƒå¨å¼•ç”¨ä¸è¶³ï¼Œéœ€åŠ å¼ºæƒå¨ä¿¡æºå»ºè®¾ã€‚',
                'actions': [
                    'åœ¨çŸ¥ä¹æ‰¾åˆ°å“ç‰Œç›¸å…³é«˜å…³æ³¨é—®é¢˜ï¼ˆ3-5 ä¸ªï¼‰',
                    'æ’°å†™ä¸“ä¸šå›ç­”ï¼ˆ500 å­—+ï¼Œæ·»åŠ æ•°æ®æ”¯æ’‘ï¼‰',
                    'æ·»åŠ æƒå¨å¼•ç”¨ï¼ˆè¡Œä¸šæŠ¥å‘Šã€å®˜æ–¹æ•°æ®ç­‰ 2-3 ä¸ªï¼‰',
                    'é‚€è¯·è¡Œä¸š KOL è½¬å‘æˆ–è¯„è®º'
                ],
                'expected_impact': 'æƒå¨åº¦ +10-15 åˆ†ï¼Œæ’å +3-5 å',
                'estimated_time': '1-2 å‘¨'
            })
        
        if dimension_scores.get('visibility', 0) < 70:
            recommendations.append({
                'id': 'visibility_boost',
                'priority': 'medium',
                'title': 'å¢åŠ å“ç‰Œæ›å…‰',
                'description': 'å“ç‰Œåœ¨ä¸»æµå¹³å°çš„æåŠé¢‘ç‡è¾ƒä½ï¼Œéœ€æå‡å†…å®¹è¦†ç›–å¯†åº¦ã€‚',
                'actions': [
                    'å°çº¢ä¹¦ï¼šå‘å¸ƒå“ç‰Œç›¸å…³ç¬”è®°ï¼ˆæ¯å‘¨ 2-3 ç¯‡ï¼‰',
                    'æŠ–éŸ³ï¼šåˆ¶ä½œå“ç‰Œç›¸å…³çŸ­è§†é¢‘ï¼ˆæ¯å‘¨ 1-2 æ¡ï¼‰',
                    'å¾®ä¿¡å…¬ä¼—å·ï¼šå‘å¸ƒå“ç‰Œæ·±åº¦æ–‡ç« ï¼ˆæ¯æœˆ 2-4 ç¯‡ï¼‰',
                    'ä¼˜åŒ–å“ç‰Œ SEO å…³é”®è¯å¸ƒå±€'
                ],
                'expected_impact': 'å¯è§åº¦ +15-20 åˆ†ï¼ŒæåŠé‡ +30%',
                'estimated_time': '2-4 å‘¨'
            })
        
        # 3. åŸºäºå¹³å°å¾—åˆ†çš„æ¸ é“å»ºè®®
        for platform, score in platform_scores.items():
            if score < 60:
                platform_name = self._get_platform_name(platform)
                recommendations.append({
                    'id': f'{platform}_improvement',
                    'priority': 'medium',
                    'title': f'{platform_name}æ¸ é“ä¼˜åŒ–',
                    'description': f'å“ç‰Œåœ¨{platform_name}çš„è¡¨ç°ä½äºå¹³å‡æ°´å¹³ï¼Œå»ºè®®é’ˆå¯¹æ€§ä¼˜åŒ–ã€‚',
                    'actions': self._get_platform_actions(platform),
                    'expected_impact': f'{platform_name}å¾—åˆ† +15-20 åˆ†',
                    'estimated_time': '1-3 å‘¨'
                })
        
        # 4. æ’åºï¼šé«˜ä¼˜å…ˆçº§åœ¨å‰
        recommendations.sort(key=lambda x: {'high': 0, 'medium': 1, 'low': 2}[x['priority']])
        
        return recommendations[:5]  # æœ€å¤šè¿”å› 5 æ¡å»ºè®®
    
    def _get_platform_name(self, platform):
        """è·å–å¹³å°ä¸­æ–‡å"""
        names = {
            'zhihu': 'çŸ¥ä¹',
            'xiaohongshu': 'å°çº¢ä¹¦',
            'douyin': 'æŠ–éŸ³',
            'wechat': 'å¾®ä¿¡',
            'weibo': 'å¾®åš'
        }
        return names.get(platform, platform)
    
    def _get_platform_actions(self, platform):
        """è·å–å¹³å°ä¸“å±è¡ŒåŠ¨å»ºè®®"""
        actions = {
            'zhihu': [
                'æ‰¾åˆ°å“ç‰Œç›¸å…³é«˜å…³æ³¨é—®é¢˜ï¼ˆ3 ä¸ªï¼‰',
                'æ’°å†™ä¸“ä¸šå›ç­”ï¼ˆ500 å­—+ï¼‰',
                'æ·»åŠ æƒå¨å¼•ç”¨ï¼ˆ2-3 ä¸ªï¼‰'
            ],
            'xiaohongshu': [
                'å‘å¸ƒå“ç‰Œä½¿ç”¨ä½“éªŒç¬”è®°ï¼ˆ2-3 ç¯‡ï¼‰',
                'æ·»åŠ çƒ­é—¨è¯é¢˜æ ‡ç­¾ï¼ˆ5-8 ä¸ªï¼‰',
                'ä¼˜åŒ–å°é¢å›¾ä¸æ ‡é¢˜å¸å¼•åŠ›'
            ],
            'douyin': [
                'åˆ¶ä½œå“ç‰Œç›¸å…³çŸ­è§†é¢‘ï¼ˆ1-2 æ¡ï¼‰',
                'ä½¿ç”¨çƒ­é—¨ BGM ä¸è¯é¢˜',
                'æŠ•æ”¾ DOU+ æå‡åˆå§‹æ›å…‰'
            ]
        }
        return actions.get(platform, ['ä¼˜åŒ–å¹³å°å†…å®¹ç­–ç•¥'])
    
    def _load_recommendation_rules(self):
        """åŠ è½½æ¨èè§„åˆ™ï¼ˆå¯ä»é…ç½®æ–‡ä»¶åŠ è½½ï¼‰"""
        return {
            'health_score_thresholds': {
                'low': 60,
                'medium': 75,
                'high': 90
            },
            'dimension_weights': {
                'authority': 0.3,
                'visibility': 0.3,
                'purity': 0.2,
                'consistency': 0.2
            }
        }


# API ç«¯ç‚¹
@wechat_bp.route('/api/recommendations/<execution_id>', methods=['GET'])
def get_recommendations(execution_id):
    """è·å–è¡ŒåŠ¨å»ºè®®"""
    # è·å–è¯Šæ–­ç»“æœ
    result = get_diagnostic_result(execution_id)
    
    if not result:
        return jsonify({'error': 'Result not found'}), 404
    
    # ç”Ÿæˆå»ºè®®
    engine = ActionRecommendationEngine()
    recommendations = engine.generate_recommendations(
        health_score=result['health_score'],
        dimension_scores=result['dimension_scores'],
        platform_scores=result['platform_scores']
    )
    
    return jsonify({
        'status': 'success',
        'recommendations': recommendations,
        'count': len(recommendations)
    })
```

**å‰ç«¯è¡ŒåŠ¨å»ºè®®å¡ç‰‡**:
```javascript
// pages/results/results.js
onLoad(options) {
  // ... ç°æœ‰é€»è¾‘
  
  // åŠ è½½è¡ŒåŠ¨å»ºè®®
  this.loadRecommendations(options.executionId);
},

async loadRecommendations(executionId) {
  try {
    const res = await wx.request({
      url: `${getApp().globalData.serverUrl}/api/recommendations/${executionId}`,
      header: {
        'Authorization': `Bearer ${wx.getStorageSync('token')}`
      }
    });
    
    if (res.data.status === 'success') {
      this.setData({
        recommendations: res.data.recommendations
      });
    }
  } catch (error) {
    console.error('åŠ è½½è¡ŒåŠ¨å»ºè®®å¤±è´¥', error);
  }
},

// æ ‡è®°å»ºè®®ä¸ºå·²å®Œæˆ
markRecommendationComplete(recommendationId) {
  const recommendations = this.data.recommendations;
  const index = recommendations.findIndex(r => r.id === recommendationId);
  
  if (index !== -1) {
    recommendations[index].completed = true;
    this.setData({ recommendations });
    
    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
    const completedRecommendations = wx.getStorageSync('completed_recommendations') || [];
    completedRecommendations.push({
      recommendationId,
      completedAt: new Date().isoformat()
    });
    wx.setStorageSync('completed_recommendations', completedRecommendations);
    
    wx.showToast({
      title: 'å·²æ ‡è®°ä¸ºå®Œæˆ',
      icon: 'success'
    });
  }
},

// åˆ†äº«è¡ŒåŠ¨å»ºè®®
shareRecommendation(recommendation) {
  wx.showShareMenu({
    withShareTicket: true,
    menus: ['shareAppMessage', 'shareTimeline']
  });
  
  // ç”Ÿæˆåˆ†äº«æµ·æŠ¥
  this.generateActionSharePoster(recommendation);
}
```

**WXML æ¨¡æ¿**:
```xml
<!-- pages/results/results.wxml -->
<view class="recommendations-section" wx:if="{{recommendations && recommendations.length > 0}}">
  <view class="section-header">
    <text class="section-title">ğŸ¯ GEO ä¼˜åŒ–è¡ŒåŠ¨</text>
    <text class="section-subtitle">åŸºäºæ‚¨çš„è¯Šæ–­ç»“æœç”Ÿæˆ</text>
  </view>
  
  <view class="recommendations-list">
    <view 
      class="recommendation-card recommendation-card-{{rec.priority}}"
      wx:for="{{recommendations}}"
      wx:key="id"
      wx:for-item="rec"
    >
      <view class="rec-header">
        <text class="rec-title">{{rec.title}}</text>
        <text class="rec-priority rec-priority-{{rec.priority}}">
          {{rec.priority === 'high' ? 'é«˜ä¼˜å…ˆçº§' : rec.priority === 'medium' ? 'ä¸­ä¼˜å…ˆçº§' : 'ä½ä¼˜å…ˆçº§'}}
        </text>
      </view>
      
      <view class="rec-description">
        <text>{{rec.description}}</text>
      </view>
      
      <view class="rec-actions">
        <text class="actions-title">è¡ŒåŠ¨æ­¥éª¤ï¼š</text>
        <view class="action-item" wx:for="{{rec.actions}}" wx:key="index" wx:for-item="action">
          <text class="action-number">{{index + 1}}.</text>
          <text class="action-text">{{action}}</text>
        </view>
      </view>
      
      <view class="rec-impact">
        <view class="impact-item">
          <text class="impact-label">é¢„è®¡æå‡ï¼š</text>
          <text class="impact-value">{{rec.expected_impact}}</text>
        </view>
        <view class="impact-item">
          <text class="impact-label">é¢„è®¡è€—æ—¶ï¼š</text>
          <text class="impact-value">{{rec.estimated_time}}</text>
        </view>
      </view>
      
      <view class="rec-footer">
        <button 
          class="complete-btn" 
          bindtap="markRecommendationComplete" 
          data-id="{{rec.id}}"
          disabled="{{rec.completed}}"
        >
          {{rec.completed ? 'âœ… å·²å®Œæˆ' : 'æ ‡è®°ä¸ºå®Œæˆ'}}
        </button>
        <button class="share-btn" bindtap="shareRecommendation" data-rec="{{rec}}">
          åˆ†äº«è¡ŒåŠ¨
        </button>
      </view>
    </view>
  </view>
</view>
```

**P1 éªŒæ”¶æ ‡å‡†**:
- [ ] ç­‰å¾…é¡µé¢æœ‰å®æ—¶æ—¥å¿—æ»šåŠ¨
- [ ] æ¯ä¸ªç»´åº¦å¾—åˆ†éƒ½æœ‰å¯¹åº”å»ºè®®
- [ ] å»ºè®®å…·ä½“å¯æ‰§è¡Œï¼ˆæœ‰æ•°å­—ã€æœ‰æ­¥éª¤ï¼‰
- [ ] é¢„ä¼°æ—¶é—´è¯¯å·® < 30%
- [ ] PDF å¯¼å‡ºä¸­æ–‡æ­£å¸¸æ˜¾ç¤º
- [ ] è§†è§‰é£æ ¼ç»Ÿä¸€ä¸ºæ·±è‰²ä¸»é¢˜

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†é˜¶æ®µè½åœ°è·¯çº¿å›¾

### ç¬¬ä¸€å‘¨ï¼šé—­ç¯ç–é€šæœŸ (2026-02-21 ~ 2026-02-27)

**ç›®æ ‡**: ä¿®å¤ P0 çº§ Bugï¼Œå®Œæˆå¾®ä¿¡ç™»å½•é€»è¾‘ç®€åŒ–

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº | äº¤ä»˜ç‰© | çŠ¶æ€ | éªŒæ”¶æ ‡å‡† |
|------|------|--------|--------|------|----------|
| Day 1 | index.js é˜²å¾¡æ€§ç¼–ç¨‹ | å‰ç«¯ | é¡µé¢ä¸å´©æºƒ | âœ… å®Œæˆ | é¦–é¡µåŠ è½½æˆåŠŸç‡ > 99% |
| Day 1 | debug_log_ai_io å‡½æ•°ç­¾åä¿®å¤ | åç«¯ | å‡½æ•°æ¥æ”¶ 4 ä¸ªå‚æ•° | ğŸ”´ å¾…éªŒè¯ | AI é€‚é…å™¨æ­£å¸¸è°ƒç”¨ |
| Day 2 | nxm_execution_engine å¯¼å…¥è·¯å¾„ä¿®å¤ | åç«¯ | AIResponseLogger æ­£å¸¸å¯¼å…¥ | ğŸ”´ å¾…éªŒè¯ | åå°æ— é™é»˜å´©æºƒ |
| Day 2 | è±†åŒ…é€‚é…å™¨é“¾è·¯æµ‹è¯• | åç«¯ | è±†åŒ… API æ­£å¸¸è°ƒç”¨ | ğŸ”´ å¾…å®æ–½ | è±†åŒ…å“åº”æ­£å¸¸ |
| Day 3 | å¾®ä¿¡ç™»å½•ç®€åŒ–ï¼ˆå» SMSï¼‰ | å‰åç«¯ | UnionID ç™»å½•æµç¨‹ | ğŸ”´ å¾…å®æ–½ | ä¸€é”®ç™»å½•æˆåŠŸ |
| Day 4 | è¿›åº¦æ¡åŠ¨æ€é¢„ä¼°ç®—æ³• | å‰ç«¯ | åŸºäº QuestionsÃ—Models é¢„ä¼° | ğŸŸ¡ è¿›è¡Œä¸­ | é¢„ä¼°è¯¯å·® < 30% |
| Day 5 | è¿›åº¦ä¼ªè£…ï¼ˆåŒ€é€Ÿæ­¥è¿›ï¼‰ | å‰ç«¯ | AI å“åº”å‰è¿›åº¦åˆ° 15% | ğŸ”´ å¾…å®æ–½ | è¿›åº¦æ¡æ­£å¸¸æ­¥è¿› |
| Day 6-7 | é›†æˆæµ‹è¯•ä¸ Bug ä¿®å¤ | æµ‹è¯• | P0 Bug æ¸…é›¶æŠ¥å‘Š | ğŸ”´ å¾…å®æ–½ | è¯Šæ–­æµç¨‹å®Œæ•´è·‘å®Œ |

**å‘¨éªŒæ”¶æ ‡å‡†**:
- [ ] é¦–é¡µåŠ è½½æˆåŠŸç‡ > 99%
- [ ] æ‰€æœ‰ AI é€‚é…å™¨å¯æ­£å¸¸è°ƒç”¨
- [ ] å¾®ä¿¡ç™»å½•æ— éœ€æ‰‹æœºå·
- [ ] è¿›åº¦æ¡ä» 0 å¼€å§‹æ­£å¸¸æ­¥è¿›
- [ ] è¯Šæ–­æµç¨‹å¯å®Œæ•´è·‘å®Œ

---

### ç¬¬äºŒå‘¨ï¼šç¤¾äº¤ä¸å•†ä¸šæœŸ (2026-02-28 ~ 2026-03-06)

**ç›®æ ‡**: ä¸Šçº¿è£‚å˜é‚€è¯·æœºåˆ¶ã€ä¼šå‘˜ä»˜è´¹å…¥å£åŠ PDF æŠ¥å‘Šå¯¼å‡ºæ¡†æ¶

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº | äº¤ä»˜ç‰© | çŠ¶æ€ | éªŒæ”¶æ ‡å‡† |
|------|------|--------|--------|------|----------|
| Day 8-9 | é‚€è¯·ç æ•°æ®åº“è¡¨è®¾è®¡ | åç«¯ | invite_codes è¡¨ | ğŸ”´ å¾…å®æ–½ | è¡¨ç»“æ„å®Œæ•´ |
| Day 9-10 | é‚€è¯·ç ç”Ÿæˆ/æ ¡éªŒ API | åç«¯ | é‚€è¯·ç æ¥å£ | ğŸ”´ å¾…å®æ–½ | é‚€è¯·ç å¯ç”Ÿæˆ/æ ¡éªŒ |
| Day 10-11 | è£‚å˜æµ·æŠ¥ç”Ÿæˆç»„ä»¶ | å‰ç«¯ | åˆ†äº«æµ·æŠ¥ Canvas | ğŸ”´ å¾…å®æ–½ | æµ·æŠ¥å¯ç”Ÿæˆä¿å­˜ |
| Day 11-12 | ä¼šå‘˜å¥—é¤é¡µé¢ | å‰ç«¯ | ä¸‰çº§ä¼šå‘˜ UI | ğŸ”´ å¾…å®æ–½ | å¥—é¤å±•ç¤ºå®Œæ•´ |
| Day 12-13 | æ”¯ä»˜æˆæƒæ¨¡å— | åç«¯ | å¾®ä¿¡æ”¯ä»˜å›è°ƒ | ğŸ”´ å¾…å®æ–½ | æ”¯ä»˜æˆåŠŸæƒç›Šç”Ÿæ•ˆ |
| Day 13-14 | PDF æŠ¥å‘Šå¯¼å‡ºæ¡†æ¶ | åç«¯ | CSV/JSON å¯¼å‡º | ğŸ”´ å¾…å®æ–½ | æŠ¥å‘Šå¯å¯¼å‡º |

**å‘¨éªŒæ”¶æ ‡å‡†**:
- [ ] é‚€è¯· 1 äººæˆæƒç™»å½• +2 æ¬¡è¯Šæ–­
- [ ] å¯ç”Ÿæˆåˆ†äº«æµ·æŠ¥
- [ ] ä¼šå‘˜ä»˜è´¹å…¥å£å¯è§
- [ ] æ”¯ä»˜æˆåŠŸæƒç›Šå®æ—¶ç”Ÿæ•ˆ
- [ ] PDF æŠ¥å‘Šå¯å¯¼å‡º

---

### ç¬¬ä¸‰å‘¨ï¼šç²¾ç»†åŒ–è¿è¥æœŸ (2026-03-07 ~ 2026-03-13)

**ç›®æ ‡**: æ ¹æ®é¦–æ‰¹ 50 åçº¿ä¸‹ä»˜è´¹è€å®¢æˆ·åé¦ˆï¼Œè°ƒæ•´"è¡ŒåŠ¨å»ºè®®"AI ç”Ÿæˆè´¨é‡ï¼Œå¼€å¯å°èŒƒå›´å…¬æµ‹

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº | äº¤ä»˜ç‰© | çŠ¶æ€ | éªŒæ”¶æ ‡å‡† |
|------|------|--------|--------|------|----------|
| Day 15-16 | æƒ…æŠ¥æµæ°´çº¿ç»„ä»¶ | å‰ç«¯ | å®æ—¶æ»šåŠ¨ç ”åˆ¤æ—¥å¿— | ğŸ”´ å¾…å®æ–½ | æ—¥å¿—å®æ—¶æ»šåŠ¨ |
| Day 16-17 | è¡ŒåŠ¨å»ºè®®å¡ç‰‡ç»„ä»¶ | å‰åç«¯ | åŸºäº healthScore ç”Ÿæˆ | ğŸ”´ å¾…å®æ–½ | å»ºè®®å¯æ‰§è¡Œ |
| Day 17-18 | æ·±è‰²æ¸å˜ä¸»é¢˜åº”ç”¨ | å‰ç«¯ | é«˜æ–¯æ¨¡ç³ŠèƒŒæ™¯ | ğŸŸ¡ éƒ¨åˆ†å®Œæˆ | è§†è§‰é£æ ¼ç»Ÿä¸€ |
| Day 18-19 | é¦–æ‰¹ç”¨æˆ·åé¦ˆæ”¶é›† | äº§å“ | 50 ä»½åé¦ˆé—®å· | ğŸ”´ å¾…å®æ–½ | åé¦ˆæ”¶é›†å®Œæˆ |
| Day 19-20 | è¡ŒåŠ¨å»ºè®®è´¨é‡è°ƒä¼˜ | AI | å»ºè®®å¯æ‰§è¡Œæ€§æå‡ | ğŸ”´ å¾…å®æ–½ | NPS > 50 |
| Day 20-21 | å°èŒƒå›´å…¬æµ‹ä¸Šçº¿ | è¿è¥ | å…¬æµ‹æŠ¥å‘Š | ğŸ”´ å¾…å®æ–½ | å…¬æµ‹ç”¨æˆ· > 50 |

**å‘¨éªŒæ”¶æ ‡å‡†**:
- [ ] ç­‰å¾…é¡µé¢æœ‰å®æ—¶æ—¥å¿—æ»šåŠ¨
- [ ] æ¯ä¸ªç»´åº¦å¾—åˆ†éƒ½æœ‰å¯¹åº”å»ºè®®
- [ ] 50 ä»½ç”¨æˆ·åé¦ˆæ”¶é›†å®Œæˆ
- [ ] å…¬æµ‹ç”¨æˆ· NPS > 50
- [ ] ä»˜è´¹è½¬åŒ–ç‡ > 15%

---

### ç¬¬å››å‘¨ï¼šè§„æ¨¡åŒ–å‡†å¤‡æœŸ (2026-03-14 ~ 2026-03-20)

**ç›®æ ‡**: ç³»ç»Ÿç¨³å®šæ€§ä¼˜åŒ–ï¼Œå‡†å¤‡å…¬å¼€å¸‚åœºæ¨å¹¿

| æ—¥æœŸ | ä»»åŠ¡ | è´Ÿè´£äºº | äº¤ä»˜ç‰© | çŠ¶æ€ | éªŒæ”¶æ ‡å‡† |
|------|------|--------|--------|------|----------|
| Day 22-23 | ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– | åç«¯ | å“åº”æ—¶é—´ < 500ms | ğŸ”´ å¾…å®æ–½ | 95% è¯·æ±‚ < 500ms |
| Day 23-24 | æ•°æ®åº“ç´¢å¼•ä¼˜åŒ– | åç«¯ | æŸ¥è¯¢æ€§èƒ½æå‡ | ğŸ”´ å¾…å®æ–½ | æ…¢æŸ¥è¯¢ < 1% |
| Day 24-25 | ç¼“å­˜ç­–ç•¥å®æ–½ | åç«¯ | Redis ç¼“å­˜å±‚ | ğŸ”´ å¾…å®æ–½ | ç¼“å­˜å‘½ä¸­ç‡ > 80% |
| Day 25-26 | ç›‘æ§å‘Šè­¦ç³»ç»Ÿ | è¿ç»´ | ç³»ç»Ÿç›‘æ§ä»ªè¡¨ç›˜ | ğŸ”´ å¾…å®æ–½ | å‘Šè­¦å“åº” < 5 åˆ†é’Ÿ |
| Day 26-27 | ç”¨æˆ·æ–‡æ¡£å®Œå–„ | äº§å“ | ä½¿ç”¨æ‰‹å†Œ/FAQ | ğŸ”´ å¾…å®æ–½ | æ–‡æ¡£å®Œæ•´ |
| Day 28 | å…¬å¼€å¸‚åœºå‘å¸ƒå‡†å¤‡ | å…¨å‘˜ | å‘å¸ƒæ£€æŸ¥æ¸…å• | ğŸ”´ å¾…å®æ–½ | æ‰€æœ‰æ£€æŸ¥é¡¹é€šè¿‡ |

**å‘¨éªŒæ”¶æ ‡å‡†**:
- [ ] ç³»ç»Ÿå“åº”æ—¶é—´ < 500ms
- [ ] æ•°æ®åº“æ…¢æŸ¥è¯¢ < 1%
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 80%
- [ ] ç›‘æ§å‘Šè­¦ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
- [ ] ç”¨æˆ·æ–‡æ¡£å®Œæ•´

---

## ç¬¬å››éƒ¨åˆ†ï¼šæŠ€æœ¯æ¶æ„è°ƒæ•´

### 4.1 æ•°æ®åº“è¡¨å˜æ›´

**æ–°å¢è¡¨**:

```sql
-- é‚€è¯·ç è¡¨
CREATE TABLE invite_codes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    code TEXT UNIQUE NOT NULL,
    created_by TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP,
    max_uses INTEGER DEFAULT 1,
    used_count INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT 1,
    user_id TEXT,
    used_at TIMESTAMP
);

-- ä¼šå‘˜è®¢å•è¡¨
CREATE TABLE membership_orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id TEXT UNIQUE NOT NULL,
    union_id TEXT NOT NULL,
    plan TEXT NOT NULL,
    amount INTEGER NOT NULL,
    status TEXT DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    paid_at TIMESTAMP,
    expires_at TIMESTAMP
);

-- ç”¨æˆ·ä¼šå‘˜è¡¨
CREATE TABLE user_memberships (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    union_id TEXT UNIQUE NOT NULL,
    plan TEXT NOT NULL,
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP,
    is_active BOOLEAN DEFAULT 1,
    diagnostic_count INTEGER DEFAULT 0,
    diagnostic_limit INTEGER
);

-- é‚€è¯·å…³ç³»è¡¨
CREATE TABLE invite_relations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    inviter_union_id TEXT NOT NULL,
    invitee_union_id TEXT UNIQUE NOT NULL,
    invited_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    reward_earned INTEGER DEFAULT 0
);

-- è¡ŒåŠ¨å»ºè®®å®Œæˆè®°å½•è¡¨
CREATE TABLE completed_recommendations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    union_id TEXT NOT NULL,
    recommendation_id TEXT NOT NULL,
    completed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ä¿®æ”¹è¡¨**:

```sql
-- users è¡¨æ·»åŠ  UnionID å­—æ®µ
ALTER TABLE users ADD COLUMN union_id TEXT UNIQUE;
ALTER TABLE users ADD COLUMN openid TEXT;
ALTER TABLE users ADD COLUMN membership_plan TEXT DEFAULT 'free';
ALTER TABLE users ADD COLUMN diagnostic_limit INTEGER DEFAULT 2;
ALTER TABLE users ADD COLUMN updated_at TIMESTAMP;

-- ç§»é™¤æ‰‹æœºå·ç›¸å…³å­—æ®µï¼ˆå¯é€‰ï¼Œå»ºè®®ä¿ç•™å…¼å®¹ï¼‰
-- ALTER TABLE users DROP COLUMN phone;
-- ALTER TABLE users DROP COLUMN password_hash;
```

---

### 4.2 API ç«¯ç‚¹å˜æ›´

**æ–°å¢ç«¯ç‚¹**:
```
POST   /api/membership/create-order      åˆ›å»ºä¼šå‘˜è®¢å•
POST   /api/membership/callback          æ”¯ä»˜å›è°ƒ
GET    /api/membership/status            æŸ¥è¯¢ä¼šå‘˜çŠ¶æ€
POST   /api/invite/generate              ç”Ÿæˆé‚€è¯·ç 
GET    /api/invite/status                æŸ¥è¯¢é‚€è¯·çŠ¶æ€
POST   /api/invite/redeem                å…‘æ¢é‚€è¯·ç 
GET    /api/invite/rewards               æŸ¥è¯¢é‚€è¯·å¥–åŠ±
GET    /api/recommendations/<id>         è·å–è¡ŒåŠ¨å»ºè®®
POST   /api/recommendations/complete     æ ‡è®°å»ºè®®å®Œæˆ
```

**ç§»é™¤ç«¯ç‚¹**:
```
DELETE /api/send-verification-code       ç§»é™¤çŸ­ä¿¡éªŒè¯ç 
DELETE /api/register                     ç§»é™¤æ‰‹æœºå·æ³¨å†Œ
```

**ä¿®æ”¹ç«¯ç‚¹**:
```
POST   /api/login                        æ”¹ä¸ºè¿”å› UnionID
```

---

## ç¬¬äº”éƒ¨åˆ†ï¼šèµ„æºéœ€æ±‚

### 5.1 äººåŠ›èµ„æº

| è§’è‰² | æ•°é‡ | æŠ€èƒ½è¦æ±‚ | å·¥ä½œé˜¶æ®µ | æˆæœ¬ä¼°ç®— |
|------|------|----------|----------|----------|
| åç«¯å¼€å‘ | 1 | Python/Flask/SQLite/å¾®ä¿¡æ”¯ä»˜ | å…¨é˜¶æ®µ | Â¥30,000/æœˆ |
| å‰ç«¯å¼€å‘ | 1 | å¾®ä¿¡å°ç¨‹åº/JavaScript/Canvas | é˜¶æ®µä¸€ã€äºŒ | Â¥25,000/æœˆ |
| UI è®¾è®¡å¸ˆ | 0.5 | æ·±è‰²ä¸»é¢˜/åŠ¨æ•ˆè®¾è®¡/æµ·æŠ¥è®¾è®¡ | é˜¶æ®µäºŒ | Â¥15,000/æœˆ |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | 0.5 | è‡ªåŠ¨åŒ–æµ‹è¯•/ç”¨æˆ·ä½“éªŒæµ‹è¯• | å…¨é˜¶æ®µ | Â¥12,000/æœˆ |
| äº§å“è¿è¥ | 0.5 | ç”¨æˆ·åé¦ˆæ”¶é›†/æ´»åŠ¨ç­–åˆ’ | é˜¶æ®µä¸‰ | Â¥15,000/æœˆ |

**æ€»äººåŠ›æˆæœ¬**: çº¦ Â¥97,000/æœˆ

### 5.2 åŸºç¡€è®¾æ–½

| èµ„æº | è§„æ ¼ | é¢„ä¼°æˆæœ¬ | å¤‡æ³¨ |
|------|------|----------|------|
| äº‘æœåŠ¡å™¨ | 4 æ ¸ 8G | Â¥500/æœˆ | é˜¿é‡Œäº‘/è…¾è®¯äº‘ |
| æ•°æ®åº“ | é«˜å¯ç”¨ç‰ˆ | Â¥300/æœˆ | RDS |
| å¯¹è±¡å­˜å‚¨ | 100GB | Â¥50/æœˆ | OSS |
| CDN | æŒ‰é‡ä»˜è´¹ | Â¥100/æœˆ | åŠ é€Ÿé™æ€èµ„æº |
| å¾®ä¿¡æ”¯ä»˜ | è´¹ç‡ 0.6% | äº¤æ˜“é‡‘é¢çš„ 0.6% | å®˜æ–¹è´¹ç‡ |
| åŸŸå | - | Â¥60/å¹´ | å¤‡æ¡ˆ |

**æœˆåº¦åŸºç¡€è®¾æ–½æˆæœ¬**: çº¦ Â¥950/æœˆ + æ”¯ä»˜æ‰‹ç»­è´¹

---

## ç¬¬å…­éƒ¨åˆ†ï¼šé£é™©ä¸åº”å¯¹

### 6.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ | è´Ÿè´£äºº |
|------|------|------|----------|--------|
| å¾®ä¿¡ç™»å½•æ¥å£å˜æ›´ | ä½ | é«˜ | å…³æ³¨å¾®ä¿¡å®˜æ–¹å…¬å‘Šã€å¿«é€Ÿé€‚é… | åç«¯ |
| æ”¯ä»˜å›è°ƒä¸¢å¤± | ä½ | é«˜ | è®¢å•çŠ¶æ€è½®è¯¢è¡¥å¿æœºåˆ¶ | åç«¯ |
| AI API æœåŠ¡ä¸ç¨³å®š | ä¸­ | é«˜ | å¤šå¹³å°å†—ä½™ã€ç†”æ–­æœºåˆ¶ | åç«¯ |
| è¯Šæ–­è¿›åº¦å¡æ­» | ä¸­ | é«˜ | è¶…æ—¶é‡è¯•ã€äººå·¥å¹²é¢„ | åç«¯ |
| æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆ | ä¸­ | ä¸­ | ç´¢å¼•ä¼˜åŒ–ã€è¯»å†™åˆ†ç¦» | åç«¯ |

### 6.2 ä¸šåŠ¡é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ | è´Ÿè´£äºº |
|------|------|------|----------|--------|
| é‚€è¯·ç æ»¥ç”¨ | ä¸­ | ä¸­ | å•æ¬¡ä½¿ç”¨ã€æœ‰æ•ˆæœŸé™åˆ¶ã€é£æ§ | äº§å“ |
| ä»˜è´¹è½¬åŒ–ç‡ä½ | ä¸­ | é«˜ | å…è´¹é¢åº¦å¸å¼•ã€è¡ŒåŠ¨å»ºè®®ä»·å€¼å±•ç¤º | äº§å“ |
| ç«å“æ¨¡ä»¿ | ä¸­ | ä¸­ | æŒç»­åˆ›æ–°ã€å“ç‰Œå£å’ã€ç”¨æˆ·å…³ç³» | äº§å“ |
| ç”¨æˆ·æœŸæœ›è¿‡é«˜ | é«˜ | ä¸­ | æ˜ç¡®åŠŸèƒ½è¾¹ç•Œã€äººå·¥å®¢æœä»‹å…¥ | è¿è¥ |
| ç°é‡‘æµæ–­è£‚ | ä½ | é«˜ | æ§åˆ¶æˆæœ¬ã€å¿«é€ŸéªŒè¯å•†ä¸šæ¨¡å¼ | CEO |

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé‡Œç¨‹ç¢‘è®¡åˆ’

### é‡Œç¨‹ç¢‘ 1: è¯Šæ–­æµç¨‹ç¨³å®š (Week 1 ç»“æŸ)
- [x] index.js é˜²å¾¡æ€§ç¼–ç¨‹
- [ ] AI é€‚é…å™¨å…¨éƒ¨æ­£å¸¸
- [ ] å¾®ä¿¡ç™»å½•æ— éœ€æ‰‹æœºå·
- [ ] è¿›åº¦æ¡æ­£å¸¸æ­¥è¿›
- [ ] è¯Šæ–­æµç¨‹å¯å®Œæ•´è·‘å®Œ

### é‡Œç¨‹ç¢‘ 2: ç¤¾äº¤è£‚å˜ç”µç½‘ä¸Šçº¿ (Week 2 ç»“æŸ)
- [ ] é‚€è¯·ç ç³»ç»Ÿå®Œæ•´
- [ ] è£‚å˜æµ·æŠ¥ç”Ÿæˆ
- [ ] ä¼šå‘˜ä»˜è´¹å…¥å£
- [ ] æ”¯ä»˜æˆæƒæ¨¡å—
- [ ] PDF æŠ¥å‘Šå¯å¯¼å‡º

### é‡Œç¨‹ç¢‘ 3: è¡ŒåŠ¨å»ºè®®ä¸Šçº¿ (Week 3 ç»“æŸ)
- [ ] æƒ…æŠ¥æµæ°´çº¿ç»„ä»¶
- [ ] GEO ä¼˜åŒ–è¡ŒåŠ¨å¡ç‰‡
- [ ] æ·±è‰²æ¸å˜ä¸»é¢˜
- [ ] 50 ä»½ç”¨æˆ·åé¦ˆæ”¶é›†
- [ ] å…¬æµ‹ç”¨æˆ· NPS > 50

### é‡Œç¨‹ç¢‘ 4: å°èŒƒå›´å…¬æµ‹ (Week 4 ç»“æŸ)
- [ ] é¦–æ‰¹ 50 åä»˜è´¹ç”¨æˆ·ä½“éªŒ
- [ ] NPS > 50
- [ ] ä»˜è´¹è½¬åŒ–ç‡ > 15%
- [ ] é‚€è¯·è£‚å˜ç³»æ•° > 1.5
- [ ] ç³»ç»Ÿç¨³å®šæ€§ > 99%

### é‡Œç¨‹ç¢‘ 5: å…¬å¼€å¸‚åœºå‘å¸ƒ (Week 8 ç»“æŸ)
- [ ] ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–å®Œæˆ
- [ ] ç›‘æ§å‘Šè­¦ç³»ç»Ÿè¿è¡Œæ­£å¸¸
- [ ] ç”¨æˆ·æ–‡æ¡£å®Œæ•´
- [ ] å¸‚åœºæ¨å¹¿ææ–™å‡†å¤‡å°±ç»ª
- [ ] å®¢æœåŸ¹è®­å®Œæˆ

---

## ç¬¬å…«éƒ¨åˆ†ï¼šAI Coding æŠ•å–‚å»ºè®®é¡ºåº

### æŒ‡ä»¤ A (ç´§æ€¥): ä¿®å¤å¯åŠ¨å´©æºƒä¸ AI é€‚é…å™¨
```
ä¿®å¤ index.js å¯åŠ¨å´©æºƒä¸åç«¯ debug_log_ai_io å‡½æ•°æŠ¥é”™ï¼Œè®©è¿›åº¦æ¡åŠ¨èµ·æ¥ã€‚

å…·ä½“ä»»åŠ¡:
1. æ£€æŸ¥ debug_log_ai_io å‡½æ•°ç­¾åï¼ˆåº”ä¸º 4 ä¸ªå‚æ•°ï¼šexecution_id, stage, model_name, messageï¼‰
2. ä¿®å¤ nxm_execution_engine å¯¼å…¥è·¯å¾„ï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼šwechat_backend.xxxï¼‰
3. æµ‹è¯•è±†åŒ…ã€é€šä¹‰åƒé—®é€‚é…å™¨é“¾è·¯
4. éªŒè¯è¿›åº¦æ¡ä» 0 å¼€å§‹æ­£å¸¸æ­¥è¿›

éªŒæ”¶æ ‡å‡†:
- é¦–é¡µåŠ è½½æˆåŠŸç‡ > 99%
- æ‰€æœ‰ AI é€‚é…å™¨å¯æ­£å¸¸è°ƒç”¨
- åå°æ— é™é»˜å´©æºƒ
- è¯Šæ–­æµç¨‹å¯å®Œæ•´è·‘å®Œ
```

### æŒ‡ä»¤ B (åŠŸèƒ½): å¾®ä¿¡ç™»å½•ç®€åŒ–
```
å®ç°å…¨å¾®ä¿¡ ID éªŒè¯ï¼Œç§»é™¤çŸ­ä¿¡éªŒè¯ç æµç¨‹ã€‚

å…·ä½“ä»»åŠ¡:
1. ä¿®æ”¹ /api/login è¿”å› UnionIDï¼ˆç§»é™¤æ‰‹æœºå·ä¾èµ–ï¼‰
2. ç§»é™¤ /api/send-verification-code ä¾èµ–
3. æ›´æ–°å‰ç«¯ç™»å½•æµç¨‹ï¼ˆä¸€é”®ç™»å½•ï¼‰
4. æ›´æ–° users è¡¨ç»“æ„ï¼ˆæ·»åŠ  union_id å­—æ®µï¼‰

éªŒæ”¶æ ‡å‡†:
- ç”¨æˆ·å¯ä¸€é”®å¾®ä¿¡ç™»å½•
- æ— éœ€æ‰‹æœºå·æ³¨å†Œ
- UnionID ä½œä¸ºå”¯ä¸€æ ‡è¯†
- æ–°ç”¨æˆ·è‡ªåŠ¨åˆ›å»ºè´¦æˆ·
```

### æŒ‡ä»¤ C (è§†è§‰): é‡æ„ Waiting é¡µé¢
```
é‡æ„ Waiting é¡µé¢ï¼Œå¼•å…¥é«˜æ–¯æ¨¡ç³ŠèƒŒæ™¯ä¸åŠ¨æ€"æƒ…æŠ¥æµæ°´çº¿"ã€‚

å…·ä½“ä»»åŠ¡:
1. å®æ—¶æ»šåŠ¨ç ”åˆ¤æ—¥å¿—ç»„ä»¶
2. æ·±è‰²æ¸å˜ä¸»é¢˜åº”ç”¨
3. æµå…‰è¿›åº¦æ¡åŠ¨ç”»
4. åŠ¨æ€é¢„ä¼°æ—¶é—´ç®—æ³•ï¼ˆåŸºäº QuestionsÃ—Modelsï¼‰

éªŒæ”¶æ ‡å‡†:
- ç­‰å¾…é¡µé¢æœ‰å®æ—¶æ—¥å¿—æ»šåŠ¨
- è§†è§‰é£æ ¼ç»Ÿä¸€ä¸ºæ·±è‰²ä¸»é¢˜
- é¢„ä¼°æ—¶é—´è¯¯å·® < 30%
- ç”¨æˆ·æ„ŸçŸ¥ä¸“ä¸šåº¦æå‡
```

### æŒ‡ä»¤ D (æ·±åº¦): æ³¨å…¥è¡ŒåŠ¨å»ºè®®é€»è¾‘
```
åœ¨ç»“æœé¡µæ³¨å…¥"è¡ŒåŠ¨å»ºè®®å¡ç‰‡"é€»è¾‘ï¼Œå®Œæˆä»"è¯Šæ–­"åˆ°"æ–¹æ¡ˆ"çš„è·ƒè¿ã€‚

å…·ä½“ä»»åŠ¡:
1. GEO ä¼˜åŒ–è¡ŒåŠ¨å¡ç‰‡ç»„ä»¶
2. åŸºäº healthScore çš„è§„åˆ™å¼•æ“
3. çŸ¥ä¹/å°çº¢ä¹¦/æŠ–éŸ³ä¸“é¡¹å»ºè®®
4. é¢„è®¡æå‡æ•ˆæœé‡åŒ–

éªŒæ”¶æ ‡å‡†:
- æ¯ä¸ªç»´åº¦å¾—åˆ†éƒ½æœ‰å¯¹åº”å»ºè®®
- å»ºè®®å…·ä½“å¯æ‰§è¡Œï¼ˆæœ‰æ•°å­—ã€æœ‰æ­¥éª¤ï¼‰
- é¢„è®¡æå‡æ•ˆæœé‡åŒ–
- ç”¨æˆ·å¯æ ‡è®°å®Œæˆ/åˆ†äº«
```

### æŒ‡ä»¤ E (å•†ä¸š): é‚€è¯·ç ä¸ä¼šå‘˜ç³»ç»Ÿ
```
å®ç°é‚€è¯·ç ç³»ç»Ÿä¸ä¸‰çº§ä¼šå‘˜ä½“ç³»ï¼Œæ”¯æŒçº¿ä¸‹ä»˜è´¹ç”¨æˆ·æˆæƒä½¿ç”¨ã€‚

å…·ä½“ä»»åŠ¡:
1. é‚€è¯·ç æ•°æ®åº“è¡¨è®¾è®¡
2. é‚€è¯·ç ç”Ÿæˆ/æ ¡éªŒ API
3. ä¼šå‘˜å¥—é¤é¡µé¢
4. æ”¯ä»˜æˆæƒæ¨¡å—
5. è£‚å˜æµ·æŠ¥ç”Ÿæˆ

éªŒæ”¶æ ‡å‡†:
- é‚€è¯· 1 äººæˆæƒç™»å½• +2 æ¬¡è¯Šæ–­
- å¯ç”Ÿæˆåˆ†äº«æµ·æŠ¥
- ä¼šå‘˜ä»˜è´¹å…¥å£å¯è§
- æ”¯ä»˜æˆåŠŸæƒç›Šå®æ—¶ç”Ÿæ•ˆ
```

---

## ç¬¬ä¹éƒ¨åˆ†ï¼šè´¢åŠ¡é¢„æµ‹

### 9.1 æ”¶å…¥é¢„æµ‹æ¨¡å‹

| é˜¶æ®µ | æ—¶é—´å‘¨æœŸ | ä»˜è´¹ç”¨æˆ·æ•° | å¹³å‡å®¢å•ä»· | æœˆæ”¶å…¥ | ç´¯è®¡æ”¶å…¥ |
|------|----------|------------|------------|--------|----------|
| ç§å­æœŸ | Month 1 | 30 | Â¥2,000 | Â¥60,000 | Â¥60,000 |
| æˆé•¿æœŸ | Month 2-3 | 150 | Â¥800 | Â¥120,000 | Â¥300,000 |
| æ‰©å¼ æœŸ | Month 4-6 | 800 | Â¥600 | Â¥480,000 | Â¥1,740,000 |
| è§„æ¨¡æœŸ | Month 7-12 | 5,000 | Â¥500 | Â¥2,500,000 | Â¥16,740,000 |

**å‡è®¾æ¡ä»¶**:
- ä¸“ä¸šç‰ˆå æ¯” 70%ï¼Œæ——èˆ°ç‰ˆå æ¯” 30%
- ä¸“ä¸šç‰ˆç»­è´¹ç‡ 60%ï¼Œæ——èˆ°ç‰ˆç»­è´¹ç‡ 80%
- è·å®¢æˆæœ¬ (CAC) éšè§„æ¨¡é€’å‡
- é‚€è¯·è£‚å˜ç³»æ•° 1.5-2.5

### 9.2 æˆæœ¬ç»“æ„

| æˆæœ¬é¡¹ | ç§å­æœŸ | æˆé•¿æœŸ | æ‰©å¼ æœŸ | è§„æ¨¡æœŸ |
|--------|--------|--------|--------|--------|
| äººåŠ›æˆæœ¬ | Â¥97,000 | Â¥97,000 | Â¥150,000 | Â¥300,000 |
| åŸºç¡€è®¾æ–½ | Â¥1,000 | Â¥1,500 | Â¥3,000 | Â¥10,000 |
| æ”¯ä»˜æ‰‹ç»­è´¹ | Â¥360 | Â¥720 | Â¥2,880 | Â¥15,000 |
| è¥é”€æ¨å¹¿ | Â¥5,000 | Â¥20,000 | Â¥100,000 | Â¥500,000 |
| **æœˆåº¦æ€»æˆæœ¬** | **Â¥103,360** | **Â¥119,220** | **Â¥255,880** | **Â¥825,000** |

### 9.3 ç›ˆäºå¹³è¡¡åˆ†æ

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æœˆåº¦å›ºå®šæˆæœ¬ | Â¥103,360 |
| å¹³å‡å®¢å•ä»· | Â¥800 |
| ç›ˆäºå¹³è¡¡ç”¨æˆ·æ•° | 129 ä»˜è´¹ç”¨æˆ· |
| é¢„è®¡è¾¾æˆæ—¶é—´ | Month 2-3 |

---

## ç¬¬åéƒ¨åˆ†ï¼šä¸“å®¶è¯„ä»·ä¸å¯„è¯­

### ç³»ç»Ÿå®Œæˆåº¦è¯„ä¼°

**å½“å‰å®Œæˆåº¦**: 90%

**æ ¸å¿ƒä¼˜åŠ¿**:
1. âœ… éº¦è‚¯é”¡çº§æˆ˜ç•¥æŠ¥å‘Šï¼ˆä¸“ä¸šåº¦é«˜ï¼‰
2. âœ… 8 ä¸ª AI å¹³å°å¹¶è¡Œè¯Šæ–­ï¼ˆæŠ€æœ¯å£å’ï¼‰
3. âœ… å®Œæ•´çš„æ•°æ®åŒæ­¥ä¸å¯¼å‡ºï¼ˆç”¨æˆ·ä½“éªŒï¼‰
4. âœ… ä¸“ä¸šçš„ç®¡ç†åå°ï¼ˆè¿è¥æ”¯æ’‘ï¼‰
5. âœ… å®Œå–„çš„å®¡è®¡ä¸å®‰å…¨ï¼ˆä¼ä¸šçº§ï¼‰

**å¾…å®Œå–„å…³é”®ç‚¹**:
1. ğŸ”´ è¯Šæ–­ä¸­äº¤äº’ä½“éªŒï¼ˆç”¨æˆ·æ„ŸçŸ¥æœ€å¼ºï¼‰
2. ğŸ”´ è¡ŒåŠ¨æ–¹æ¡ˆç”Ÿæˆï¼ˆä»·å€¼é—­ç¯æ ¸å¿ƒï¼‰
3. ğŸ”´ å¾®ä¿¡ç™»å½•ç®€åŒ–ï¼ˆé™ä½æ‘©æ“¦åŠ›ï¼‰
4. ğŸ”´ é‚€è¯·è£‚å˜æœºåˆ¶ï¼ˆå¢é•¿å¼•æ“ï¼‰

### å¸‚åœºç«äº‰åŠ›è¯„ä¼°

**GEO æœåŠ¡å¸‚åœºç°çŠ¶**:
- æ··ä¹±ä¸”ç–¯ç‹‚å¢é•¿
- å¤§å¤šæ•°äº§å“åŠŸèƒ½å•ä¸€
- ç¼ºä¹å®Œæ•´å•†ä¸šé—­ç¯
- ä¸“ä¸šåº¦å‚å·®ä¸é½

**æˆ‘ä»¬çš„å·®å¼‚åŒ–ä¼˜åŠ¿**:
1. ğŸ”´ æƒ…æŠ¥æµæ°´çº¿äº¤äº’ï¼ˆä¸“ä¸šæ„Ÿï¼‰
2. ğŸ”´ GEO ä¼˜åŒ–è¡ŒåŠ¨å¡ç‰‡ï¼ˆè·å¾—æ„Ÿï¼‰
3. ğŸ”´ å¾®ä¿¡ä¸€é”®ç™»å½•ï¼ˆä½æ‘©æ“¦ï¼‰
4. ğŸ”´ ç¤¾äº¤è£‚å˜æ¿€åŠ±ï¼ˆå¢é•¿å¼•æ“ï¼‰
5. ğŸ”´ ä¸‰çº§ä¼šå‘˜ä½“ç³»ï¼ˆå•†ä¸šé—­ç¯ï¼‰

### æœ€ç»ˆå¯„è¯­

> **åœ¨ç›®å‰çš„ GEO å¸‚åœºï¼Œå®¢æˆ·ä¹°çš„ä¸æ˜¯"æ•°æ®"ï¼Œè€Œæ˜¯"ç¡®å®šæ€§"ã€‚**
>
> v2.0 æ–¹æ¡ˆçš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡ï¼š
> - **æç®€çš„å¾®ä¿¡æ¥å…¥**ï¼ˆé™ä½å†³ç­–é—¨æ§›ï¼‰
> - **ç‚«é…·çš„æˆ˜å±€å®å†µ**ï¼ˆå»ºç«‹ä¸“ä¸šä¿¡ä»»ï¼‰
> - **å®ç”¨çš„è¡ŒåŠ¨æ–¹æ¡ˆ**ï¼ˆäº¤ä»˜ç¡®å®šä»·å€¼ï¼‰
>
> ç»™å®¢æˆ·è¿™ç§**ç¡®å®šæ„Ÿ**ã€‚
>
> **æ‰§è¡Œå»ºè®®**:
> 1. ç¬¬ä¸€å‘¨åŠ¡å¿…æ¸…é›¶ P0 Bugï¼Œè¿™æ˜¯ç”Ÿå­˜åº•çº¿
> 2. ç¬¬äºŒå‘¨ä¸Šçº¿é‚€è¯·è£‚å˜ï¼Œè¿™æ˜¯å¢é•¿å¼•æ“
> 3. ç¬¬ä¸‰å‘¨å®Œå–„è¡ŒåŠ¨å»ºè®®ï¼Œè¿™æ˜¯ä»·å€¼é—­ç¯
>
> åªè¦è¿™ä¸‰ç‚¹åšåˆ°ä½ï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªåœ¨ GEO é¢†åŸŸ**æå…·æ€ä¼¤åŠ›**çš„å•†ä¸šå·¥å…·ã€‚
>
> **ç¥æˆåŠŸï¼**

---

**æ–‡æ¡£ç»“æŸ**

**æ–‡æ¡£ä¿¡æ¯**:
- **åˆ›å»ºæ—¥æœŸ**: 2026-02-21
- **æœ€åæ›´æ–°**: 2026-02-21
- **ä¸‹æ¬¡å®¡æŸ¥**: 2026-02-28
- **è´Ÿè´£äºº**: äº§å“æŠ€æœ¯å›¢é˜Ÿ
- **å®¡æ‰¹**: CEO/CTO
- **æ–‡æ¡£ä½ç½®**: `/docs/2026-02-21_å“ç‰Œ GEO æˆ˜ç•¥ç ”åˆ¤ç³»ç»Ÿ v2.0 å•†ä¸šé—­ç¯ä¸ç¤¾äº¤è£‚å˜å®æ–½æ–¹æ¡ˆ.md`

**ç‰ˆæœ¬å†å²**:
| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2026-02-21 | åˆå§‹ç‰ˆæœ¬ | äº§å“å›¢é˜Ÿ |
| v2.0 | 2026-02-21 | å•†ä¸šé—­ç¯ä¸ç¤¾äº¤è£‚å˜æ–¹æ¡ˆ | äº§å“å›¢é˜Ÿ |
