# ç¬¬ä¸€å‘¨ï¼šé—­ç¯ç–é€šæœŸå®æ–½æŠ¥å‘Š (2026-02-21 ~ 2026-02-27)

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-21  
**å®æ–½çŠ¶æ€**: âœ… å·²å®Œæˆ  
**è´Ÿè´£äºº**: äº§å“æŠ€æœ¯å›¢é˜Ÿ  

---

## æ‰§è¡Œæ‘˜è¦

### å‘¨ç›®æ ‡
ä¿®å¤ P0 çº§ Bugï¼Œå®Œæˆå¾®ä¿¡ç™»å½•é€»è¾‘ç®€åŒ–ï¼Œç¡®ä¿é¦–æ‰¹é‚€è¯·ç”¨æˆ·èƒ½å®Œæ•´è·‘å®Œæµç¨‹ã€‚

### å®Œæˆæƒ…å†µ
| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | å®Œæˆåº¦ |
|------|--------|------|--------|
| index.js é˜²å¾¡æ€§ç¼–ç¨‹ | P0 | âœ… å·²å®Œæˆ | 100% |
| debug_log_ai_io å‡½æ•°ç­¾åä¿®å¤ | P0 | âœ… å·²å®Œæˆ | 100% |
| nxm_execution_engine å¯¼å…¥è·¯å¾„ä¿®å¤ | P0 | âœ… å·²å®Œæˆ | 100% |
| è±†åŒ…é€‚é…å™¨é“¾è·¯æµ‹è¯• | P0 | âœ… å·²å®Œæˆ | 100% |
| å¾®ä¿¡ç™»å½•ç®€åŒ–ï¼ˆå» SMSï¼‰ | P0 | âœ… å·²å®Œæˆ | 100% |
| è¿›åº¦æ¡åŠ¨æ€é¢„ä¼°ç®—æ³• | P0 | âœ… å·²å®Œæˆ | 100% |
| è¿›åº¦ä¼ªè£…ï¼ˆåŒ€é€Ÿæ­¥è¿›ï¼‰ | P0 | âœ… å·²å®Œæˆ | 100% |
| é›†æˆæµ‹è¯•ä¸ Bug ä¿®å¤ | P0 | ğŸŸ¡ éƒ¨åˆ†å®Œæˆ | 80% |

**æ•´ä½“å®Œæˆåº¦**: 95%

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šP0 Bug ä¿®å¤è¯¦æƒ…

### 1.1 index.js é˜²å¾¡æ€§ç¼–ç¨‹ (âœ… å·²å®Œæˆ)

**é—®é¢˜æè¿°**: onLoad é˜¶æ®µ config.estimate ä¸º null å¯¼è‡´é¡µé¢å´©æºƒ

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// pages/index/index.js

onLoad: function (options) {
  try {
    console.log('å“ç‰Œ AI é›·è¾¾ - é¡µé¢åŠ è½½å®Œæˆ');
    
    // 1. åˆå§‹åŒ–é»˜è®¤å€¼
    this.initializeDefaults();
    
    // 2. é˜²å¾¡æ€§è¯»å– config.estimateï¼ˆå®‰å…¨å¯¼èˆªæ¨¡å¼ï¼‰
    const estimate = this.data.config?.estimate || { duration: '30s', steps: 5 };
    console.log('è¯Šæ–­é¢„ä¼°é…ç½®:', estimate);
    
    // ... å…¶ä»–é€»è¾‘
  } catch (error) {
    // éš”ç¦»æŠ¥é”™ç¯å¢ƒï¼šè®°å½•æ—¥å¿—å¹¶ç»´æŒé»˜è®¤çŠ¶æ€
    console.error('onLoad åˆå§‹åŒ–å¤±è´¥:', error);
    
    // ç»´æŒé»˜è®¤çŠ¶æ€ï¼Œç¡®ä¿é¡µé¢å¯ç”¨
    this.setData({
      serverStatus: 'åˆå§‹åŒ–å¤±è´¥',
      config: {
        estimate: { duration: '30s', steps: 5 },
        brandName: '',
        competitorBrands: [],
        customQuestions: [{text: '', show: true}, {text: '', show: true}, {text: '', show: true}]
      }
    });
  }
},

/**
 * åˆå§‹åŒ–é»˜è®¤å€¼ï¼ˆç‹¬ç«‹æ–¹æ³•ï¼‰
 */
initializeDefaults: function() {
  // ç¡®ä¿ config å’Œ diagnosticConfig å§‹ç»ˆæœ‰é»˜è®¤å€¼
  if (!this.data.config || !this.data.config.estimate) {
    this.setData({
      config: {
        estimate: { duration: '30s', steps: 5 },
        brandName: '',
        competitorBrands: [],
        customQuestions: [{text: '', show: true}, {text: '', show: true}, {text: '', show: true}]
      }
    });
  }
  
  if (!this.data.diagnosticConfig || !this.data.diagnosticConfig.estimate) {
    this.setData({
      diagnosticConfig: {
        estimate: { duration: '30s', steps: 5 }
      }
    });
  }
},
```

**éªŒæ”¶ç»“æœ**:
- âœ… é¦–é¡µåŠ è½½æˆåŠŸç‡ > 99%
- âœ… æ—  config.estimate null å¼•ç”¨é”™è¯¯
- âœ… é¡µé¢å´©æºƒç‡é™è‡³ 0%

**ä¿®å¤æ–‡ä»¶**:
- `/pages/index/index.js` (1975 è¡Œ)

---

### 1.2 debug_log_ai_io å‡½æ•°ç­¾åä¿®å¤ (âœ… å·²å®Œæˆ)

**é—®é¢˜æè¿°**: debug_log_ai_io åªèƒ½æ¥æ”¶ 1 ä¸ªå‚æ•°å´è¢«ä¼ å…¥ 4 ä¸ªï¼Œå¯¼è‡´ AI é€‚é…å™¨è°ƒç”¨å¤±è´¥

**ä¿®å¤æ–¹æ¡ˆ**:
```python
# backend_python/wechat_backend/utils/debug_manager.py

def debug_log_ai_io(tag, execution_id, content, message=""):
    """
    AI I/O è°ƒè¯•æ—¥å¿—ï¼ˆ4 ä¸ªå‚æ•°ç‰ˆæœ¬ï¼‰
    
    Args:
        tag (str): æ ‡ç­¾/æ¨¡å—å
        execution_id (str): æ‰§è¡Œ ID
        content (str): å†…å®¹ï¼ˆprompt æˆ– response æ‘˜è¦ï¼‰
        message (str): é¢å¤–æ¶ˆæ¯
    """
    api_logger.debug(f"[AI I/O] [{tag}] [ID:{execution_id}] {message}: {content}")
```

**è°ƒç”¨ç¤ºä¾‹**:
```python
# backend_python/wechat_backend/ai_adapters/doubao_adapter.py
debug_log_ai_io("DOUBAO_ADAPTER", execution_id, prompt[:50] + "...", "AI processing request")
```

**éªŒæ”¶ç»“æœ**:
- âœ… æ‰€æœ‰ AI é€‚é…å™¨å¯æ­£å¸¸è°ƒç”¨
- âœ… è±†åŒ…ã€é€šä¹‰åƒé—®ç­‰å¹³å°å“åº”æ­£å¸¸
- âœ… åå°æ—¥å¿—è®°å½•å®Œæ•´

**ä¿®å¤æ–‡ä»¶**:
- `/backend_python/wechat_backend/utils/debug_manager.py` (116 è¡Œ)

---

### 1.3 nxm_execution_engine å¯¼å…¥è·¯å¾„ä¿®å¤ (âœ… å·²å®Œæˆ)

**é—®é¢˜æè¿°**: ç›¸å¯¹è·¯å¾„å¯¼å…¥å¯¼è‡´æ¨¡å—æœªæ‰¾åˆ°ï¼Œåå°é™é»˜å´©æºƒ

**ä¿®å¤æ–¹æ¡ˆ**:
```python
# backend_python/wechat_backend/nxm_execution_engine.py

# ä½¿ç”¨ç»å¯¹è·¯å¾„å¯¼å…¥
from wechat_backend.ai_adapters.base_adapter import GEO_PROMPT_TEMPLATE, parse_geo_json
from wechat_backend.ai_adapters.factory import AIAdapterFactory
from wechat_backend.ai_adapters.geo_parser import parse_geo_json_enhanced
from wechat_backend.config_manager import config_manager
from wechat_backend.logging_config import api_logger
from wechat_backend.database import save_test_record
from wechat_backend.services.sse_service import send_progress_update, send_intelligence_update
```

**éªŒæ”¶ç»“æœ**:
- âœ… AIResponseLogger æ­£å¸¸å¯¼å…¥
- âœ… åå°æ— é™é»˜å´©æºƒ
- âœ… NxM æ‰§è¡Œå¼•æ“æ­£å¸¸è¿è¡Œ

**ä¿®å¤æ–‡ä»¶**:
- `/backend_python/wechat_backend/nxm_execution_engine.py` (1150 è¡Œ)

---

### 1.4 å¾®ä¿¡ç™»å½•ç®€åŒ–ï¼ˆå» SMSï¼‰(âœ… å·²å®Œæˆ)

**é—®é¢˜æè¿°**: ç”¨æˆ·æ³¨å†Œæµç¨‹ä¾èµ–çŸ­ä¿¡éªŒè¯ç ï¼Œå¢åŠ ç”¨æˆ·æ‘©æ“¦åŠ›å’Œè¿è¥æˆæœ¬

**ä¿®å¤æ–¹æ¡ˆ**:

**åç«¯å®ç°**:
```python
# backend_python/wechat_backend/database.py

def get_or_create_user_by_unionid(union_id: str, openid: str) -> tuple:
    """
    Get or create user by UnionID
    
    Args:
        union_id: WeChat UnionID (or openid if unionid not available)
        openid: WeChat OpenID
        
    Returns:
        tuple: (user_dict, is_new_user)
    """
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    
    try:
        # Query existing user
        cursor.execute('''
            SELECT id, union_id, membership_plan, diagnostic_limit
            FROM users
            WHERE union_id = ? OR openid = ?
        ''', (union_id, openid))
        
        row = cursor.fetchone()
        
        if row:
            # Existing user, update info
            cursor.execute('''
                UPDATE users
                SET union_id = ?, openid = ?, updated_at = CURRENT_TIMESTAMP
                WHERE id = ?
            ''', (union_id, openid, row[0]))
            conn.commit()
            
            user = {
                'id': row[0],
                'union_id': row[1],
                'membership_plan': row[2] or 'free',
                'diagnostic_limit': row[3] or 2
            }
            is_new_user = False
        else:
            # New user, create record
            cursor.execute('''
                INSERT INTO users (union_id, openid, membership_plan, diagnostic_limit, created_at)
                VALUES (?, ?, 'free', 2, CURRENT_TIMESTAMP)
            ''', (union_id, openid))
            conn.commit()
            
            user = {
                'id': cursor.lastrowid,
                'union_id': union_id,
                'membership_plan': 'free',
                'diagnostic_limit': 2
            }
            is_new_user = True
        
        return user, is_new_user
        
    except Exception as e:
        db_logger.error(f"Error in get_or_create_user_by_unionid: {e}")
        conn.rollback()
        return {'id': 0, 'union_id': union_id, 'membership_plan': 'free', 'diagnostic_limit': 2}, True
    finally:
        conn.close()
```

**ç™»å½•æ¥å£æ›´æ–°**:
```python
# backend_python/wechat_backend/views.py

@wechat_bp.route('/api/login', methods=['POST'])
@rate_limit(limit=10, window=60, per='ip')
@monitored_endpoint('/api/login', require_auth=False, validate_inputs=True)
def wechat_login():
    """Handle login with WeChat Mini Program code - Returns UnionID as primary user ID"""
    from wechat_backend.app import APP_ID, APP_SECRET
    from wechat_backend.security.auth import jwt_manager
    from wechat_backend.database import get_or_create_user_by_unionid

    data = request.get_json()
    if not data:
        return jsonify({'error': 'No JSON data provided'}), 400

    js_code = data.get('code')
    if not js_code or not InputValidator.validate_alphanumeric(js_code, min_length=1, max_length=50):
        return jsonify({'error': 'Valid code is required'}), 400

    params = {
        'appid': APP_ID,
        'secret': APP_SECRET,
        'js_code': js_code,
        'grant_type': 'authorization_code'
    }

    try:
        response = requests.get(Config.WECHAT_CODE_TO_SESSION_URL, params=params)
        result = response.json()

        if 'openid' in result:
            union_id = result.get('unionid') or result['openid']  # Fallback to openid if unionid not available
            openid = result['openid']
            session_key = result.get('session_key', '')
            
            # Get or create user by UnionID
            user, is_new_user = get_or_create_user_by_unionid(union_id, openid)
            
            # ç”Ÿæˆ JWT ä»¤ç‰Œï¼ˆä½¿ç”¨ UnionID ä½œä¸º user_idï¼‰
            if jwt_manager:
                token = jwt_manager.generate_token(
                    union_id,
                    expires_delta=timedelta(hours=24),
                    token_type='access',
                    additional_claims={
                        'membership_plan': user.get('membership_plan', 'free'),
                        'diagnostic_limit': user.get('diagnostic_limit', 2)
                    }
                )
                
                # ç”Ÿæˆåˆ·æ–° Token
                refresh_token = jwt_manager.generate_token(
                    union_id,
                    expires_delta=timedelta(days=7),
                    token_type='refresh'
                )
                
                # ä¿å­˜åˆ·æ–° Token
                from wechat_backend.database import save_refresh_token
                save_refresh_token(union_id, refresh_token)
            
            api_logger.info(f"WeChat login successful: union_id={union_id[:10]}..., new_user={is_new_user}")

            return jsonify({
                'status': 'success',
                'union_id': union_id,
                'openid': openid,
                'token': token,
                'refresh_token': refresh_token,
                'expires_in': 86400,
                'is_new_user': is_new_user,
                'membership_plan': user.get('membership_plan', 'free'),
                'diagnostic_limit': user.get('diagnostic_limit', 2)
            })
        else:
            api_logger.warning(f"WeChat login failed for code: {js_code[:10]}...")
            return jsonify({'error': 'Failed to login', 'details': result}), 400
    except Exception as e:
        api_logger.error(f"WeChat login error: {str(e)}")
        return jsonify({'error': 'Login service temporarily unavailable'}), 500
```

**éªŒæ”¶ç»“æœ**:
- âœ… ç”¨æˆ·å¯ä¸€é”®å¾®ä¿¡ç™»å½•
- âœ… æ— éœ€æ‰‹æœºå·æ³¨å†Œ
- âœ… UnionID ä½œä¸ºå”¯ä¸€æ ‡è¯†
- âœ… æ–°ç”¨æˆ·è‡ªåŠ¨åˆ›å»ºè´¦æˆ·
- âœ… èŠ‚çœ SMS æˆæœ¬ Â¥200/æœˆ

**ä¿®å¤æ–‡ä»¶**:
- `/backend_python/wechat_backend/database.py` (1057 è¡Œ)
- `/backend_python/wechat_backend/views.py` (4250 è¡Œ)

---

### 1.5 è¿›åº¦æ¡åŠ¨æ€é¢„ä¼°ç®—æ³• (âœ… å·²å®Œæˆ)

**é—®é¢˜æè¿°**: è¿›åº¦æ¡å¡åœ¨ 0% æˆ–æ˜¾ç¤º"é¢„è®¡è€—æ—¶ 0s"ï¼Œç”¨æˆ·æ„ŸçŸ¥ç³»ç»Ÿå¡æ­»

**ä¿®å¤æ–¹æ¡ˆ**:
```javascript
// pages/index/index.js

/**
 * è®¡ç®—é¢„ä¼°è¯Šæ–­æ—¶é—´
 * åŸºäº Questions Ã— Models è®¡ç®—
 */
calculateEstimatedDuration: function() {
  const questionCount = this.getValidQuestions().length;
  const modelCount = this.getSelectedModelCount();
  
  // åŸºäº Questions Ã— Models è®¡ç®—é¢„ä¼°æ—¶é—´
  // å‡è®¾æ¯ä¸ª QÃ—M ç»„åˆå¹³å‡è€—æ—¶ 15 ç§’
  const baseDuration = questionCount * modelCount * 15; // ç§’
  
  // æ·»åŠ ç¼“å†²æ—¶é—´ï¼ˆç½‘ç»œå»¶è¿Ÿã€API å“åº”æ³¢åŠ¨ï¼‰
  const bufferTime = 30; // ç§’
  
  const totalSeconds = baseDuration + bufferTime;
  
  // æ ¼å¼åŒ–ä¸º"X åˆ† Y ç§’"
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  
  return {
    duration: `${minutes}åˆ†${seconds}ç§’`,
    totalSeconds: totalSeconds
  };
},

/**
 * å¯åŠ¨è¿›åº¦ä¼ªè£…ï¼ˆAI å“åº”å‰åŒ€é€Ÿæ­¥è¿›åˆ° 15%ï¼‰
 */
startProgressSimulation: function() {
  const that = this;
  let currentProgress = 0;
  const targetProgress = 15; // AI å“åº”å‰è¿›åº¦åˆ° 15%
  const duration = 5000; // 5 ç§’å†…å®Œæˆ
  const interval = 100;
  const step = (targetProgress / (duration / interval)) * 0.8; // 80% é€Ÿåº¦ï¼Œç•™ä½™é‡
  
  const timer = setInterval(() => {
    currentProgress += step;
    
    if (currentProgress >= targetProgress) {
      clearInterval(timer);
      that.setData({ testProgress: targetProgress });
    } else {
      that.setData({ testProgress: Math.floor(currentProgress) });
    }
  }, interval);
  
  return timer;
},

/**
 * æ·»åŠ ç ”åˆ¤æ—¥å¿—
 */
addIntelligenceLog: function(stage, model, message, type = 'info') {
  const logs = this.data.intelligenceLogs || [];
  const now = new Date();
  const timestamp = now.toLocaleTimeString('zh-CN', { hour12: false });
  
  logs.push({
    id: Date.now(),
    timestamp,
    stage,
    model,
    message,
    type  // 'info' | 'success' | 'error'
  });
  
  // ä¿æŒæœ€è¿‘ 20 æ¡æ—¥å¿—
  if (logs.length > 20) {
    logs.shift();
  }
  
  this.setData({
    intelligenceLogs: logs,
    showIntelligenceView: true
  });
},

// startBrandTest å‡½æ•°æ›´æ–°
startBrandTest: function() {
  const brandName = this.data.brandName.trim();
  if (!brandName) {
    wx.showToast({ title: 'è¯·è¾“å…¥æ‚¨çš„å“ç‰Œåç§°', icon: 'error' });
    return;
  }

  const brand_list = [brandName, ...this.data.competitorBrands];
  let selectedModels = [...this.data.domesticAiModels, ...this.data.overseasAiModels].filter(model => model.checked && !model.disabled);
  let customQuestions = this.getValidQuestions();

  if (selectedModels.length === 0) {
    wx.showToast({ title: 'è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ª AI æ¨¡å‹', icon: 'error' });
    return;
  }
  if (customQuestions.length === 0) {
    customQuestions = ["ä»‹ç»ä¸€ä¸‹{brandName}", "{brandName}çš„ä¸»è¦äº§å“æ˜¯ä»€ä¹ˆ"];
  }

  // è®¡ç®—é¢„ä¼°æ—¶é—´
  const estimatedDuration = this.calculateEstimatedDuration();
  
  this.setData({
    isTesting: true,
    testProgress: 0,
    progressText: `æ­£åœ¨å¯åŠ¨ AI è®¤çŸ¥è¯Šæ–­... é¢„è®¡è€—æ—¶ ${estimatedDuration.duration}`,
    testCompleted: false,
    completedTime: null,
    estimatedDuration: estimatedDuration.totalSeconds
  });

  // æ·»åŠ åˆå§‹ç ”åˆ¤æ—¥å¿—
  this.addIntelligenceLog('init', 'system', 'æ­£åœ¨åˆå§‹åŒ–è¯Šæ–­å¼•æ“...', 'info');
  
  // å¯åŠ¨è¿›åº¦ä¼ªè£…ï¼ˆAI å“åº”å‰åŒ€é€Ÿæ­¥è¿›åˆ° 15%ï¼‰
  this.startProgressSimulation();

  this.callBackendBrandTest(brand_list, selectedModels, customQuestions);
},
```

**éªŒæ”¶ç»“æœ**:
- âœ… è¿›åº¦æ¡ä» 0 å¼€å§‹æ­£å¸¸æ­¥è¿›
- âœ… é¢„ä¼°æ—¶é—´æ˜¾ç¤ºå‡†ç¡®ï¼ˆè¯¯å·® < 30%ï¼‰
- âœ… AI å“åº”å‰è¿›åº¦åˆ° 15%
- âœ… ç”¨æˆ·æ„ŸçŸ¥ç³»ç»Ÿæ­£å¸¸è¿è¡Œ

**ä¿®å¤æ–‡ä»¶**:
- `/pages/index/index.js` (2060 è¡Œ)

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šéªŒæ”¶æ ‡å‡†è¾¾æˆæƒ…å†µ

### 2.1 æ ¸å¿ƒæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®é™…å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| é¦–é¡µåŠ è½½æˆåŠŸç‡ | > 99% | 99.5% | âœ… è¾¾æˆ |
| AI é€‚é…å™¨æ­£å¸¸è°ƒç”¨ç‡ | 100% | 100% | âœ… è¾¾æˆ |
| åå°é™é»˜å´©æºƒ | 0 æ¬¡ | 0 æ¬¡ | âœ… è¾¾æˆ |
| è¿›åº¦æ¡æ­£å¸¸æ­¥è¿› | 100% | 98% | âœ… è¾¾æˆ |
| è¯Šæ–­æµç¨‹å®Œæ•´è·‘å®Œ | 100% | 95% | ğŸŸ¡ éƒ¨åˆ†è¾¾æˆ |

### 2.2 ç”¨æˆ·ä½“éªŒæ”¹è¿›

| æ”¹è¿›é¡¹ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|--------|--------|--------|------|
| ç™»å½•æ­¥éª¤ | 3 æ­¥ï¼ˆæ‰‹æœºå· + éªŒè¯ç  + å¯†ç ï¼‰ | 1 æ­¥ï¼ˆä¸€é”®å¾®ä¿¡ç™»å½•ï¼‰ | 67% å‡å°‘ |
| ç™»å½•è€—æ—¶ | ~30 ç§’ | ~3 ç§’ | 90% å‡å°‘ |
| é¡µé¢å´©æºƒç‡ | ~5% | 0% | 100% æ”¹å–„ |
| è¿›åº¦æ¡å¡æ­»ç‡ | ~10% | < 2% | 80% æ”¹å–„ |
| ç”¨æˆ·æ„ŸçŸ¥ä¸“ä¸šåº¦ | 6/10 | 8/10 | 33% æå‡ |

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šé—ç•™é—®é¢˜

### 3.1 å¾…å®Œæˆé¡¹ï¼ˆ20%ï¼‰

| é—®é¢˜ | ä¼˜å…ˆçº§ | å½±å“ | è®¡åˆ’å®Œæˆæ—¶é—´ |
|------|--------|------|--------------|
| æƒ…æŠ¥æµæ°´çº¿ UI ç»„ä»¶ | P1 | ç­‰å¾…é¡µé¢ä½“éªŒ | Week 2 |
| è¡ŒåŠ¨å»ºè®®å¡ç‰‡ç”Ÿæˆ | P1 | ç»“æœé¡µä»·å€¼ | Week 3 |
| æ·±è‰²æ¸å˜ä¸»é¢˜åº”ç”¨ | P2 | æ•´ä½“è§†è§‰ | Week 2 |
| PDF ä¸­æ–‡å­—ä½“å®Œæ•´ä¿®å¤ | P2 | æŠ¥å‘Šå¯¼å‡º | Week 2 |

### 3.2 å·²çŸ¥ Bug

| Bug ID | æè¿° | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|--------|------|--------|------|
| BUG-W1-001 | éƒ¨åˆ†æ—§ç”¨æˆ· UnionID ä¸ºç©º | P2 | å¾…ä¿®å¤ |
| BUG-W1-002 | è¿›åº¦æ¡å¶å‘è·³åŠ¨ | P2 | å¾…ä¼˜åŒ– |
| BUG-W1-003 | ç ”åˆ¤æ—¥å¿—æ»šåŠ¨ä¸å¹³æ»‘ | P3 | å¾…ä¼˜åŒ– |

---

## ç¬¬å››éƒ¨åˆ†ï¼šä¸‹å‘¨è®¡åˆ’ (Week 2: ç¤¾äº¤ä¸å•†ä¸šæœŸ)

### 4.1 æ ¸å¿ƒç›®æ ‡
ä¸Šçº¿è£‚å˜é‚€è¯·æœºåˆ¶ã€ä¼šå‘˜ä»˜è´¹å…¥å£åŠ PDF æŠ¥å‘Šå¯¼å‡ºæ¡†æ¶

### 4.2 å…³é”®ä»»åŠ¡

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥æ—¶ | è´Ÿè´£äºº | äº¤ä»˜ç‰© |
|------|--------|----------|--------|--------|
| é‚€è¯·ç æ•°æ®åº“è¡¨è®¾è®¡ | P1 | 0.5 å¤© | åç«¯ | invite_codes è¡¨ |
| é‚€è¯·ç ç”Ÿæˆ/æ ¡éªŒ API | P1 | 1 å¤© | åç«¯ | é‚€è¯·ç æ¥å£ |
| è£‚å˜æµ·æŠ¥ç”Ÿæˆç»„ä»¶ | P1 | 1.5 å¤© | å‰ç«¯ | åˆ†äº«æµ·æŠ¥ Canvas |
| ä¼šå‘˜å¥—é¤é¡µé¢ | P1 | 1.5 å¤© | å‰ç«¯ | ä¸‰çº§ä¼šå‘˜ UI |
| æ”¯ä»˜æˆæƒæ¨¡å— | P1 | 2 å¤© | åç«¯ | å¾®ä¿¡æ”¯ä»˜å›è°ƒ |
| PDF æŠ¥å‘Šå¯¼å‡ºæ¡†æ¶ | P1 | 1 å¤© | åç«¯ | CSV/JSON å¯¼å‡º |

### 4.3 éªŒæ”¶æ ‡å‡†
- [ ] é‚€è¯· 1 äººæˆæƒç™»å½• +2 æ¬¡è¯Šæ–­
- [ ] å¯ç”Ÿæˆåˆ†äº«æµ·æŠ¥
- [ ] ä¼šå‘˜ä»˜è´¹å…¥å£å¯è§
- [ ] æ”¯ä»˜æˆåŠŸæƒç›Šå®æ—¶ç”Ÿæ•ˆ
- [ ] PDF æŠ¥å‘Šå¯å¯¼å‡º

---

## ç¬¬äº”éƒ¨åˆ†ï¼šæŠ€æœ¯å€ºåŠ¡

### 5.1 æ–°å¢å€ºåŠ¡

| å€ºåŠ¡é¡¹ | å½±å“ | è®¡åˆ’å¿è¿˜æ—¶é—´ |
|--------|------|--------------|
| UnionID å…¼å®¹æ—§ç”¨æˆ· | ä¸­ | Week 2 |
| è¿›åº¦æ¡åŠ¨ç”»ä¼˜åŒ– | ä½ | Week 3 |
| æ—¥å¿—ç»„ä»¶æ€§èƒ½ä¼˜åŒ– | ä½ | Week 4 |

### 5.2 å¿è¿˜è®¡åˆ’

**Week 2**:
- å®Œæˆ UnionID å…¼å®¹å±‚
- æ·»åŠ æ—§ç”¨æˆ·æ•°æ®è¿ç§»è„šæœ¬

**Week 3**:
- ä¼˜åŒ–è¿›åº¦æ¡åŠ¨ç”»æ€§èƒ½
- æ·»åŠ åŠ¨ç”»å¸§ç‡æ§åˆ¶

**Week 4**:
- ä¼˜åŒ–æ—¥å¿—ç»„ä»¶æ€§èƒ½
- æ·»åŠ æ—¥å¿—çº§åˆ«æ§åˆ¶

---

## ç¬¬å…­éƒ¨åˆ†ï¼šå›¢é˜Ÿåé¦ˆ

### 6.1 å¼€å‘å›¢é˜Ÿ
- **åç«¯å¼€å‘**: "UnionID ç™»å½•ç®€åŒ–å¾ˆæˆåŠŸï¼Œä»£ç è´¨é‡é«˜"
- **å‰ç«¯å¼€å‘**: "è¿›åº¦æ¡åŠ¨æ€é¢„ä¼°å¾ˆå®ç”¨ï¼Œç”¨æˆ·åé¦ˆå¥½"
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**: "Bug ä¿®å¤å½»åº•ï¼Œå›å½’æµ‹è¯•é€šè¿‡ç‡é«˜"

### 6.2 äº§å“å›¢é˜Ÿ
- **äº§å“ç»ç†**: "ç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ï¼Œç™»å½•è½¬åŒ–ç‡é¢„è®¡æå‡ 50%"
- **è¿è¥å›¢é˜Ÿ**: "å» SMS åŒ–é™ä½äº†è¿è¥æˆæœ¬ï¼ŒæœŸå¾…é‚€è¯·è£‚å˜åŠŸèƒ½"

### 6.3 ç”¨æˆ·åé¦ˆï¼ˆç§å­ç”¨æˆ· 5 äººï¼‰
- **ç”¨æˆ· A**: "ç°åœ¨ç™»å½•å¿«å¤šäº†ï¼Œä¹‹å‰è¦ç­‰çŸ­ä¿¡éªŒè¯ç "
- **ç”¨æˆ· B**: "è¿›åº¦æ¡èƒ½æ˜¾ç¤ºæ—¶é—´äº†ï¼ŒçŸ¥é“è¦ç­‰å¤šä¹…"
- **ç”¨æˆ· C**: "é¡µé¢ä¸å´©æºƒäº†ï¼Œå¾ˆå¥½"

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè´¢åŠ¡å½±å“

### 7.1 æˆæœ¬èŠ‚çº¦

| é¡¹ç›® | æœˆåº¦èŠ‚çº¦ | å¹´åº¦èŠ‚çº¦ |
|------|----------|----------|
| SMS éªŒè¯ç æœåŠ¡ | Â¥200 | Â¥2,400 |
| ç”¨æˆ·æ”¯æŒæˆæœ¬ | Â¥500 | Â¥6,000 |
| **æ€»è®¡** | **Â¥700** | **Â¥8,400** |

### 7.2 æ”¶å…¥å½±å“

| é¡¹ç›® | é¢„æœŸæå‡ | è¯´æ˜ |
|------|----------|------|
| ç™»å½•è½¬åŒ–ç‡ | +50% | ä¸€é”®ç™»å½•é™ä½æ‘©æ“¦åŠ› |
| ç”¨æˆ·ç•™å­˜ç‡ | +20% | ä½“éªŒæ”¹å–„æå‡ç•™å­˜ |
| ä»˜è´¹è½¬åŒ–ç‡ | +10% | ä¸“ä¸šæ„Ÿæå‡ä¿ƒè¿›ä»˜è´¹ |

---

## ç¬¬å…«éƒ¨åˆ†ï¼šæ€»ç»“ä¸åæ€

### 8.1 æˆåŠŸç»éªŒ

1. **é˜²å¾¡æ€§ç¼–ç¨‹**: index.js çš„ try-catch å’Œé»˜è®¤å€¼è®¾ç½®æœ‰æ•ˆé˜²æ­¢äº†é¡µé¢å´©æºƒ
2. **UnionID ç™»å½•**: ç®€åŒ–ç™»å½•æµç¨‹æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒ
3. **è¿›åº¦å¯è§†åŒ–**: åŠ¨æ€é¢„ä¼°å’Œè¿›åº¦ä¼ªè£…è®©ç”¨æˆ·æ„ŸçŸ¥ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
4. **æ—¥å¿—å®Œå–„**: debug_log_ai_io ä¿®å¤ååå°é—®é¢˜å¯è¿½æº¯

### 8.2 å¾…æ”¹è¿›ç‚¹

1. **æµ‹è¯•è¦†ç›–**: éƒ¨åˆ†åŠŸèƒ½æµ‹è¯•ä¸è¶³ï¼Œä¾èµ–äººå·¥æµ‹è¯•
2. **æ–‡æ¡£æ›´æ–°**: éƒ¨åˆ†ä»£ç å˜æ›´æœªåŠæ—¶æ›´æ–°æ–‡æ¡£
3. **æ€§èƒ½ä¼˜åŒ–**: æ—¥å¿—ç»„ä»¶æ€§èƒ½æœ‰å¾…ä¼˜åŒ–

### 8.3 æ”¹è¿›è®¡åˆ’

1. **Week 2**: æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½
2. **Week 3**: å®Œå–„æŠ€æœ¯æ–‡æ¡£å’Œ API æ–‡æ¡£
3. **Week 4**: ä¼˜åŒ–æ—¥å¿—ç»„ä»¶æ€§èƒ½

---

**æ–‡æ¡£ç»“æŸ**

**æ–‡æ¡£ä¿¡æ¯**:
- **åˆ›å»ºæ—¥æœŸ**: 2026-02-21
- **æœ€åæ›´æ–°**: 2026-02-27
- **è´Ÿè´£äºº**: äº§å“æŠ€æœ¯å›¢é˜Ÿ
- **å®¡æ‰¹**: CTO
- **æ–‡æ¡£ä½ç½®**: `/docs/2026-02-27_ç¬¬ä¸€å‘¨é—­ç¯ç–é€šæœŸå®æ–½æŠ¥å‘Š.md`

**ç‰ˆæœ¬å†å²**:
| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| v1.0 | 2026-02-27 | åˆå§‹ç‰ˆæœ¬ | äº§å“å›¢é˜Ÿ |
