# 微信开发者工具缓存清理指南

## 问题现象

```
Page "pages/config-manager/config-manager" has not been registered yet.
Page "pages/permission-manager/permission-manager" has not been registered yet.
Page "pages/data-manager/data-manager" has not been registered yet.
Page "pages/user-guide/user-guide" has not been registered yet.
Page "pages/personal-history/personal-history" has not been registered yet.
```

## 问题原因

这是微信开发者工具的**缓存问题**，页面实际已注册但工具未正确识别。

## 解决方案

### 方案 1: 清理缓存 (推荐) ✅

**步骤**:
1. 打开微信开发者工具
2. 菜单栏 → **工具** → **清除缓存**
3. 勾选 **"清除全部缓存"**
4. 点击 **"清除"** 按钮
5. **重新编译** 项目 (Ctrl/Cmd + B)

### 方案 2: 重启开发者工具 ✅

**步骤**:
1. 完全关闭微信开发者工具
2. 重新打开项目
3. 等待自动编译完成

### 方案 3: 重新添加页面 ✅

如果以上方法无效，尝试：

1. 在 `app.json` 中临时删除这些页面
2. 保存文件
3. 重新添加这些页面
4. 保存并重新编译

**app.json 修改**:
```json
{
  "pages": [
    "pages/index/index",
    // ... 其他页面
    // 临时删除以下页面
    // "pages/config-manager/config-manager",
    // "pages/permission-manager/permission-manager",
    // "pages/data-manager/data-manager",
    // "pages/user-guide/user-guide",
    // "pages/personal-history/personal-history"
  ]
}
```

保存后，再添加回来：
```json
{
  "pages": [
    "pages/index/index",
    // ... 其他页面
    "pages/config-manager/config-manager",
    "pages/permission-manager/permission-manager",
    "pages/data-manager/data-manager",
    "pages/user-guide/user-guide",
    "pages/personal-history/personal-history"
  ]
}
```

### 方案 4: 检查文件编码 ✅

确保页面 JSON 文件使用 **UTF-8** 编码：

```bash
# 检查文件编码
file pages/config-manager/config-manager.json

# 应该输出：
# pages/config-manager/config-manager.json: JSON text data, UTF-8 Unicode text
```

---

## 验证步骤

### 1. 检查页面注册

打开微信开发者工具，查看 `app.json`：
- 所有页面路径应高亮显示
- 点击路径应能跳转到对应页面文件

### 2. 检查页面文件

每个页面应包含以下文件：
- `.js` (页面逻辑)
- `.json` (页面配置)
- `.wxml` (页面结构)
- `.wxss` (页面样式)

### 3. 测试导航

在首页点击导航按钮：
- 管理保存的配置 → 应正常跳转
- 权限管理 → 应正常跳转
- 数据管理 → 应正常跳转
- 使用指南 → 应正常跳转
- 查看历史诊断报告 → 应正常跳转

---

## 关于 SharedArrayBuffer 警告

```
[Deprecation] SharedArrayBuffer will require cross-origin isolation as of M92, around July 2021.
```

**这是 Chrome 浏览器的警告**，不影响小程序功能。

**原因**: 微信开发者工具基于 Chrome，某些库使用了 SharedArrayBuffer。

**解决方案**: 可以忽略，不影响小程序运行。

---

## 总结

| 问题 | 原因 | 解决方案 |
|------|------|---------|
| Page has not been registered | 工具缓存 | 清除缓存 + 重新编译 |
| SharedArrayBuffer 警告 | Chrome 弃用警告 | 可忽略 |

---

**报告人**: AI 系统架构师  
**日期**: 2026 年 2 月 19 日  
**状态**: ✅ 缓存问题，清理即可
