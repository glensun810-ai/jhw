<!-- components/CompetitorMatrix/CompetitorMatrix.wxml -->
<view class="competitor-matrix">
  <view class="matrix-header">
    <text class="matrix-title cyber-cyan">竞品攻防矩阵</text>
  </view>

  <skeleton type="paragraph" rows="6" loading="{{loading}}">
    <view class="matrix-content" wx:if="{{!loading && (brandKeywords.length > 0 || competitorKeywords.length > 0 || sharedKeywords.length > 0)}}">
      <!-- 左侧：品牌护城河 -->
      <view class="column brand-column">
        <view class="column-header">
          <text class="column-icon">🛡️</text>
          <text class="column-title">品牌护城河</text>
        </view>
        <view class="keyword-tags">
          <view class="keyword-tag brand-keyword" wx:for="{{brandKeywords}}" wx:key="index">
            {{item}}
          </view>
          <view class="keyword-tag shared-keyword" wx:for="{{sharedKeywords}}" wx:key="index">
            {{item}} (共用)
          </view>
          <view class="placeholder" wx:if="{{brandKeywords.length === 0 && sharedKeywords.length === 0}}">
            <text class="placeholder-text">暂无独占词汇</text>
          </view>
        </view>
      </view>

      <!-- 右侧：竞品拦截点 -->
      <view class="column competitor-column">
        <view class="column-header">
          <text class="column-icon">⚔️</text>
          <text class="column-title">竞品拦截点</text>
        </view>
        <view class="keyword-tags">
          <view class="keyword-tag competitor-keyword" wx:for="{{competitorKeywords}}" wx:key="index">
            {{item}}
          </view>
          <view class="keyword-tag shared-keyword" wx:for="{{sharedKeywords}}" wx:key="index">
            {{item}} (重叠)
          </view>
          <view class="placeholder" wx:if="{{competitorKeywords.length === 0 && sharedKeywords.length === 0}}">
            <text class="placeholder-text">暂无竞品词汇</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 防御性渲染：当数据为空时显示占位符 -->
    <view class="placeholder-container" wx:if="{{!loading && (!competitionData || (brandKeywords.length === 0 && competitorKeywords.length === 0 && sharedKeywords.length === 0))}}">
      <text class="placeholder-text">AI 未检索到明确的竞品攻防数据</text>
    </view>
  </skeleton>
</view>