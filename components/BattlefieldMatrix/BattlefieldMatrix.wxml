<!-- 战地矩阵主组件模板 -->
<view class="battlefield-matrix">
  <!-- 图例 -->
  <matrix-legend
    currentView="{{currentView}}"
    bind:viewchange="onViewChange"
  />

  <!-- 矩阵内容 -->
  <view wx:if="{{viewMatrixData}}" class="matrix-content {{isAnimating ? 'animating' : ''}}">
    <!-- 表头 -->
    <view class="matrix-header">
      <view class="header-cell"></view>
      <view wx:for="{{viewMatrixData.headers}}" wx:key="index" class="header-cell">
        <text>{{item.label}}</text>
      </view>
    </view>

    <!-- 行 -->
    <view class="matrix-rows">
      <view wx:for="{{viewMatrixData.rows}}" wx:key="index" class="matrix-row">
        <view class="row-label">{{item.label}}</view>
        <view class="row-cells">
          <matrix-cell
            wx:for="{{item.cells}}"
            wx:key="index"
            wx:for-item="cellData"
            wx:for-index="cellIndex"
            cell-data="{{cellData}}"
            row-index="{{index}}"
            col-index="{{cellIndex}}"
            bind:tap="onCellTap"
          />
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view wx:elif="{{!loading && !viewMatrixData}}" class="empty-state">
    <text>暂无矩阵数据</text>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-spinner"></view>
    <text>矩阵加载中...</text>
  </view>
</view>
