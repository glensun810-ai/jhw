<!-- æµæ°´çº¿è¿›åº¦æŒ‡ç¤ºå™¨æ¨¡æ¿ -->
<view class="pipeline-progress">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stat-item">
      <view class="stat-value success">{{successCount}}</view>
      <view class="stat-label">æˆåŠŸ</view>
    </view>
    <view class="stat-item">
      <view class="stat-value processing">{{processingCount}}</view>
      <view class="stat-label">å¤„ç†ä¸­</view>
    </view>
    <view class="stat-item">
      <view class="stat-value error">{{errorCount}}</view>
      <view class="stat-label">å¤±è´¥</view>
    </view>
    <view class="stat-item">
      <view class="stat-value pending">{{pendingCount}}</view>
      <view class="stat-label">ç­‰å¾…</view>
    </view>
  </view>

  <!-- è¿›åº¦æ¡ -->
  <view class="progress-bar">
    <view class="progress-track">
      <view 
        class="progress-fill" 
        style="width: {{progressPercent}}%"
      ></view>
    </view>
    <view class="progress-text">{{progressPercent}}%</view>
  </view>

  <!-- çŠ¶æ€ä¿¡æ¯ -->
  <view class="status-info">
    <text class="status-text">{{getStatusText()}}</text>
    <text class="total-count">å…± {{totalCount}} é¡¹</text>
  </view>

  <!-- SSE è¿æ¥çŠ¶æ€ -->
  <view wx:if="{{sseConnected || sseConnecting || sseError}}" class="connection-status">
    <view wx:if="{{sseConnected}}" class="connection-connected">
      <text>ğŸ”´</text>
      <text>å®æ—¶è¿æ¥ä¸­</text>
    </view>
    <view wx:elif="{{sseConnecting}}" class="connection-connecting">
      <text>ğŸŸ¡</text>
      <text>è¿æ¥ä¸­...</text>
    </view>
    <view wx:elif="{{sseError}}" class="connection-error">
      <text>âšª</text>
      <text>è¿æ¥å¤±è´¥</text>
      <text class="refresh-btn" bindtap="refreshConnection">é‡è¯•</text>
    </view>
  </view>
</view>
