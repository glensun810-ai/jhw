<!--components/ImpactGauge/ImpactGauge.wxml-->
<!--
  P0 çº§ç©ºç¼ºä¿®å¤ï¼šå½±å“åŠ›ä»ªè¡¨ç›˜ç»„ä»¶
  
  å±•ç¤ºå†…å®¹:
  - ç»¼åˆå½±å“åŠ›è¯„åˆ†
  - å››ä¸ªç»´åº¦åˆ†é¡¹è¯„åˆ†
  - ä»ªè¡¨ç›˜å¯è§†åŒ–
-->
<view class="impact-gauge">
  <!-- ä¸»ä»ªè¡¨ç›˜ -->
  <view class="impact-gauge__main">
    <view class="impact-gauge__circle">
      <!-- èƒŒæ™¯åœ†ç¯ -->
      <svg class="impact-gauge__svg" width="200" height="200" viewBox="0 0 200 200">
        <!-- èƒŒæ™¯åœ†ç¯ -->
        <circle
          class="impact-gauge__bg-circle"
          cx="100"
          cy="100"
          r="80"
          fill="none"
          stroke="#1a1a2e"
          stroke-width="20"
        />
        <!-- è¿›åº¦åœ†ç¯ -->
        <circle
          class="impact-gauge__progress-circle"
          cx="100"
          cy="100"
          r="80"
          fill="none"
          stroke="url(#gradient)"
          stroke-width="20"
          stroke-linecap="round"
          stroke-dasharray="{{circumference}}"
          stroke-dashoffset="{{dashOffset}}"
          transform="rotate(-90 100 100)"
        />
        <!-- æ¸å˜è‰²å®šä¹‰ -->
        <defs>
          <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00F5A0"/>
            <stop offset="100%" stop-color="#00A9FF"/>
          </linearGradient>
        </defs>
      </svg>
      
      <!-- ä¸­å¿ƒåˆ†æ•° -->
      <view class="impact-gauge__center">
        <view class="impact-gauge__score">{{impactScores.overall_impact.toFixed(0)}}</view>
        <view class="impact-gauge__label">ç»¼åˆå½±å“åŠ›</view>
        <view class="impact-gauge__level {{getLevelClass(impactScores.overall_impact)}}">
          {{getLevelText(impactScores.overall_impact)}}
        </view>
      </view>
    </view>
  </view>

  <!-- åˆ†é¡¹æŒ‡æ ‡ -->
  <view class="impact-gauge__metrics">
    <view class="impact-gauge__metric">
      <view class="impact-gauge__metric-bar">
        <view 
          class="impact-gauge__metric-fill impact-gauge__metric-fill--authority"
          style="width: {{impactScores.authority_impact}}%;"
        ></view>
      </view>
      <view class="impact-gauge__metric-info">
        <text class="impact-gauge__metric-name">æƒå¨æ€§</text>
        <text class="impact-gauge__metric-value">{{impactScores.authority_impact.toFixed(0)}}</text>
      </view>
    </view>

    <view class="impact-gauge__metric">
      <view class="impact-gauge__metric-bar">
        <view 
          class="impact-gauge__metric-fill impact-gauge__metric-fill--visibility"
          style="width: {{impactScores.visibility_impact}}%;"
        ></view>
      </view>
      <view class="impact-gauge__metric-info">
        <text class="impact-gauge__metric-name">å¯è§åº¦</text>
        <text class="impact-gauge__metric-value">{{impactScores.visibility_impact.toFixed(0)}}</text>
      </view>
    </view>

    <view class="impact-gauge__metric">
      <view class="impact-gauge__metric-bar">
        <view 
          class="impact-gauge__metric-fill impact-gauge__metric-fill--sentiment"
          style="width: {{impactScores.sentiment_impact}}%;"
        ></view>
      </view>
      <view class="impact-gauge__metric-info">
        <text class="impact-gauge__metric-name">æƒ…æ„Ÿ</text>
        <text class="impact-gauge__metric-value">{{impactScores.sentiment_impact.toFixed(0)}}</text>
      </view>
    </view>
  </view>

  <!-- è§£è¯»å»ºè®® -->
  <view class="impact-gauge__insight" wx:if="{{showInsight}}">
    <view class="impact-gauge__insight-icon">ğŸ’¡</view>
    <view class="impact-gauge__insight-text">{{insightText}}</view>
  </view>
</view>
