<!-- components/AnalysisCard/AnalysisCard.wxml -->
<view class="analysis-card {{loading ? 'loading' : ''}}">
  <view class="card-header">
    <text class="card-title">{{title}}</text>
    <text class="card-subtitle" wx:if="{{subtitle}}">{{subtitle}}</text>
  </view>

  <view class="card-content">
    <!-- 状态指示器 -->
    <view class="status-indicator" wx:if="{{status}}">
      <view class="status-text" style="color: {{getStatusColor(status)}};">
        {{getStatusText(status)}}
      </view>
      <view class="progress-container" wx:if="{{progress >= 0}}">
        <view class="progress-bar-container">
          <view class="progress-bar" style="width: {{progress}}%; background-color: {{getStatusColor(status)}};"></view>
        </view>
        <text class="progress-text">{{progress}}%</text>
      </view>
    </view>

    <!-- 数据内容 -->
    <skeleton type="paragraph" rows="4" loading="{{loading}}">
      <view class="data-content">
        <block wx:if="{{data && !loading}}">
          <slot name="content"></slot>
        </block>

        <!-- 防御性渲染：当数据为空时显示占位符 -->
        <view class="placeholder" wx:if="{{(!data || loading) && !loading}}">
          <text class="placeholder-text">暂无数据</text>
        </view>
      </view>
    </skeleton>
  </view>
</view>