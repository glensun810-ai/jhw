<view class="page-container container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <text class="page-title">å·²ä¿å­˜çš„æœç´¢ç»“æœ</text>
    <view class="search-bar">
      <input class="search-input" placeholder="æœç´¢å“ç‰Œæˆ–æ ‡ç­¾..." value="{{searchKeyword}}" bindinput="onSearchInput" />
      <button class="search-btn" bindtap="onSearch">æœç´¢</button>
    </view>
  </view>

  <!-- ç­›é€‰å·¥å…·æ  -->
  <view class="filter-bar">
    <view class="filter-item" bindtap="showTimeFilter">
      <text>{{timeRangeText}}</text>
      <text class="arrow">â–¼</text>
    </view>
    <view class="filter-item" bindtap="showCategoryFilter">
      <text>{{categoryFilterText}}</text>
      <text class="arrow">â–¼</text>
    </view>
    <view class="filter-item" bindtap="sortByChange">
      <text>{{sortByText}}</text>
      <text class="arrow">â–¼</text>
    </view>
  </view>

  <!-- ç»“æœåˆ—è¡¨ -->
  <view class="results-list">
    <view class="result-card" wx:for="{{filteredResults}}" wx:key="id">
      <view class="card-header">
        <text class="brand-name">ğŸ·ï¸ {{item.brandName}}</text>
        <text class="save-time">{{formatDate(item.timestamp)}}</text>
      </view>
      <view class="card-content">
        <view class="score-summary">
          <text class="score-item">ğŸ“Š ç»¼åˆ: {{item.results.overallScore || 0}}åˆ†</text>
          <text class="score-item">ğŸ† æƒå¨åº¦: {{item.results.overallAuthority || 0}}</text>
        </view>
        <view class="tags-container">
          <text class="tag" wx:for="{{item.tags}}" wx:key="tag" wx:if="{{item}}">{{item}}</text>
        </view>
        <view class="notes" wx:if="{{item.notes}}">ğŸ“ {{item.notes}}</view>
      </view>
      <view class="card-actions">
        <button class="action-btn view-btn" bindtap="viewResult" data-id="{{item.id}}">æŸ¥çœ‹</button>
        <button class="action-btn edit-btn" bindtap="editResult" data-id="{{item.id}}">ç¼–è¾‘</button>
        <button class="action-btn delete-btn" bindtap="deleteResult" data-id="{{item.id}}">åˆ é™¤</button>
      </view>
    </view>

    <view class="empty-state" wx:if="{{filteredResults.length === 0}}">
      <text>æš‚æ— ä¿å­˜çš„æœç´¢ç»“æœ</text>
    </view>
  </view>

  <!-- æ—¶é—´ç­›é€‰å¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showTimeFilterModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text>é€‰æ‹©æ—¶é—´èŒƒå›´</text>
        <text class="close-btn" bindtap="hideTimeFilter">âœ•</text>
      </view>
      <view class="modal-body">
        <view class="time-option" wx:for="{{timeOptions}}" wx:key="value" bindtap="selectTimeOption" data-value="{{item.value}}">
          <text>{{item.label}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åˆ†ç±»ç­›é€‰å¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showCategoryFilterModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text>é€‰æ‹©åˆ†ç±»</text>
        <text class="close-btn" bindtap="hideCategoryFilter">âœ•</text>
      </view>
      <view class="modal-body">
        <view class="category-option" wx:for="{{allCategories}}" wx:key="category" bindtap="selectCategory" data-category="{{item}}">
          <text>{{item}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ’åºå¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showSortByModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text>æ’åºæ–¹å¼</text>
        <text class="close-btn" bindtap="hideSortByModal">âœ•</text>
      </view>
      <view class="modal-body">
        <view class="sort-option" wx:for="{{sortOptions}}" wx:key="value" bindtap="selectSortOption" data-value="{{item.value}}">
          <text>{{item.label}}</text>
        </view>
      </view>
    </view>
  </view>
</view>