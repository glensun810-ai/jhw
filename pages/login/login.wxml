<view class="page-container container">
  <!-- 登录头部 -->
  <view class="login-header">
    <image class="logo" src="/images/logo.png" mode="aspectFit" />
    <text class="title">品牌洞察平台</text>
    <text class="subtitle">登录以解锁完整功能</text>
  </view>

  <!-- 登录方式选择 -->
  <view class="login-methods">
    <view class="method-item active">
      <text class="method-text">微信一键登录</text>
    </view>
    <view class="method-item" bindtap="switchMethod" data-method="phone">
      <text class="method-text">手机号登录</text>
    </view>
  </view>

  <!-- 微信登录区域 -->
  <view class="login-content" wx:if="{{loginMethod === 'wechat'}}">
    <button class="wechat-login-btn" open-type="getUserProfile" bindgetuserinfo="onWechatLogin">
      <text class="btn-text">微信一键登录</text>
    </button>
    <view class="login-tips">
      <text class="tips-text">登录即表示您同意</text>
      <text class="link-text" bindtap="showPrivacyAgreement">《隐私协议》</text>
      <text class="tips-text">和</text>
      <text class="link-text" bindtap="showUserAgreement">《用户协议》</text>
    </view>
  </view>

  <!-- 手机号登录区域 -->
  <view class="login-content" wx:if="{{loginMethod === 'phone'}}">
    <view class="input-group">
      <input class="input-field" type="number" placeholder="请输入手机号" value="{{phone}}" bindinput="onPhoneInput" />
    </view>
    <view class="input-group verify-code-group">
      <input class="input-field verify-code-input" type="text" placeholder="验证码" value="{{verificationCode}}" bindinput="onVerificationCodeInput" />
      <button class="verify-code-btn" bindtap="getVerificationCode" disabled="{{countdown > 0}}">
        <text>{{countdown > 0 ? countdown + 's后重发' : '获取验证码'}}</text>
      </button>
    </view>
    <button class="phone-login-btn" bindtap="onPhoneLogin">
      <text class="btn-text">手机号登录</text>
    </button>
    <view class="login-tips">
      <text class="tips-text">登录即表示您同意</text>
      <text class="link-text" bindtap="showPrivacyAgreement">《隐私协议》</text>
      <text class="tips-text">和</text>
      <text class="link-text" bindtap="showUserAgreement">《用户协议》</text>
    </view>
  </view>

  <!-- 协议弹窗 -->
  <view class="modal-overlay" wx:if="{{showAgreementModal}}">
    <view class="agreement-modal">
      <view class="modal-header">
        <text class="modal-title">{{agreementTitle}}</text>
        <text class="close-btn" bindtap="hideAgreementModal">✕</text>
      </view>
      <scroll-view class="modal-content" scroll-y="true">
        <rich-text nodes="{{agreementContent}}"></rich-text>
      </scroll-view>
      <view class="modal-footer">
        <button class="modal-btn confirm-btn" bindtap="hideAgreementModal">确定</button>
      </view>
    </view>
  </view>
</view>