<view class="page-container container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <text class="page-title">ä¸ªäººå†å²è®°å½•</text>
    <text class="page-subtitle">æŸ¥çœ‹æ‚¨çš„å“ç‰Œè®¤çŸ¥è¯Šæ–­è®°å½•</text>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-filter-section">
    <view class="search-bar">
      <input class="search-input" placeholder="æœç´¢å“ç‰Œåç§°..." value="{{searchKeyword}}" bindinput="onSearchInput" />
      <button class="search-btn" bindtap="onSearch">æœç´¢</button>
    </view>
    <view class="filter-bar">
      <view class="filter-item" bindtap="showTimeFilter">
        <text>{{timeRangeText}}</text>
        <text class="arrow">â–¼</text>
      </view>
      <view class="filter-item" bindtap="showScoreFilter">
        <text>{{scoreRangeText}}</text>
        <text class="arrow">â–¼</text>
      </view>
      <view class="filter-item" bindtap="showCategoryFilter">
        <text>{{categoryText}}</text>
        <text class="arrow">â–¼</text>
      </view>
    </view>
  </view>

  <!-- å†å²è®°å½•åˆ—è¡¨ -->
  <view class="history-list">
    <view class="history-card" wx:for="{{filteredHistory}}" wx:key="id" bindtap="viewDetail" data-id="{{item.id}}">
      <view class="card-header">
        <text class="brand-name">{{item.brandName}}</text>
        <text class="test-time">{{formatDate(item.timestamp)}}</text>
      </view>
      <view class="card-content">
        <view class="score-display">
          <text class="score-num {{item.results.overallScore >= 80 ? 'text-green' : (item.results.overallScore >= 60 ? 'text-orange' : 'text-red')}}">
            {{item.results.overallScore}}
          </text>
          <text class="score-label">åˆ†</text>
        </view>
        <view class="dimension-scores">
          <text class="dimension-score">ğŸ† {{item.results.overallAuthority}}</text>
          <text class="dimension-score">ğŸ‘ï¸ {{item.results.overallVisibility}}</text>
          <text class="dimension-score">âœ¨ {{item.results.overallPurity}}</text>
          <text class="dimension-score">ğŸ”— {{item.results.overallConsistency}}</text>
        </view>
        <view class="tags-container" wx:if="{{item.tags && item.tags.length > 0}}">
          <text class="tag" wx:for="{{item.tags}}" wx:key="tag">{{item}}</text>
        </view>
        <view class="notes" wx:if="{{item.notes}}">ğŸ“ {{item.notes}}</view>
      </view>
      <view class="card-footer">
        <text class="category">ğŸ·ï¸ {{item.category}}</text>
        <view class="actions">
          <button class="action-btn edit-btn" bindtap="editResult" data-id="{{item.id}}">ç¼–è¾‘</button>
          <button class="action-btn delete-btn" bindtap="deleteResult" data-id="{{item.id}}">åˆ é™¤</button>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{filteredHistory.length === 0}}">
      <text>æš‚æ— ä¸ªäººå†å²è®°å½•</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <text>æ­£åœ¨åŠ è½½...</text>
  </view>
</view>