<!-- components/IntelligenceDrawer/IntelligenceDrawer.wxml -->
<view class="drawer-overlay" wx:if="{{showDrawer}}" bindtap="hide">
  <view 
    class="drawer-container" 
    style="{{animation ? 'transform: ' + animation.translateY : ''}}"
    bindtouchmove="preventTouchMove">
    
    <!-- 抽屉头部 -->
    <view class="drawer-header">
      <view class="header-content">
        <view class="header-info">
          <text class="brand-model-question">
            {{data.brand}} × {{data.model || '模型'}} × {{data.question}}
          </text>
        </view>
        <view class="header-score">
          <text class="score-number">{{data.score || '-'}}</text>
          <text class="score-percent">分</text>
        </view>
      </view>
      <view class="close-btn" bindtap="hide">✕</view>
    </view>

    <!-- 滚动内容区域 -->
    <scroll-view class="drawer-content" scroll-y="true">
      <!-- AI回复摘要 -->
      <view class="summary-section">
        <text class="section-title">AI 回复摘要</text>
        <view class="summary-content">
          <text class="summary-text">{{data.answer || '暂无回复内容'}}</text>
        </view>
      </view>

      <!-- 溯源证据链 -->
      <view class="sources-section" wx:if="{{data.sources && data.sources.length > 0}}">
        <text class="section-title">溯源证据链</text>
        <view class="sources-list">
          <view class="source-card" wx:for="{{data.sources}}" wx:key="index">
            <view class="source-url">{{item.url}}</view>
            <view class="source-title">{{item.title || '引用链接'}}</view>
          </view>
        </view>
      </view>

      <!-- 详细指标 -->
      <view class="detailed-scores-section">
        <text class="section-title">详细指标</text>
        <view class="scores-container">
          <!-- 使用雷达图展示详细指标 -->
          <view class="radar-chart-container" wx:if="{{data.detailedScores}}">
            <view class="score-item" wx:for="{{data.detailedScores}}" wx:key="index">
              <text class="score-label">{{item.name}}</text>
              <view class="score-bar">
                <view class="score-fill" style="width: {{item.value}}%;"></view>
                <text class="score-value">{{item.value}}%</text>
              </view>
            </view>
          </view>
          <view class="no-scores" wx:else>
            <text>暂无详细指标数据</text>
          </view>
        </view>
      </view>
    </scroll-view>

    <!-- 底部操作按钮 -->
    <view class="drawer-actions">
      <button class="action-btn copy-btn" bindtap="copyFullText">
        <text>复制全文</text>
      </button>
      <button class="action-btn poster-btn" bindtap="generateAnalysisPoster">
        <text>生成分析海报</text>
      </button>
    </view>
  </view>
</view>