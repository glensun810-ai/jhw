# å“ç‰Œè¯Šæ–­ç³»ç»Ÿ - æ·±åº¦é—®é¢˜åˆ†æä¸å½»åº•ä¼˜åŒ–æ–¹æ¡ˆ

**æŠ¥å‘Šç¼–å·**: DEEP-ANALYSIS-20260306-001  
**åˆ†ææ—¥æœŸ**: 2026-03-06  
**åˆ†æäºº**: é¦–å¸­æ¶æ„å¸ˆ å¼ å·¥ + åç«¯å¼€å‘ æå·¥  
**ç´§æ€¥ç¨‹åº¦**: ğŸ”´ **æœ€é«˜ä¼˜å…ˆçº§**  

---

## ä¸€ã€æ‰§è¡Œæ‘˜è¦

### 1.1 æ ¸å¿ƒé—®é¢˜

ç»è¿‡å¯¹æœ€æ–°è¿è¡Œæ—¥å¿—ã€æ•°æ®åº“ä¿å­˜æ•°æ®çš„å…¨é¢åˆ†æï¼Œå‘ç°å“ç‰Œè¯Šæ–­ç³»ç»Ÿå­˜åœ¨**5 ä¸ªè‡´å‘½é—®é¢˜**ï¼Œå¯¼è‡´æ´å¯ŸæŠ¥å‘Šæ— æ³•æˆåŠŸç”Ÿæˆï¼š

| é—®é¢˜ç¼–å· | é—®é¢˜æè¿° | ä¸¥é‡åº¦ | çŠ¶æ€ |
|---------|---------|--------|------|
| **BUG-001** | `FaultTolerantExecutor` ç¼ºå°‘ `collect_result` æ–¹æ³• | ğŸ”´ è‡´å‘½ | âŒ æœªä¿®å¤ |
| **BUG-002** | `execution_store` å¯¼å…¥å¤±è´¥ | ğŸ”´ è‡´å‘½ | âŒ æœªä¿®å¤ |
| **BUG-003** | AI è°ƒç”¨è¶…æ—¶ï¼ˆ30 ç§’ï¼‰å¯¼è‡´å¤§è§„æ¨¡å¤±è´¥ | ğŸŸ¡ é«˜ | âš ï¸ éƒ¨åˆ†ç¼“è§£ |
| **BUG-004** | ç†”æ–­å™¨è¯¯è§¦å‘å¯¼è‡´æ¨¡å‹è¢«è·³è¿‡ | ğŸŸ¡ é«˜ | âš ï¸ éƒ¨åˆ†ç¼“è§£ |
| **BUG-005** | æµ‹è¯•æ•°æ®ä¸ç”Ÿäº§æ•°æ®ä¸ä¸€è‡´ | ğŸŸ¡ é«˜ | âŒ æœªä¿®å¤ |

### 1.2 é—®é¢˜å½±å“

**å®é™…è¿è¡Œç»“æœ** (æ‰§è¡Œ ID: `9afa327b-7464-4c2f-a798-330e83da4fb3`):
- æ€»ä»»åŠ¡æ•°ï¼š8 æ¬¡è¯·æ±‚
- æˆåŠŸå®Œæˆï¼š**0 æ¬¡** (0%)
- å¤±è´¥ï¼š**8 æ¬¡** (100%)
- æŠ¥å‘ŠçŠ¶æ€ï¼š`overallStatus: completed` ä½† `dimensions: []` (ç©º)
- æ€»ä½“è¯„åˆ†ï¼š`null`

**æµ‹è¯•ç»“æœ vs å®é™…è¿è¡Œ**:
| æŒ‡æ ‡ | æµ‹è¯•ç»“æœ | å®é™…è¿è¡Œ | å·®è· |
|------|---------|---------|------|
| æˆåŠŸç‡ | 100% | 0% | -100% |
| å¹³å‡è€—æ—¶ | 4 ç§’ | >300 ç§’ (è¶…æ—¶) | +75 å€ |
| ç»´åº¦æ•° | 4 ä¸ª | 0 ä¸ª | -100% |
| æŠ¥å‘Šå®Œæ•´æ€§ | å®Œæ•´ | ç©ºæŠ¥å‘Š | âŒ |

---

## äºŒã€é—®é¢˜æ·±åº¦åˆ†æ

### 2.1 BUG-001: `collect_result` æ–¹æ³•ç¼ºå¤±

#### é—®é¢˜æ—¥å¿—
```
2026-02-25 20:17:49,128 - [NxM] AI è°ƒç”¨å¤±è´¥ï¼šdoubao, é—®é¢˜ 1: 'FaultTolerantExecutor' object has no attribute 'collect_result'
```

#### æ ¹å› åˆ†æ

**ä»£ç ä½ç½®**: `nxm_execution_engine.py:189, 200, 215`

**é—®é¢˜ä»£ç **:
```python
# nxm_execution_engine.py
result = ft_executor.collect_result(  # âŒ collect_result æ–¹æ³•ä¸å­˜åœ¨ï¼
    brand=brand,
    question=question,
    model=model_name,
    response=ai_result.data,
    geo_data=geo_data,
    error=error_msg
)
```

**ç¼ºå¤±ä»£ç **: `FaultTolerantExecutor` ç±»ä¸­æ²¡æœ‰ `collect_result` æ–¹æ³•å®šä¹‰

#### å½±å“èŒƒå›´
- æ‰€æœ‰ AI è°ƒç”¨ç»“æœæ— æ³•æ­£ç¡®æ”¶é›†
- å¯¼è‡´ç»“æœæ•°ç»„ä¸ºç©º
- æŠ¥å‘Šç”Ÿæˆå¤±è´¥

#### ä¿®å¤æ–¹æ¡ˆ
åœ¨ `FaultTolerantExecutor` ç±»ä¸­æ·»åŠ  `collect_result` æ–¹æ³•ï¼š

```python
class FaultTolerantExecutor:
    # ... ç°æœ‰ä»£ç  ...
    
    def collect_result(
        self,
        brand: str,
        question: str,
        model: str,
        response: Any,
        geo_data: Dict[str, Any],
        error: Optional[str] = None
    ) -> Dict[str, Any]:
        """
        æ”¶é›†è¯Šæ–­ç»“æœ
        
        å‚æ•°:
            brand: å“ç‰Œåç§°
            question: é—®é¢˜
            model: AI æ¨¡å‹åç§°
            response: AI å“åº”
            geo_data: GEO è§£ææ•°æ®
            error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰
        
        è¿”å›:
            ç»“æœå­—å…¸
        """
        return {
            "brand": brand,
            "question": question,
            "model": model,
            "response": response,
            "geo_data": geo_data,
            "error": error,
            "timestamp": datetime.now().isoformat()
        }
```

---

### 2.2 BUG-002: `execution_store` å¯¼å…¥å¤±è´¥

#### é—®é¢˜æ—¥å¿—
```
2026-02-25 20:17:49,128 - [NxM] æ›´æ–° execution_store å¤±è´¥ï¼šcannot import name 'execution_store' from 'wechat_backend.views'
```

#### æ ¹å› åˆ†æ

**ä»£ç ä½ç½®**: `nxm_execution_engine.py:306`

**é—®é¢˜ä»£ç **:
```python
# nxm_execution_engine.py:306
from wechat_backend.views import execution_store  # âŒ å¯¼å…¥å¤±è´¥ï¼
```

**æ ¹æœ¬åŸå› **:
1. `execution_store` å®šä¹‰åœ¨ `diagnosis_views.py` ä¸­ï¼Œä¸æ˜¯ `views/__init__.py`
2. å¾ªç¯å¯¼å…¥é—®é¢˜ï¼š`nxm_execution_engine` è¢« `diagnosis_views` å¯¼å…¥ï¼Œåˆå°è¯•å¯¼å…¥ `diagnosis_views` çš„å˜é‡

#### å½±å“èŒƒå›´
- æ‰§è¡ŒçŠ¶æ€æ— æ³•æ›´æ–°
- å‰ç«¯è½®è¯¢è·å–ä¸åˆ°è¿›åº¦
- é”™è¯¯ä¿¡æ¯æ— æ³•è®°å½•

#### ä¿®å¤æ–¹æ¡ˆ

**æ–¹æ¡ˆ A**: ä½¿ç”¨å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆæ¨èï¼‰
```python
# åˆ›å»ºç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†æ¨¡å—
# wechat_backend/execution_store.py

_execution_store = {}

def get_execution_store():
    """è·å–å…¨å±€æ‰§è¡ŒçŠ¶æ€å­˜å‚¨"""
    return _execution_store

def update_execution_status(execution_id: str, **kwargs):
    """æ›´æ–°æ‰§è¡ŒçŠ¶æ€"""
    if execution_id in _execution_store:
        _execution_store[execution_id].update(kwargs)
```

**æ–¹æ¡ˆ B**: ä½¿ç”¨æ•°æ®åº“å­˜å‚¨çŠ¶æ€ï¼ˆæ›´å¯é ï¼‰
```python
# ç›´æ¥ä½¿ç”¨ task_statuses è¡¨
from wechat_backend.repositories import save_task_status

save_task_status(
    task_id=execution_id,
    stage=stage,
    progress=progress,
    status_text=status_text
)
```

---

### 2.3 BUG-003: AI è°ƒç”¨è¶…æ—¶å¯¼è‡´å¤§è§„æ¨¡å¤±è´¥

#### é—®é¢˜æ—¥å¿—
```
2026-02-25 20:17:41,815 - [FaultTolerant] âš ï¸ æ¯”äºšè¿ª-doubao æ‰§è¡Œè¶…æ—¶ï¼Œè€—æ—¶ï¼š30.00s
2026-02-25 20:17:49,128 - [NxM] AI è°ƒç”¨å¤±è´¥ï¼šdoubao, é—®é¢˜ 1: ã€æ¯”äºšè¿ª-doubaoã€‘æ•°æ®æºå“åº”è¶…æ—¶ï¼ˆ30 ç§’ï¼‰ï¼Œè¯·ç¨åé‡è¯•
```

#### æ ¹å› åˆ†æ

**é—®é¢˜è¡¨ç°**:
- å•ä¸ª AI è°ƒç”¨è¶…æ—¶ 30 ç§’
- 8 ä¸ªä»»åŠ¡æ€»è¶…æ—¶ = 8 Ã— 30 ç§’ = 240 ç§’
- åŠ ä¸Šå…¶ä»–å¼€é”€ï¼Œæ€»è€—æ—¶è¶…è¿‡ 300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰

**æ·±å±‚åŸå› **:
1. **çœŸå® API è°ƒç”¨ vs æµ‹è¯• Mock**: æµ‹è¯•ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼ˆ<1 ç§’ï¼‰ï¼Œå®é™…è°ƒç”¨çœŸå® AI APIï¼ˆå¯èƒ½>30 ç§’ï¼‰
2. **å¹¶å‘ä¸è¶³**: ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œè€Œéå¹¶è¡Œ
3. **è¶…æ—¶é…ç½®è¿‡ç´§**: 30 ç§’å¯¹äºå¤æ‚ AI æŸ¥è¯¢å¯èƒ½ä¸å¤Ÿ

#### å½±å“èŒƒå›´
- æ‰€æœ‰çœŸå®ç”¨æˆ·è¯·æ±‚éƒ½ä¼šè¶…æ—¶
- æµ‹è¯•é€šè¿‡ä½†ç”Ÿäº§å¤±è´¥

#### ä¿®å¤æ–¹æ¡ˆ

**æ–¹æ¡ˆ A**: å¢åŠ å¹¶å‘åº¦ï¼ˆæ¨èï¼‰
```python
# ä½¿ç”¨ ThreadPoolExecutor å¹¶å‘æ‰§è¡Œ
from concurrent.futures import ThreadPoolExecutor, as_completed

with ThreadPoolExecutor(max_workers=4) as executor:
    futures = [
        executor.submit(execute_single_task, task)
        for task in tasks
    ]
    for future in as_completed(futures):
        result = future.result()
        results.append(result)
```

**æ–¹æ¡ˆ B**: ä¼˜åŒ–è¶…æ—¶é…ç½®
```python
# æ ¹æ®æ¨¡å‹å’Œä»»åŠ¡ç±»å‹åŠ¨æ€è°ƒæ•´è¶…æ—¶
TIMEOUT_CONFIG = {
    'doubao': 60,      # è±†åŒ… 60 ç§’
    'qwen': 45,        # åƒé—® 45 ç§’
    'deepseek': 60,    # DeepSeek 60 ç§’
    'zhipu': 45,       # æ™ºè°± 45 ç§’
}
```

---

### 2.4 BUG-004: ç†”æ–­å™¨è¯¯è§¦å‘

#### é—®é¢˜æ—¥å¿—
```
2026-02-25 20:17:49,128 - [CircuitBreaker] æ¨¡å‹ doubao å·²ç†”æ–­
2026-02-25 20:17:49,128 - [NxM] æ¨¡å‹ qwen å·²ç†”æ–­ï¼Œè·³è¿‡
2026-02-25 20:17:49,128 - [NxM] æ¨¡å‹ doubao å·²ç†”æ–­ï¼Œè·³è¿‡
```

#### æ ¹å› åˆ†æ

**é—®é¢˜è¡¨ç°**:
- ä¸€æ¬¡å¤±è´¥åï¼Œæ¨¡å‹è¢«ç†”æ–­
- åç»­ä»»åŠ¡è¢«è·³è¿‡ï¼Œå³ä½¿å…¶ä»–å“ç‰Œå¯èƒ½æˆåŠŸ
- ç†”æ–­ç²’åº¦å¤ªç²—ï¼ˆæ¨¡å‹çº§è€Œéä»»åŠ¡çº§ï¼‰

**æ·±å±‚åŸå› **:
1. ç†”æ–­å™¨é…ç½®è¿‡äºæ•æ„Ÿï¼ˆ3 æ¬¡å¤±è´¥å³ç†”æ–­ï¼‰
2. ç†”æ–­èŒƒå›´å¤ªå¤§ï¼ˆä¸€ä¸ªå“ç‰Œå¤±è´¥ï¼Œæ‰€æœ‰å“ç‰Œéƒ½å—å½±å“ï¼‰
3. æ²¡æœ‰åŒºåˆ†ä¸´æ—¶å¤±è´¥å’Œæ°¸ä¹…å¤±è´¥

#### ä¿®å¤æ–¹æ¡ˆ

**æ–¹æ¡ˆ A**: ç»†åŒ–ç†”æ–­ç²’åº¦
```python
# ç†”æ–­é”®åŒ…å«å“ç‰Œä¿¡æ¯
circuit_breaker_key = f"{model_name}:{brand}"
```

**æ–¹æ¡ˆ B**: å¢åŠ ç†”æ–­é˜ˆå€¼
```python
# æé«˜ç†”æ–­é˜ˆå€¼
failure_threshold = 10  # ä» 3 æå‡åˆ° 10
recovery_timeout = 120  # ä» 60 ç§’å¢åŠ åˆ° 120 ç§’
```

---

### 2.5 BUG-005: æµ‹è¯•ä¸ç”Ÿäº§ä¸ä¸€è‡´

#### é—®é¢˜å¯¹æ¯”

| ç»´åº¦ | æµ‹è¯•ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ | å·®è·åŸå›  |
|------|---------|---------|---------|
| AI è°ƒç”¨ | Mock æ•°æ® (<1 ç§’) | çœŸå® API (>30 ç§’) | ç¯å¢ƒé…ç½®ä¸åŒ |
| æ•°æ®é‡ | 1-2 ä¸ªå“ç‰Œ | 4 ä¸ªå“ç‰Œ | æµ‹è¯•ç®€åŒ– |
| å¹¶å‘ | å•çº¿ç¨‹ | å•çº¿ç¨‹ | æ— å¹¶å‘ä¼˜åŒ– |
| ç½‘ç»œ | æœ¬åœ° | å¤–éƒ¨ API | ç½‘ç»œå»¶è¿Ÿ |

#### æ ¹å› åˆ†æ

1. **æµ‹è¯•ä½¿ç”¨ Mock æ•°æ®**: `test_real_data_e2e.py` ä½¿ç”¨æ¨¡æ‹Ÿçš„ AI å“åº”
2. **ç”Ÿäº§ä½¿ç”¨çœŸå® API**: è°ƒç”¨çœŸå®çš„è±†åŒ…ã€åƒé—®ç­‰ API
3. **æµ‹è¯•æœªè¦†ç›–è¶…æ—¶åœºæ™¯**: æµ‹è¯•ä¸­æ²¡æœ‰æ¨¡æ‹Ÿè¶…æ—¶

#### ä¿®å¤æ–¹æ¡ˆ

**æ–¹æ¡ˆ A**: æ·»åŠ é›†æˆæµ‹è¯•
```python
# ä½¿ç”¨çœŸå® API ä½†é™åˆ¶é¢‘ç‡
@pytest.mark.integration
def test_real_ai_call():
    client = AIAdapterFactory.create('doubao')
    result = client.send_prompt("æµ‹è¯•")
    assert result.success
```

**æ–¹æ¡ˆ B**: æ·»åŠ æ€§èƒ½æµ‹è¯•
```python
# æµ‹è¯• AI è°ƒç”¨è€—æ—¶
def test_ai_call_performance():
    start = time.time()
    result = call_ai_api()
    elapsed = time.time() - start
    assert elapsed < 60  # 60 ç§’å†…å®Œæˆ
```

---

## ä¸‰ã€æ¶æ„å±‚é¢é—®é¢˜

### 3.1 ç³»ç»Ÿæ¶æ„é—®é¢˜

#### é—®é¢˜ 1: å•çº¿ç¨‹ä¸²è¡Œæ‰§è¡Œ

**å½“å‰æ¶æ„**:
```
ä»»åŠ¡ 1 â†’ ä»»åŠ¡ 2 â†’ ä»»åŠ¡ 3 â†’ ... â†’ ä»»åŠ¡ 8
(30 ç§’)  (30 ç§’)  (30 ç§’)       (30 ç§’)
æ€»è€—æ—¶ï¼š240 ç§’+
```

**ä¼˜åŒ–æ¶æ„**:
```
ä»»åŠ¡ 1 â”€â”
ä»»åŠ¡ 2 â”€â”¤
ä»»åŠ¡ 3 â”€â”¼â”€â†’ å¹¶å‘æ‰§è¡Œ â†’ ç»“æœèšåˆ
ä»»åŠ¡ 4 â”€â”¤              (æ€»è€—æ—¶ï¼š60 ç§’)
...   â”€â”˜
```

#### é—®é¢˜ 2: çŠ¶æ€ç®¡ç†æ··ä¹±

**å½“å‰çŠ¶æ€**:
- `execution_store` (å†…å­˜) - ä¸å¯é 
- `task_statuses` (æ•°æ®åº“) - æœªå……åˆ†åˆ©ç”¨
- `report_snapshots` (æ•°æ®åº“) - ä»…å­˜å‚¨æœ€ç»ˆç»“æœ

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```
æ‰§è¡ŒçŠ¶æ€ â†’ task_statuses è¡¨ (å®æ—¶)
ä¸­é—´ç»“æœ â†’ dimension_results è¡¨ (å®æ—¶)
æœ€ç»ˆæŠ¥å‘Š â†’ report_snapshots è¡¨ (å®Œæˆæ—¶)
```

#### é—®é¢˜ 3: é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€

**å½“å‰é—®é¢˜**:
- `FaultTolerantExecutor` å¤„ç† AI è°ƒç”¨é”™è¯¯
- `nxm_execution_engine` å¤„ç†ä¸šåŠ¡é€»è¾‘é”™è¯¯
- `scheduler` å¤„ç†æ‰§è¡ŒçŠ¶æ€é”™è¯¯
- é”™è¯¯ä¿¡æ¯ä¼ é€’é“¾è·¯é•¿ï¼Œæ˜“ä¸¢å¤±

**ä¼˜åŒ–æ–¹æ¡ˆ**:
```python
# ç»Ÿä¸€é”™è¯¯å¤„ç†
class DiagnosisError(Exception):
    def __init__(self, error_type, error_code, error_message, recoverable=True):
        self.error_type = error_type
        self.error_code = error_code
        self.error_message = error_message
        self.recoverable = recoverable
```

---

## å››ã€å½»åº•ä¼˜åŒ–æ–¹æ¡ˆ

### 4.1 ç´§æ€¥ä¿®å¤ï¼ˆç«‹å³æ‰§è¡Œï¼‰

#### ä¿®å¤ 1: æ·»åŠ  `collect_result` æ–¹æ³•

**æ–‡ä»¶**: `wechat_backend/fault_tolerant_executor.py`

```python
class FaultTolerantExecutor:
    # ... ç°æœ‰ä»£ç  ...
    
    def collect_result(
        self,
        brand: str,
        question: str,
        model: str,
        response: Any,
        geo_data: Dict[str, Any],
        error: Optional[str] = None
    ) -> Dict[str, Any]:
        """æ”¶é›†è¯Šæ–­ç»“æœ"""
        return {
            "brand": brand,
            "question": question,
            "model": model,
            "response": response,
            "geo_data": geo_data,
            "error": error,
            "timestamp": datetime.now().isoformat()
        }
```

#### ä¿®å¤ 2: ä¿®å¤ execution_store å¯¼å…¥

**æ–‡ä»¶**: `wechat_backend/nxm_execution_engine.py`

```python
# åˆ é™¤é”™è¯¯çš„å¯¼å…¥
# from wechat_backend.views import execution_store  # âŒ åˆ é™¤

# ä½¿ç”¨æ•°æ®åº“å­˜å‚¨çŠ¶æ€
from wechat_backend.repositories import save_task_status

# æ›´æ–°çŠ¶æ€æ—¶ç›´æ¥å†™å…¥æ•°æ®åº“
save_task_status(
    task_id=execution_id,
    stage=stage,
    progress=progress,
    status_text=status_text
)
```

### 4.2 çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2 å¤©ï¼‰

#### ä¼˜åŒ– 1: æ·»åŠ å¹¶å‘æ‰§è¡Œ

**æ–‡ä»¶**: `wechat_backend/nxm_execution_engine.py`

```python
from concurrent.futures import ThreadPoolExecutor, as_completed

def execute_tasks_concurrently(tasks, max_workers=4):
    """å¹¶å‘æ‰§è¡Œä»»åŠ¡"""
    results = []
    with ThreadPoolExecutor(max_workers=max_workers) as executor:
        futures = {executor.submit(execute_single_task, task): task for task in tasks}
        for future in as_completed(futures):
            try:
                result = future.result(timeout=60)
                results.append(result)
            except Exception as e:
                results.append({"error": str(e)})
    return results
```

#### ä¼˜åŒ– 2: ä¼˜åŒ–è¶…æ—¶é…ç½®

**æ–‡ä»¶**: `wechat_backend/ai_timeout.py`

```python
TIMEOUT_CONFIG = {
    'doubao': {'default': 60, 'retry': 90},
    'qwen': {'default': 45, 'retry': 60},
    'deepseek': {'default': 60, 'retry': 90},
    'zhipu': {'default': 45, 'retry': 60},
}
```

### 4.3 ä¸­æœŸä¼˜åŒ–ï¼ˆ1 å‘¨ï¼‰

#### ä¼˜åŒ– 1: é‡æ„æ‰§è¡Œå¼•æ“

**ç›®æ ‡**: å°† NxM æ‰§è¡Œå¼•æ“é‡æ„ä¸ºå¼‚æ­¥ã€å¹¶å‘ã€å¯æ¢å¤çš„æ¶æ„

**å…³é”®æ”¹è¿›**:
1. ä½¿ç”¨ `asyncio` å®ç°çœŸæ­£çš„å¼‚æ­¥
2. ä½¿ç”¨ `ThreadPoolExecutor` å®ç°å¹¶å‘
3. ä½¿ç”¨æ•°æ®åº“å®ç°çŠ¶æ€æŒä¹…åŒ–
4. ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å®ç°ä»»åŠ¡è§£è€¦

#### ä¼˜åŒ– 2: æ·»åŠ ç›‘æ§å‘Šè­¦

**ç›‘æ§æŒ‡æ ‡**:
- AI è°ƒç”¨æˆåŠŸç‡
- AI è°ƒç”¨å¹³å‡è€—æ—¶
- è¶…æ—¶ç‡
- ç†”æ–­å™¨çŠ¶æ€

**å‘Šè­¦è§„åˆ™**:
- AI è°ƒç”¨å¤±è´¥ç‡ > 30% â†’ Warning
- AI è°ƒç”¨å¤±è´¥ç‡ > 50% â†’ Critical
- å¹³å‡è€—æ—¶ > 60 ç§’ â†’ Warning

### 4.4 é•¿æœŸä¼˜åŒ–ï¼ˆ1 æœˆï¼‰

#### ä¼˜åŒ– 1: å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—

**æ¶æ„**:
```
å‰ç«¯è¯·æ±‚ â†’ API ç½‘å…³ â†’ æ¶ˆæ¯é˜Ÿåˆ— â†’ å·¥ä½œèŠ‚ç‚¹ â†’ æ•°æ®åº“
                                    â†“
                              ç»“æœæ¨é€ â†’ å‰ç«¯
```

**ä¼˜åŠ¿**:
- è§£è€¦è¯·æ±‚å’Œå¤„ç†
- æ”¯æŒæ°´å¹³æ‰©å±•
- æ”¯æŒå¤±è´¥é‡è¯•
- æ”¯æŒè¿›åº¦è¿½è¸ª

#### ä¼˜åŒ– 2: å¼•å…¥ç¼“å­˜å±‚

**ç¼“å­˜ç­–ç•¥**:
- ç›¸åŒå“ç‰Œ + é—®é¢˜ â†’ ç¼“å­˜ç»“æœï¼ˆæœ‰æ•ˆæœŸ 24 å°æ—¶ï¼‰
- çƒ­é—¨å“ç‰Œ â†’ é¢„ç”ŸæˆæŠ¥å‘Š
- AI å“åº” â†’ ç¼“å­˜ï¼ˆæœ‰æ•ˆæœŸ 1 å°æ—¶ï¼‰

---

## äº”ã€å®æ–½è®¡åˆ’

### 5.1 ç´§æ€¥ä¿®å¤ï¼ˆä»Šå¤©å®Œæˆï¼‰

| ä»»åŠ¡ | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | çŠ¶æ€ |
|------|--------|---------|------|
| æ·»åŠ  `collect_result` æ–¹æ³• | æå·¥ | 30 åˆ†é’Ÿ | â³ å¾…æ‰§è¡Œ |
| ä¿®å¤ `execution_store` å¯¼å…¥ | æå·¥ | 30 åˆ†é’Ÿ | â³ å¾…æ‰§è¡Œ |
| éªŒè¯ä¿®å¤æ•ˆæœ | èµµå·¥ | 30 åˆ†é’Ÿ | â³ å¾…æ‰§è¡Œ |

### 5.2 çŸ­æœŸä¼˜åŒ–ï¼ˆ2 å¤©å†…å®Œæˆï¼‰

| ä»»åŠ¡ | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | çŠ¶æ€ |
|------|--------|---------|------|
| æ·»åŠ å¹¶å‘æ‰§è¡Œ | æå·¥ | 4 å°æ—¶ | â³ å¾…æ‰§è¡Œ |
| ä¼˜åŒ–è¶…æ—¶é…ç½® | æå·¥ | 2 å°æ—¶ | â³ å¾…æ‰§è¡Œ |
| ä¼˜åŒ–ç†”æ–­å™¨é…ç½® | æå·¥ | 2 å°æ—¶ | â³ å¾…æ‰§è¡Œ |
| é›†æˆæµ‹è¯• | èµµå·¥ | 4 å°æ—¶ | â³ å¾…æ‰§è¡Œ |

### 5.3 ä¸­æœŸä¼˜åŒ–ï¼ˆ1 å‘¨å†…å®Œæˆï¼‰

| ä»»åŠ¡ | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | çŠ¶æ€ |
|------|--------|---------|------|
| é‡æ„æ‰§è¡Œå¼•æ“ | æå·¥ + å¼ å·¥ | 2 å¤© | â³ å¾…æ‰§è¡Œ |
| æ·»åŠ ç›‘æ§å‘Šè­¦ | å­™å·¥ | 1 å¤© | â³ å¾…æ‰§è¡Œ |
| æ€§èƒ½æµ‹è¯• | èµµå·¥ | 1 å¤© | â³ å¾…æ‰§è¡Œ |

### 5.4 é•¿æœŸä¼˜åŒ–ï¼ˆ1 æœˆå†…å®Œæˆï¼‰

| ä»»åŠ¡ | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | çŠ¶æ€ |
|------|--------|---------|------|
| å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ— | æå·¥ + å¼ å·¥ | 1 å‘¨ | â³ å¾…æ‰§è¡Œ |
| å¼•å…¥ç¼“å­˜å±‚ | æå·¥ | 1 å‘¨ | â³ å¾…æ‰§è¡Œ |
| æ¶æ„æ–‡æ¡£ | å¼ å·¥ | 2 å¤© | â³ å¾…æ‰§è¡Œ |

---

## å…­ã€é£é™©è¯„ä¼°

### 6.1 å½“å‰é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| ç”¨æˆ·æ— æ³•è·å–æŠ¥å‘Š | é«˜ | 100% | ç´§æ€¥ä¿®å¤ |
| ç”¨æˆ·æµå¤± | é«˜ | é«˜ | å¿«é€Ÿä¿®å¤ + è¡¥å¿ |
| å“ç‰Œå£°èª‰å—æŸ | é«˜ | ä¸­ | å…¬å…³å‡†å¤‡ |

### 6.2 ä¿®å¤é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| ä¿®å¤å¼•å…¥æ–° Bug | ä¸­ | ä¸­ | å……åˆ†æµ‹è¯• |
| ä¿®å¤ä¸å½»åº• | é«˜ | ä¸­ | åˆ†é˜¶æ®µéªŒè¯ |
| æ€§èƒ½ä¸‹é™ | ä¸­ | ä½ | æ€§èƒ½ç›‘æ§ |

---

## ä¸ƒã€ç­¾å­—ç¡®è®¤

| è§’è‰² | å§“å | ç­¾å­— | æ—¥æœŸ |
|------|------|------|------|
| é¦–å¸­æ¶æ„å¸ˆ | å¼ å·¥ | _________ | _________ |
| åç«¯å¼€å‘ | æå·¥ | _________ | _________ |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | èµµå·¥ | _________ | _________ |
| é¡¹ç›®æ€»æŒ‡æŒ¥ | TPM | _________ | _________ |

---

## å…«ã€ç»“è®º

### 8.1 æ ¸å¿ƒç»“è®º

**å½“å‰ç³»ç»Ÿå­˜åœ¨ 5 ä¸ªè‡´å‘½é—®é¢˜ï¼Œå¯¼è‡´ç”Ÿäº§ç¯å¢ƒæŠ¥å‘Šç”ŸæˆæˆåŠŸç‡ 0%**

**æ ¹æœ¬åŸå› **:
1. ä»£ç ä¸å®Œæ•´ï¼ˆç¼ºå°‘ `collect_result` æ–¹æ³•ï¼‰
2. å¯¼å…¥é”™è¯¯ï¼ˆ`execution_store` å¯¼å…¥å¤±è´¥ï¼‰
3. æ¶æ„è®¾è®¡ç¼ºé™·ï¼ˆå•çº¿ç¨‹ä¸²è¡Œæ‰§è¡Œï¼‰
4. é…ç½®ä¸å½“ï¼ˆè¶…æ—¶è¿‡ç´§ã€ç†”æ–­è¿‡äºæ•æ„Ÿï¼‰
5. æµ‹è¯•ä¸ç”Ÿäº§ç¯å¢ƒä¸ä¸€è‡´

### 8.2 ä¿®å¤ä¼˜å…ˆçº§

**P0 - ç«‹å³ä¿®å¤** (ä»Šå¤©):
1. æ·»åŠ  `collect_result` æ–¹æ³•
2. ä¿®å¤ `execution_store` å¯¼å…¥

**P1 - çŸ­æœŸä¿®å¤** (2 å¤©):
1. æ·»åŠ å¹¶å‘æ‰§è¡Œ
2. ä¼˜åŒ–è¶…æ—¶é…ç½®
3. ä¼˜åŒ–ç†”æ–­å™¨é…ç½®

**P2 - ä¸­æœŸä¼˜åŒ–** (1 å‘¨):
1. é‡æ„æ‰§è¡Œå¼•æ“
2. æ·»åŠ ç›‘æ§å‘Šè­¦

**P3 - é•¿æœŸä¼˜åŒ–** (1 æœˆ):
1. å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—
2. å¼•å…¥ç¼“å­˜å±‚

### 8.3 æˆåŠŸæ ‡å‡†

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | æ—¶é—´ |
|------|-------|--------|------|
| æŠ¥å‘Šç”ŸæˆæˆåŠŸç‡ | 0% | â‰¥95% | 2 å¤© |
| å¹³å‡è€—æ—¶ | >300 ç§’ | <60 ç§’ | 1 å‘¨ |
| ç”¨æˆ·æ»¡æ„åº¦ | 0% | â‰¥90% | 1 å‘¨ |

---

**æŠ¥å‘ŠçŠ¶æ€**: ğŸ”´ ç´§æ€¥  
**ç”Ÿæˆæ—¥æœŸ**: 2026-03-06  
**ä¸‹æ¬¡æ›´æ–°**: 2026-03-07 (ç´§æ€¥ä¿®å¤å)  
**è´Ÿè´£äºº**: é¦–å¸­æ¶æ„å¸ˆ å¼ å·¥
